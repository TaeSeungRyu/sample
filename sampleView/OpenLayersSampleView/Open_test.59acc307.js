parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KniQ":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.inherits=e,exports.getUid=o,exports.VERSION=void 0;var r=0;function o(t){return t.ol_uid||(t.ol_uid=String(++r))}var n="5.3.3";exports.VERSION=n;
},{}],"ygGQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./util.js"),t=function(t){function r(r){var o="Assertion failed. See https://openlayers.org/en/"+("latest"===e.VERSION?e.VERSION:"v"+e.VERSION.split("-")[0])+"/doc/errors/#"+r+" for details.";t.call(this,o),this.code=r,this.name="AssertionError",this.message=o}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(Error),r=t;exports.default=r;
},{"./util.js":"KniQ"}],"BTrx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"zehl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"mH6q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=e,exports.getValues=n,exports.isEmpty=t,exports.assign=void 0;var r="function"==typeof Object.assign?Object.assign:function(r,e){var n=arguments;if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),o=1,s=arguments.length;o<s;++o){var i=n[o];if(null!=i)for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])}return t};function e(r){for(var e in r)delete r[e]}function n(r){var e=[];for(var n in r)e.push(r[n]);return e}function t(r){var e;for(e in r)return!1;return!e}exports.assign=r;
},{}],"55Uq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindListener=t,exports.findListener=n,exports.getListeners=r,exports.listen=s,exports.listenOnce=a,exports.unlisten=u,exports.unlistenByKey=c,exports.unlistenAll=f;var e=require("./obj.js");function t(e){var t=function(t){var n=e.listener,r=e.bindTo||e.target;return e.callOnce&&c(e),n.call(r,t)};return e.boundListener=t,t}function n(e,t,n,r){for(var i,l=0,o=e.length;l<o;++l)if((i=e[l]).listener===t&&i.bindTo===n)return r&&(i.deleteIndex=l),i}function r(e,t){var n=i(e);return n?n[t]:void 0}function i(e,t){var n=e.ol_lm;return!n&&t&&(n=e.ol_lm={}),n}function l(e){delete e.ol_lm}function o(t,n){var o=r(t,n);if(o){for(var s=0,a=o.length;s<a;++s)t.removeEventListener(n,o[s].boundListener),(0,e.clear)(o[s]);o.length=0;var u=i(t);u&&(delete u[n],0===Object.keys(u).length&&l(t))}}function s(e,r,l,o,s){var a=i(e,!0),u=a[r];u||(u=a[r]=[]);var c=n(u,l,o,!1);return c?s||(c.callOnce=!1):(c={bindTo:o,callOnce:!!s,listener:l,target:e,type:r},e.addEventListener(r,t(c)),u.push(c)),c}function a(e,t,n,r){return s(e,t,n,r,!0)}function u(e,t,i,l){var o=r(e,t);if(o){var s=n(o,i,l,!0);s&&c(s)}}function c(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var n=r(t.target,t.type);if(n){var i="deleteIndex"in t?t.deleteIndex:n.indexOf(t);-1!==i&&n.splice(i,1),0===n.length&&o(t.target,t.type)}(0,e.clear)(t)}}function f(e){var t=i(e);if(t)for(var n in t)o(e,n)}
},{"./obj.js":"mH6q"}],"DDda":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function(){this.disposed_=!1};e.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){};var s=e;exports.default=s;
},{}],"RgA2":[function(require,module,exports) {
"use strict";function e(){return!0}function t(){return!1}function r(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=e,exports.FALSE=t,exports.VOID=r;
},{}],"fKNg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=o,exports.preventDefault=p,exports.default=void 0;var t=function(t){this.propagationStopped,this.type=t,this.target=null};function o(t){t.stopPropagation()}function p(t){t.preventDefault()}t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0};var e=t;exports.default=e;
},{}],"8CR4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../Disposable.js")),t=require("../events.js"),i=require("../functions.js"),s=n(require("./Event.js"));function n(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function n(){e.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addEventListener=function(e,t){var i=this.listeners_[e];i||(i=this.listeners_[e]=[]),-1===i.indexOf(t)&&i.push(t)},n.prototype.dispatchEvent=function(e){var t="string"==typeof e?new s.default(e):e,n=t.type;t.target=this;var r,o=this.listeners_[n];if(o){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var p=0,a=o.length;p<a;++p)if(!1===o[p].call(this,t)||t.propagationStopped){r=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var h=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];h--;)this.removeEventListener(n,i.VOID);delete this.dispatching_[n]}return r}},n.prototype.disposeInternal=function(){(0,t.unlistenAll)(this)},n.prototype.getListeners=function(e){return this.listeners_[e]},n.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0},n.prototype.removeEventListener=function(e,t){var s=this.listeners_[e];if(s){var n=s.indexOf(t);e in this.pendingRemovals_?(s[n]=i.VOID,++this.pendingRemovals_[e]):(s.splice(n,1),0===s.length&&delete this.listeners_[e])}},n}(e.default),o=r;exports.default=o;
},{"../Disposable.js":"DDda","../events.js":"55Uq","../functions.js":"RgA2","./Event.js":"fKNg"}],"C8cu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};exports.default=e;
},{}],"8IdS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=o,exports.default=void 0;var e=require("./events.js"),t=n(require("./events/Target.js")),r=n(require("./events/EventType.js"));function n(e){return e&&e.__esModule?e:{default:e}}var i=function(t){function n(){t.call(this),this.revision_=0}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.changed=function(){++this.revision_,this.dispatchEvent(r.default.CHANGE)},n.prototype.getRevision=function(){return this.revision_},n.prototype.on=function(t,r){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=(0,e.listen)(this,t[o],r);return i}return(0,e.listen)(this,t,r)},n.prototype.once=function(t,r){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),o=0;o<n;++o)i[o]=(0,e.listenOnce)(this,t[o],r);return i}return(0,e.listenOnce)(this,t,r)},n.prototype.un=function(t,r){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)(0,e.unlisten)(this,t[n],r);else(0,e.unlisten)(this,t,r)},n}(t.default);function o(t){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)(0,e.unlistenByKey)(t[r]);else(0,e.unlistenByKey)(t)}var s=i;exports.default=s;
},{"./events.js":"55Uq","./events/Target.js":"8CR4","./events/EventType.js":"C8cu"}],"PhPh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=a,exports.default=exports.ObjectEvent=void 0;var t=require("./util.js"),e=i(require("./ObjectEventType.js")),r=i(require("./Observable.js")),o=i(require("./events/Event.js")),s=require("./obj.js");function i(t){return t&&t.__esModule?t:{default:t}}var n=function(t){function e(e,r,o){t.call(this,e),this.key=r,this.oldValue=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default);exports.ObjectEvent=n;var u=function(r){function o(e){r.call(this),(0,t.getUid)(this),this.values_={},void 0!==e&&this.setProperties(e)}return r&&(o.__proto__=r),o.prototype=Object.create(r&&r.prototype),o.prototype.constructor=o,o.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},o.prototype.getKeys=function(){return Object.keys(this.values_)},o.prototype.getProperties=function(){return(0,s.assign)({},this.values_)},o.prototype.notify=function(t,r){var o;o=a(t),this.dispatchEvent(new n(o,t,r)),o=e.default.PROPERTYCHANGE,this.dispatchEvent(new n(o,t,r))},o.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var o=this.values_[t];this.values_[t]=e,o!==e&&this.notify(t,o)}},o.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},o.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},o}(r.default),p={};function a(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}var c=u;exports.default=c;
},{"./util.js":"KniQ","./ObjectEventType.js":"zehl","./Observable.js":"8IdS","./events/Event.js":"fKNg","./obj.js":"mH6q"}],"FnDa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=n(require("./AssertionError.js")),e=n(require("./CollectionEventType.js")),r=n(require("./Object.js")),i=n(require("./events/Event.js"));function n(t){return t&&t.__esModule?t:{default:t}}var o={LENGTH:"length"},s=function(t){function e(e,r){t.call(this,e),this.element=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i.default);exports.CollectionEvent=s;var a=function(r){function i(t,e){r.call(this);var i=e||{};if(this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(var n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},i.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},i.prototype.forEach=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)t(e[r],r,e)},i.prototype.getArray=function(){return this.array_},i.prototype.item=function(t){return this.array_[t]},i.prototype.getLength=function(){return this.get(o.LENGTH)},i.prototype.insertAt=function(t,r){this.unique_&&this.assertUnique_(r),this.array_.splice(t,0,r),this.updateLength_(),this.dispatchEvent(new s(e.default.ADD,r))},i.prototype.pop=function(){return this.removeAt(this.getLength()-1)},i.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},i.prototype.remove=function(t){for(var e=this.array_,r=0,i=e.length;r<i;++r)if(e[r]===t)return this.removeAt(r)},i.prototype.removeAt=function(t){var r=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new s(e.default.REMOVE,r)),r},i.prototype.setAt=function(t,r){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(r,t);var n=this.array_[t];this.array_[t]=r,this.dispatchEvent(new s(e.default.REMOVE,n)),this.dispatchEvent(new s(e.default.ADD,r))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,r)}},i.prototype.updateLength_=function(){this.set(o.LENGTH,this.array_.length)},i.prototype.assertUnique_=function(e,r){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===e&&i!==r)throw new t.default(58)},i}(r.default),h=a;exports.default=h;
},{"./AssertionError.js":"ygGQ","./CollectionEventType.js":"BTrx","./Object.js":"PhPh","./events/Event.js":"fKNg"}],"vFcA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e,r,o){t.call(this,e),this.map=r,this.frameState=void 0!==o?o:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.default),o=r;exports.default=o;
},{"./events/Event.js":"fKNg"}],"HMLS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(e,o,r,i,n){t.call(this,e,o,n),this.originalEvent=r,this.pixel=o.getEventPixel(r),this.coordinate=o.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(t.default),r=o;exports.default=r;
},{"./MapEvent.js":"vFcA"}],"SCyv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=u,exports.EXTENSIONS=exports.MAX_TEXTURE_SIZE=exports.HAS=exports.DEBUG=exports.FRAMEBUFFER=exports.COMPILE_STATUS=exports.CLAMP_TO_EDGE=exports.TEXTURE0=exports.TEXTURE_2D=exports.TEXTURE_WRAP_T=exports.TEXTURE_WRAP_S=exports.TEXTURE_MIN_FILTER=exports.TEXTURE_MAG_FILTER=exports.LINEAR=exports.LINK_STATUS=exports.VERTEX_SHADER=exports.FRAGMENT_SHADER=exports.RGBA=exports.FLOAT=exports.UNSIGNED_INT=exports.UNSIGNED_SHORT=exports.UNSIGNED_BYTE=exports.SCISSOR_TEST=exports.DEPTH_TEST=exports.STENCIL_TEST=exports.BLEND=exports.CULL_FACE=exports.DYNAMIC_DRAW=exports.STATIC_DRAW=exports.STREAM_DRAW=exports.ELEMENT_ARRAY_BUFFER=exports.ARRAY_BUFFER=exports.ONE_MINUS_SRC_ALPHA=exports.TRIANGLE_STRIP=exports.TRIANGLES=exports.COLOR_BUFFER_BIT=exports.COLOR_ATTACHMENT0=exports.SRC_ALPHA=exports.ONE=void 0;var r=1;exports.ONE=r;var e=770;exports.SRC_ALPHA=e;var E=36064;exports.COLOR_ATTACHMENT0=E;var t=16384;exports.COLOR_BUFFER_BIT=t;var T=4;exports.TRIANGLES=T;var o=5;exports.TRIANGLE_STRIP=o;var s=771;exports.ONE_MINUS_SRC_ALPHA=s;var p=34962;exports.ARRAY_BUFFER=p;var x=34963;exports.ELEMENT_ARRAY_BUFFER=x;var _=35040;exports.STREAM_DRAW=_;var R=35044;exports.STATIC_DRAW=R;var A=35048;exports.DYNAMIC_DRAW=A;var S=2884;exports.CULL_FACE=S;var a=3042;exports.BLEND=a;var N=2960;exports.STENCIL_TEST=N;var I=2929;exports.DEPTH_TEST=I;var v=3089;exports.SCISSOR_TEST=v;var U=5121;exports.UNSIGNED_BYTE=U;var L=5123;exports.UNSIGNED_SHORT=L;var C=5125;exports.UNSIGNED_INT=C;var D=5126;exports.FLOAT=D;var F=6408;exports.RGBA=F;var M=35632;exports.FRAGMENT_SHADER=M;var O=35633;exports.VERTEX_SHADER=O;var X=35714;exports.LINK_STATUS=X;var n=9729;exports.LINEAR=n;var G=10240;exports.TEXTURE_MAG_FILTER=G;var P=10241;exports.TEXTURE_MIN_FILTER=P;var B=10242;exports.TEXTURE_WRAP_S=B;var H=10243;exports.TEXTURE_WRAP_T=H;var i=3553;exports.TEXTURE_2D=i;var c=33984;exports.TEXTURE0=c;var d=33071;exports.CLAMP_TO_EDGE=d;var l=35713;exports.COMPILE_STATUS=l;var W=36160;exports.FRAMEBUFFER=W;var f=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function u(r,e){for(var E=f.length,t=0;t<E;++t)try{var T=r.getContext(f[t],e);if(T)return T}catch(o){}return null}var g,w,Y=!0;exports.DEBUG=Y,exports.MAX_TEXTURE_SIZE=g,exports.EXTENSIONS=w;var b=!1;if(exports.HAS=b,"undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var m=document.createElement("canvas"),y=u(m,{failIfMajorPerformanceCaveat:!0});y&&(exports.HAS=b=!0,exports.MAX_TEXTURE_SIZE=g=y.getParameter(y.MAX_TEXTURE_SIZE),exports.EXTENSIONS=w=y.getSupportedExtensions())}catch(Z){}
},{}],"f3Nv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"WEBGL",{enumerable:!0,get:function(){return e.HAS}}),exports.MSPOINTER=exports.POINTER=exports.TOUCH=exports.GEOLOCATION=exports.CANVAS_LINE_DASH=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;var e=require("./webgl.js"),r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",t=-1!==r.indexOf("firefox");exports.FIREFOX=t;var o=-1!==r.indexOf("safari")&&-1==r.indexOf("chrom");exports.SAFARI=o;var n=-1!==r.indexOf("webkit")&&-1==r.indexOf("edge");exports.WEBKIT=n;var i=-1!==r.indexOf("macintosh");exports.MAC=i;var s=window.devicePixelRatio||1;exports.DEVICE_PIXEL_RATIO=s;var a=function(){var e=!1;try{e=!!document.createElement("canvas").getContext("2d").setLineDash}catch(r){}return e}();exports.CANVAS_LINE_DASH=a;var x="geolocation"in navigator;exports.GEOLOCATION=x;var p="ontouchstart"in window;exports.TOUCH=p;var O="PointerEvent"in window;exports.POINTER=O;var E=!!navigator.msPointerEnabled;exports.MSPOINTER=E;
},{"./webgl.js":"SCyv"}],"Yh/D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"C8cu"}],"J1WQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapBrowserEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e,r,o,n,u){t.call(this,e,r,o.originalEvent,n,u),this.pointerEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.default),o=r;exports.default=o;
},{"./MapBrowserEvent.js":"HMLS"}],"TaSm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"R8kl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t,e){this.dispatcher=t,this.mapping_=e};t.prototype.getEvents=function(){return Object.keys(this.mapping_)},t.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var e=t;exports.default=e;
},{}],"Plx9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareEvent=h,exports.default=exports.POINTER_TYPE=exports.POINTER_ID=void 0;var t=e(require("./EventSource.js"));function e(t){return t&&t.__esModule?t:{default:t}}var i=1;exports.POINTER_ID=i;var r="mouse";exports.POINTER_TYPE=r;var o=25;function s(t){if(!this.isEventSimulatedFromTouch_(t)){i.toString()in this.pointerMap&&this.cancel(t);var e=h(t,this.dispatcher);this.pointerMap[i.toString()]=t,this.dispatcher.down(e,t)}}function n(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.move(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[i.toString()];if(e&&e.button===t.button){var r=h(t,this.dispatcher);this.dispatcher.up(r,t),this.cleanupMouse()}}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function p(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var c=function(t){function e(e){var i={mousedown:s,mousemove:n,mouseup:a,mouseover:u,mouseout:p};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,r=t.clientY,s=0,n=e.length,a=void 0;s<n&&(a=e[s]);s++){var u=Math.abs(i-a[0]),p=Math.abs(r-a[1]);if(u<=o&&p<=o)return!0}return!1},e.prototype.cancel=function(t){var e=h(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[i.toString()]},e}(t.default);function h(t,e){var o=e.cloneEvent(t,t),s=o.preventDefault;return o.preventDefault=function(){t.preventDefault(),s()},o.pointerId=i,o.isPrimary=!0,o.pointerType=r,o}var v=c;exports.default=v;
},{"./EventSource.js":"R8kl"}],"qKvi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./EventSource.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=["","unavailable","touch","pen","mouse"];function n(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function i(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function p(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function o(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function a(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function s(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function c(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function u(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var h=function(t){function e(e){var r={MSPointerDown:n,MSPointerMove:i,MSPointerUp:p,MSPointerOut:o,MSPointerOver:a,MSPointerCancel:s,MSGotPointerCapture:u,MSLostPointerCapture:c};t.call(this,e,r),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=r[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(t.default),v=h;exports.default=v;
},{"./EventSource.js":"R8kl"}],"Hw3i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./EventSource.js"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t){this.dispatcher.fireNativeEvent(t)}function r(t){this.dispatcher.fireNativeEvent(t)}function n(t){this.dispatcher.fireNativeEvent(t)}function o(t){this.dispatcher.fireNativeEvent(t)}function c(t){this.dispatcher.fireNativeEvent(t)}function p(t){this.dispatcher.fireNativeEvent(t)}function a(t){this.dispatcher.fireNativeEvent(t)}function u(t){this.dispatcher.fireNativeEvent(t)}var s=function(t){function e(e){var s={pointerdown:i,pointermove:r,pointerup:n,pointerout:o,pointerover:c,pointercancel:p,gotpointercapture:u,lostpointercapture:a};t.call(this,e,s)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.default),f=s;exports.default=f;
},{"./EventSource.js":"R8kl"}],"rjJl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var i=!1,n=function(t){function e(e,i,n){t.call(this,e),this.originalEvent=i;var l=n||{};this.buttons=s(l),this.pressure=r(l,this.buttons),this.bubbles="bubbles"in l&&l.bubbles,this.cancelable="cancelable"in l&&l.cancelable,this.view="view"in l?l.view:null,this.detail="detail"in l?l.detail:null,this.screenX="screenX"in l?l.screenX:0,this.screenY="screenY"in l?l.screenY:0,this.clientX="clientX"in l?l.clientX:0,this.clientY="clientY"in l?l.clientY:0,this.ctrlKey="ctrlKey"in l&&l.ctrlKey,this.altKey="altKey"in l&&l.altKey,this.shiftKey="shiftKey"in l&&l.shiftKey,this.metaKey="metaKey"in l&&l.metaKey,this.button="button"in l?l.button:0,this.relatedTarget="relatedTarget"in l?l.relatedTarget:null,this.pointerId="pointerId"in l?l.pointerId:0,this.width="width"in l?l.width:0,this.height="height"in l?l.height:0,this.tiltX="tiltX"in l?l.tiltX:0,this.tiltY="tiltY"in l?l.tiltY:0,this.pointerType="pointerType"in l?l.pointerType:"",this.hwTimestamp="hwTimestamp"in l?l.hwTimestamp:0,this.isPrimary="isPrimary"in l&&l.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.default);function s(t){var e;if(t.buttons||i)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}function r(t,e){return t.pressure?t.pressure:e?.5:0}!function(){try{var t=new MouseEvent("click",{buttons:1});i=1===t.buttons}catch(e){}}();var l=n;exports.default=l;
},{"../events/Event.js":"fKNg"}],"luEr":[function(require,module,exports) {
"use strict";function r(r,n,t){for(var u,o,i=t||e,f=0,a=r.length,s=!1;f<a;)(o=+i(r[u=f+(a-f>>1)],n))<0?f=u+1:(a=u,s=!o);return s?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r.indexOf(e)>=0}function t(r,e,n){var t,u=r.length;if(r[0]<=e)return 0;if(e<=r[u-1])return u-1;if(n>0){for(t=1;t<u;++t)if(r[t]<e)return t-1}else if(n<0){for(t=1;t<u;++t)if(r[t]<=e)return t}else for(t=1;t<u;++t){if(r[t]==e)return t;if(r[t]<e)return r[t-1]-e<e-r[t]?t-1:t}return u-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function i(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){for(var n,t=r.length>>>0,u=0;u<t;u++)if(e(n=r[u],u,r))return n;return null}function a(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function s(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function l(r,e){var n;return!r.every(function(t,u){return n=u,!e(t,u,r)})?n:-1}function c(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var o=u(r[n-1],e);return!(o>0||t&&0===o)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.numberSafeCompareFunction=e,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=u,exports.extend=o,exports.remove=i,exports.find=f,exports.equals=a,exports.stableSort=s,exports.findIndex=l,exports.isSorted=c;
},{}],"XfdC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=r(require("./EventSource.js")),i=require("./MouseSource.js");function r(t){return t&&t.__esModule?t:{default:t}}var o=200,s="touch";function n(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function c(t){this.processTouches_(t,this.moveOverOut_)}function u(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function h(t){this.processTouches_(t,this.cancelOut_)}var a=function(e){function r(t,i){var r={touchstart:n,touchmove:c,touchend:u,touchcancel:h};e.call(this,t,r),this.pointerMap=t.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},r.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&i.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},r.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},r.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),o)},r.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},r.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},r.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType=s,i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},r.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),r=i.length;function o(){t.preventDefault()}for(var s=0;s<r;++s){var n=this.touchToPointer_(t,i[s]);n.preventDefault=o,e.call(this,t,n)}},r.prototype.findTouch_=function(t,e){for(var i=t.length,r=0;r<i;r++){if(t[r].identifier===e)return!0}return!1},r.prototype.vacuumTouches_=function(t){var e=t.touches,r=Object.keys(this.pointerMap),o=r.length;if(o>=e.length){for(var s=[],n=0;n<o;++n){var c=Number(r[n]),u=this.pointerMap[c];c==i.POINTER_ID||this.findTouch_(e,c-2)||s.push(u.out)}for(var h=0;h<s.length;++h)this.cancelOut_(t,s[h])}},r.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},r.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var o=r.out,s=r.outTarget;this.dispatcher.move(i,t),o&&s!==i.target&&(o.relatedTarget=i.target,i.relatedTarget=s,o.target=s,i.target?(this.dispatcher.leaveOut(o,t),this.dispatcher.enterOver(i,t)):(i.target=s,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},r.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},r.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},r.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},r.prototype.dedupSynthMouse_=function(e){var i=this.mouseSource.lastTouches,r=e.changedTouches[0];if(this.isPrimaryTouch_(r)){var o=[r.clientX,r.clientY];i.push(o),setTimeout(function(){(0,t.remove)(i,o)},this.dedupTimeout_)}},r}(e.default),p=a;exports.default=p;
},{"../array.js":"luEr","./EventSource.js":"R8kl","./MouseSource.js":"Plx9"}],"zTqe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=l(require("../events/Target.js")),r=require("../has.js"),n=l(require("./EventType.js")),i=c(require("./MouseSource.js")),o=l(require("./MsSource.js")),s=l(require("./NativeSource.js")),u=l(require("./PointerEvent.js")),a=l(require("./TouchSource.js"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function c(e){if(e&&e.__esModule)return e;var t=p();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}}return r.default=e,t&&t.set(e,r),r}function l(e){return e&&e.__esModule?e:{default:e}}var f=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],v=function(t){function p(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(p.__proto__=t),p.prototype=Object.create(t&&t.prototype),p.prototype.constructor=p,p.prototype.registerSources=function(){if(r.POINTER)this.registerSource("native",new s.default(this));else if(r.MSPOINTER)this.registerSource("ms",new o.default(this));else{var e=new i.default(this);this.registerSource("mouse",e),r.TOUCH&&this.registerSource("touch",new a.default(this,e))}this.register_()},p.prototype.registerSource=function(e,t){var r=t,n=r.getEvents();n&&(n.forEach(function(e){var t=r.getHandlerForEvent(e);t&&(this.eventMap_[e]=t.bind(r))}.bind(this)),this.eventSourceList_.push(r))},p.prototype.register_=function(){for(var e=this.eventSourceList_.length,t=0;t<e;t++){var r=this.eventSourceList_[t];this.addEvents_(r.getEvents())}},p.prototype.unregister_=function(){for(var e=this.eventSourceList_.length,t=0;t<e;t++){var r=this.eventSourceList_[t];this.removeEvents_(r.getEvents())}},p.prototype.eventHandler_=function(e){var t=e.type,r=this.eventMap_[t];r&&r(e)},p.prototype.addEvents_=function(t){t.forEach(function(t){(0,e.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))},p.prototype.removeEvents_=function(t){t.forEach(function(t){(0,e.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))},p.prototype.cloneEvent=function(e,t){for(var r={},n=0,i=f.length;n<i;n++){var o=f[n][0];r[o]=e[o]||t[o]||f[n][1]}return r},p.prototype.down=function(e,t){this.fireEvent(n.default.POINTERDOWN,e,t)},p.prototype.move=function(e,t){this.fireEvent(n.default.POINTERMOVE,e,t)},p.prototype.up=function(e,t){this.fireEvent(n.default.POINTERUP,e,t)},p.prototype.enter=function(e,t){e.bubbles=!1,this.fireEvent(n.default.POINTERENTER,e,t)},p.prototype.leave=function(e,t){e.bubbles=!1,this.fireEvent(n.default.POINTERLEAVE,e,t)},p.prototype.over=function(e,t){e.bubbles=!0,this.fireEvent(n.default.POINTEROVER,e,t)},p.prototype.out=function(e,t){e.bubbles=!0,this.fireEvent(n.default.POINTEROUT,e,t)},p.prototype.cancel=function(e,t){this.fireEvent(n.default.POINTERCANCEL,e,t)},p.prototype.leaveOut=function(e,t){this.out(e,t),this.contains_(e.target,e.relatedTarget)||this.leave(e,t)},p.prototype.enterOver=function(e,t){this.over(e,t),this.contains_(e.target,e.relatedTarget)||this.enter(e,t)},p.prototype.contains_=function(e,t){return!(!e||!t)&&e.contains(t)},p.prototype.makeEvent=function(e,t,r){return new u.default(e,r,t)},p.prototype.fireEvent=function(e,t,r){var n=this.makeEvent(e,t,r);this.dispatchEvent(n)},p.prototype.fireNativeEvent=function(e){var t=this.makeEvent(e.type,e,e);this.dispatchEvent(t)},p.prototype.wrapMouseEvent=function(e,t){return this.makeEvent(e,(0,i.prepareEvent)(t,this),t)},p.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},p}(t.default),h=v;exports.default=h;
},{"../events.js":"55Uq","../events/Target.js":"8CR4","../has.js":"f3Nv","./EventType.js":"TaSm","./MouseSource.js":"Plx9","./MsSource.js":"qKvi","./NativeSource.js":"Hw3i","./PointerEvent.js":"rjJl","./TouchSource.js":"XfdC"}],"ohHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./has.js"),e=a(require("./MapBrowserEventType.js")),i=a(require("./MapBrowserPointerEvent.js")),n=require("./events.js"),s=a(require("./events/Target.js")),r=a(require("./pointer/EventType.js")),o=a(require("./pointer/PointerEventHandler.js"));function a(t){return t&&t.__esModule?t:{default:t}}var d=function(s){function a(e,i){s.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*t.DEVICE_PIXEL_RATIO:t.DEVICE_PIXEL_RATIO,this.down_=null;var a=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new o.default(a),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=(0,n.listen)(this.pointerEventHandler_,r.default.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,n.listen)(this.pointerEventHandler_,r.default.POINTERMOVE,this.relayEvent_,this)}return s&&(a.__proto__=s),a.prototype=Object.create(s&&s.prototype),a.prototype.constructor=a,a.prototype.emulateClick_=function(t){var n=new i.default(e.default.CLICK,this.map_,t);this.dispatchEvent(n),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new i.default(e.default.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var n=new i.default(e.default.SINGLECLICK,this.map_,t);this.dispatchEvent(n)}.bind(this),250)},a.prototype.updateActivePointers_=function(t){var i=t;i.type==e.default.POINTERUP||i.type==e.default.POINTERCANCEL?delete this.trackedTouches_[i.pointerId]:i.type==e.default.POINTERDOWN&&(this.trackedTouches_[i.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},a.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var s=new i.default(e.default.POINTERUP,this.map_,t);this.dispatchEvent(s),s.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(n.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},a.prototype.isMouseActionButton_=function(t){return 0===t.button},a.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var s=new i.default(e.default.POINTERDOWN,this.map_,t);this.dispatchEvent(s),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new o.default(document),this.dragListenerKeys_.push((0,n.listen)(this.documentPointerEventHandler_,e.default.POINTERMOVE,this.handlePointerMove_,this),(0,n.listen)(this.documentPointerEventHandler_,e.default.POINTERUP,this.handlePointerUp_,this),(0,n.listen)(this.pointerEventHandler_,e.default.POINTERCANCEL,this.handlePointerUp_,this)))},a.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var n=new i.default(e.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(n)}t.preventDefault()},a.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new i.default(t.type,this.map_,t,e))},a.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},a.prototype.disposeInternal=function(){this.relayedListenerKey_&&((0,n.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&((0,n.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(n.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),s.prototype.disposeInternal.call(this)},a}(s.default),h=d;exports.default=h;
},{"./has.js":"f3Nv","./MapBrowserEventType.js":"Yh/D","./MapBrowserPointerEvent.js":"J1WQ","./events.js":"55Uq","./events/Target.js":"8CR4","./pointer/EventType.js":"TaSm","./pointer/PointerEventHandler.js":"zTqe"}],"xLGm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"zlNQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"z39m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"Xz9x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};exports.default=e;
},{}],"fLG6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"ygGQ"}],"RQLY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var t=require("../asserts.js"),e=require("../obj.js"),i=1/0;exports.DROP=i;var n=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};n.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,(0,e.clear)(this.queuedElements_)},n.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i},n.prototype.enqueue=function(e){(0,t.assert)(!(this.keyFunction_(e)in this.queuedElements_),31);var n=this.priorityFunction_(e);return n!=i&&(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},n.prototype.getCount=function(){return this.elements_.length},n.prototype.getLeftChildIndex_=function(t){return 2*t+1},n.prototype.getRightChildIndex_=function(t){return 2*t+2},n.prototype.getParentIndex_=function(t){return t-1>>1},n.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},n.prototype.isEmpty=function(){return 0===this.elements_.length},n.prototype.isKeyQueued=function(t){return t in this.queuedElements_},n.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},n.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;t<n>>1;){var u=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),p=h<n&&i[h]<i[u]?h:u;e[t]=e[p],i[t]=i[p],t=p}e[t]=s,i[t]=r,this.siftDown_(o,t)},n.prototype.siftDown_=function(t,e){for(var i=this.elements_,n=this.priorities_,s=i[e],r=n[e];e>t;){var o=this.getParentIndex_(e);if(!(n[o]>r))break;i[e]=i[o],n[e]=n[o],e=o}i[e]=s,n[e]=r},n.prototype.reprioritize=function(){var t,e,n,s=this.priorityFunction_,r=this.elements_,o=this.priorities_,u=0,h=r.length;for(e=0;e<h;++e)(n=s(t=r[e]))==i?delete this.queuedElements_[this.keyFunction_(t)]:(o[u]=n,r[u++]=t);r.length=u,o.length=u,this.heapify_()};var s=n;exports.default=s;
},{"../asserts.js":"fLG6","../obj.js":"mH6q"}],"0tHO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("./TileState.js")),t=require("./events.js"),i=a(require("./events/EventType.js")),n=a(require("./structs/PriorityQueue.js"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(n){function a(e,t){n.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()}),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.enqueue=function(e){var a=n.prototype.enqueue.call(this,e);if(a){var s=e[0];(0,t.listen)(s,i.default.CHANGE,this.handleTileChange,this)}return a},a.prototype.getTilesLoading=function(){return this.tilesLoading_},a.prototype.handleTileChange=function(n){var a=n.target,s=a.getState();if(s===e.default.LOADED||s===e.default.ERROR||s===e.default.EMPTY||s===e.default.ABORT){(0,t.unlisten)(a,i.default.CHANGE,this.handleTileChange,this);var l=a.getKey();l in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[l],--this.tilesLoading_),this.tileChangeCallback_()}},a.prototype.loadMoreTiles=function(t,i){for(var n,a,s,l=0,o=!1;this.tilesLoading_<t&&l<i&&this.getCount()>0;)s=(a=this.dequeue()[0]).getKey(),(n=a.getState())===e.default.ABORT?o=!0:n!==e.default.IDLE||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++l,a.load());0===l&&o&&this.tileChangeCallback_()},a}(n.default),l=s;exports.default=l;
},{"./TileState.js":"Xz9x","./events.js":"55Uq","./events/EventType.js":"C8cu","./structs/PriorityQueue.js":"RQLY"}],"mOEX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"B96G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=t,exports.roundUpToPowerOfTwo=o,exports.squaredSegmentDistance=a,exports.squaredDistance=n,exports.solveLinearSystem=s,exports.toDegrees=u,exports.toRadians=i,exports.modulo=c,exports.lerp=f,exports.cosh=void 0;var r=require("./asserts.js");function t(r,t,e){return Math.min(Math.max(r,t),e)}var e="cosh"in Math?Math.cosh:function(r){var t=Math.exp(r);return(t+1/t)/2};function o(t){return(0,r.assert)(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function a(r,t,e,o,a,s){var u=a-e,i=s-o;if(0!==u||0!==i){var c=((r-e)*u+(t-o)*i)/(u*u+i*i);c>1?(e=a,o=s):c>0&&(e+=u*c,o+=i*c)}return n(r,t,e,o)}function n(r,t,e,o){var a=e-r,n=o-t;return a*a+n*n}function s(r){for(var t=r.length,e=0;e<t;e++){for(var o=e,a=Math.abs(r[e][e]),n=e+1;n<t;n++){var s=Math.abs(r[n][e]);s>a&&(a=s,o=n)}if(0===a)return null;var u=r[o];r[o]=r[e],r[e]=u;for(var i=e+1;i<t;i++)for(var c=-r[i][e]/r[e][e],f=e;f<t+1;f++)e==f?r[i][f]=0:r[i][f]+=c*r[e][f]}for(var h=new Array(t),p=t-1;p>=0;p--){h[p]=r[p][t]/r[p][p];for(var v=p-1;v>=0;v--)r[v][t]-=r[v][p]*h[p]}return h}function u(r){return 180*r/Math.PI}function i(r){return r*Math.PI/180}function c(r,t){var e=r%t;return e*t<0?e+t:e}function f(r,t,e){return r+e*(t-r)}exports.cosh=e;
},{"./asserts.js":"fLG6"}],"Rc7z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=t,exports.none=r;var e=require("./math.js");function t(t){return function(r){return r?[(0,e.clamp)(r[0],t[0],t[2]),(0,e.clamp)(r[1],t[1],t[3])]:void 0}}function r(e){return e}
},{"./math.js":"B96G"}],"o7nl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=t,exports.createSnapToPower=a;var r=require("./array.js"),e=require("./math.js");function t(t){return function(a,o,n){if(void 0!==a){var i=(0,r.linearFindNearest)(t,a,n);i=(0,e.clamp)(i+o,0,t.length-1);var u=Math.floor(i);if(i!=u&&u<t.length-1){var h=t[u]/t[u+1];return t[u]/Math.pow(h,i-u)}return t[u]}}}function a(r,e,t){return function(a,o,n){if(void 0!==a){var i=-n/2+.5,u=Math.floor(Math.log(e/a)/Math.log(r)+i),h=Math.max(u+o,0);return void 0!==t&&(h=Math.min(h,t)),e/Math.pow(r,h)}}}
},{"./array.js":"luEr","./math.js":"B96G"}],"9EKd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=e,exports.none=o,exports.createSnapToN=t,exports.createSnapToZero=n;var r=require("./math.js");function e(r,e){return void 0!==r?0:void 0}function o(r,e){return void 0!==r?r+e:void 0}function t(r){var e=2*Math.PI/r;return function(r,o){return void 0!==r?r=Math.floor((r+o)/e+.5)*e:void 0}}function n(e){var o=e||(0,r.toRadians)(5);return function(r,e){return void 0!==r?Math.abs(r+e)<=o?0:r+e:void 0}}
},{"./math.js":"B96G"}],"cuLW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"0/98":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"AiCK":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=r;
},{}],"nGsj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=e,exports.closestOnCircle=n,exports.closestOnSegment=o,exports.createStringXY=u,exports.degreesToStringHDMS=s,exports.format=a,exports.equals=i,exports.rotate=c,exports.scale=f,exports.squaredDistance=p,exports.distance=x,exports.squaredDistanceToSegment=d,exports.toStringHDMS=l,exports.toStringXY=h;var t=require("./math.js"),r=require("./string.js");function e(t,r){return t[0]+=r[0],t[1]+=r[1],t}function n(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],s=t[0]-o,a=t[1]-u;0===s&&0===a&&(s=1);var i=Math.sqrt(s*s+a*a);return[o+e*s/i,u+e*a/i]}function o(t,r){var e,n,o=t[0],u=t[1],s=r[0],a=r[1],i=s[0],c=s[1],f=a[0],p=a[1],x=f-i,d=p-c,l=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return l<=0?(e=i,n=c):l>=1?(e=f,n=p):(e=i+l*x,n=c+l*d),[e,n]}function u(t){return function(r){return h(r,t)}}function s(e,n,o){var u=(0,t.modulo)(n+180,360)-180,s=Math.abs(3600*u),a=o||0,i=Math.pow(10,a),c=Math.floor(s/3600),f=Math.floor((s-3600*c)/60),p=s-3600*c-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,c+=1),c+"° "+(0,r.padNumber)(f,2)+"′ "+(0,r.padNumber)(p,2,a)+"″"+(0==u?"":" "+e.charAt(u<0?1:0))}function a(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function i(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function c(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function f(t,r){return t[0]*=r,t[1]*=r,t}function p(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function x(t,r){return Math.sqrt(p(t,r))}function d(t,r){return p(t,o(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return a(t,"{x}, {y}",r)}
},{"./math.js":"B96G","./string.js":"AiCK"}],"IeCz":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"urGY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"bUAS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"QDir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=i,exports.closestSquaredDistanceXY=s,exports.containsCoordinate=f,exports.containsExtent=c,exports.containsXY=p,exports.coordinateRelationship=x,exports.createEmpty=l,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=m,exports.createOrUpdateFromCoordinates=g,exports.createOrUpdateFromFlatCoordinates=T,exports.createOrUpdateFromRings=E,exports.equals=M,exports.extend=O,exports.extendCoordinate=v,exports.extendCoordinates=C,exports.extendFlatCoordinates=R,exports.extendRings=F,exports.extendXY=I,exports.forEachCorner=N,exports.getArea=B,exports.getBottomLeft=L,exports.getBottomRight=y,exports.getCenter=U,exports.getCorner=G,exports.getEnlargedArea=_,exports.getForViewAndSize=A,exports.getHeight=S,exports.getIntersectionArea=H,exports.getIntersection=W,exports.getMargin=q,exports.getSize=j,exports.getTopLeft=V,exports.getTopRight=b,exports.getWidth=P,exports.intersects=X,exports.isEmpty=Y,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=w,exports.applyTransform=D;var t=require("./asserts.js"),e=n(require("./extent/Corner.js")),r=n(require("./extent/Relationship.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=l(),r=0,n=t.length;r<n;++r)v(e,t[r]);return e}function u(t,e,r){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}function a(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function i(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function s(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function f(t,e){return p(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function x(t,e){var n=t[0],o=t[1],u=t[2],a=t[3],i=e[0],s=e[1],f=r.default.UNKNOWN;return i<n?f|=r.default.LEFT:i>u&&(f|=r.default.RIGHT),s<o?f|=r.default.BELOW:s>a&&(f|=r.default.ABOVE),f===r.default.UNKNOWN&&(f=r.default.INTERSECTING),f}function l(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function m(t,e){var r=t[0],n=t[1];return d(r,n,r,n,e)}function g(t,e){return C(h(e),t)}function T(t,e,r,n,o){return R(h(o),t,e,r,n)}function E(t,e){return F(h(e),t)}function M(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function v(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function C(t,e){for(var r=0,n=e.length;r<n;++r)v(t,e[r]);return t}function R(t,e,r,n,o){for(;r<n;r+=o)I(t,e[r],e[r+1]);return t}function F(t,e){for(var r=0,n=e.length;r<n;++r)C(t,e[r]);return t}function I(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function N(t,e,r){var n;return(n=e.call(r,L(t)))?n:(n=e.call(r,y(t)))?n:(n=e.call(r,b(t)))?n:(n=e.call(r,V(t)))||!1}function B(t){var e=0;return Y(t)||(e=P(t)*S(t)),e}function L(t){return[t[0],t[1]]}function y(t){return[t[2],t[1]]}function U(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function G(r,n){var o;return n===e.default.BOTTOM_LEFT?o=L(r):n===e.default.BOTTOM_RIGHT?o=y(r):n===e.default.TOP_LEFT?o=V(r):n===e.default.TOP_RIGHT?o=b(r):(0,t.assert)(!1,13),o}function _(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)}function A(t,e,r,n,o){var u=e*n[0]/2,a=e*n[1]/2,i=Math.cos(r),s=Math.sin(r),f=u*i,c=u*s,p=a*i,x=a*s,l=t[0],h=t[1],m=l-f+x,g=l-f-x,T=l+f-x,E=l+f+x,M=h-c-p,O=h-c+p,v=h+c+p,C=h+c-p;return d(Math.min(m,g,T,E),Math.min(M,O,v,C),Math.max(m,g,T,E),Math.max(M,O,v,C),o)}function S(t){return t[3]-t[1]}function H(t,e){return B(W(t,e))}function W(t,e,r){var n=r||l();return X(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):h(n),n}function q(t){return P(t)+S(t)}function j(t){return[t[2]-t[0],t[3]-t[1]]}function V(t){return[t[0],t[3]]}function b(t){return[t[2],t[3]]}function P(t){return t[2]-t[0]}function X(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Y(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function w(t,e,n){var o=!1,u=x(t,e),a=x(t,n);if(u===r.default.INTERSECTING||a===r.default.INTERSECTING)o=!0;else{var i,s,f=t[0],c=t[1],p=t[2],l=t[3],d=e[0],h=e[1],m=n[0],g=n[1],T=(g-h)/(m-d);a&r.default.ABOVE&&!(u&r.default.ABOVE)&&(o=(i=m-(g-l)/T)>=f&&i<=p),o||!(a&r.default.RIGHT)||u&r.default.RIGHT||(o=(s=g-(m-p)*T)>=c&&s<=l),o||!(a&r.default.BELOW)||u&r.default.BELOW||(o=(i=m-(g-c)/T)>=f&&i<=p),o||!(a&r.default.LEFT)||u&r.default.LEFT||(o=(s=g-(m-f)*T)>=c&&s<=l)}return o}function D(t,e,r){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),u([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],r)}
},{"./asserts.js":"fLG6","./extent/Corner.js":"urGY","./extent/Relationship.js":"bUAS"}],"lmV0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"1Utv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"LGwr":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){for(var f=a||[],s=0,l=t;l<e;l+=n){var u=r[l],v=r[l+1];f[s++]=o[0]*u+o[2]*v+o[4],f[s++]=o[1]*u+o[3]*v+o[5]}return a&&f.length!=s&&(f.length=s),f}function t(r,t,e,n,o,a,f){for(var s=f||[],l=Math.cos(o),u=Math.sin(o),v=a[0],h=a[1],c=0,g=t;g<e;g+=n){var i=r[g]-v,p=r[g+1]-h;s[c++]=v+i*l-p*u,s[c++]=h+i*u+p*l;for(var x=g+2;x<g+n;++x)s[c++]=r[x]}return f&&s.length!=c&&(s.length=c),s}function e(r,t,e,n,o,a,f,s){for(var l=s||[],u=f[0],v=f[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;l[h++]=u+o*g,l[h++]=v+a*i;for(var p=c+2;p<c+n;++p)l[h++]=r[p]}return s&&l.length!=h&&(l.length=h),l}function n(r,t,e,n,o,a,f){for(var s=f||[],l=0,u=t;u<e;u+=n){s[l++]=r[u]+o,s[l++]=r[u+1]+a;for(var v=u+2;v<u+n;++v)s[l++]=r[v]}return f&&s.length!=l&&(s.length=l),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=r,exports.rotate=t,exports.scale=e,exports.translate=n;
},{}],"q4ER":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=s,exports.getLength=n,exports.getArea=u,exports.offset=h,exports.DEFAULT_RADIUS=void 0;var e=require("./math.js"),t=a(require("./geom/GeometryType.js"));function a(e){return e&&e.__esModule?e:{default:e}}var r=6371008.8;function s(t,a,s){var o=s||r,n=(0,e.toRadians)(t[1]),i=(0,e.toRadians)(a[1]),u=(i-n)/2,h=(0,e.toRadians)(a[0]-t[0])/2,f=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(i);return 2*o*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function o(e,t){for(var a=0,r=0,o=e.length;r<o-1;++r)a+=s(e[r],e[r+1],t);return a}function n(e,a){var s=a||{},i=s.radius||r,u=s.projection||"EPSG:3857",h=e.getType();h!==t.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(u,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case t.default.POINT:case t.default.MULTI_POINT:break;case t.default.LINE_STRING:case t.default.LINEAR_RING:I=o(f=e.getCoordinates(),i);break;case t.default.MULTI_LINE_STRING:case t.default.POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)I+=o(f[M],i);break;case t.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(l=0,g=(d=f[M]).length;l<g;++l)I+=o(d[l],i);break;case t.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=n(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function i(t,a){for(var r=0,s=t.length,o=t[s-1][0],n=t[s-1][1],i=0;i<s;i++){var u=t[i][0],h=t[i][1];r+=(0,e.toRadians)(u-o)*(2+Math.sin((0,e.toRadians)(n))+Math.sin((0,e.toRadians)(h))),o=u,n=h}return r*a*a/2}function u(e,a){var s=a||{},o=s.radius||r,n=s.projection||"EPSG:3857",h=e.getType();h!==t.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(n,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case t.default.POINT:case t.default.MULTI_POINT:case t.default.LINE_STRING:case t.default.MULTI_LINE_STRING:case t.default.LINEAR_RING:break;case t.default.POLYGON:for(f=e.getCoordinates(),I=Math.abs(i(f[0],o)),M=1,c=f.length;M<c;++M)I-=Math.abs(i(f[M],o));break;case t.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(d=f[M],I+=Math.abs(i(d[0],o)),l=1,g=d.length;l<g;++l)I-=Math.abs(i(d[l],o));break;case t.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=u(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function h(t,a,s,o){var n=o||r,i=(0,e.toRadians)(t[1]),u=(0,e.toRadians)(t[0]),h=a/n,f=Math.asin(Math.sin(i)*Math.cos(h)+Math.cos(i)*Math.sin(h)*Math.cos(s)),d=u+Math.atan2(Math.sin(s)*Math.sin(h)*Math.cos(i),Math.cos(h)-Math.sin(i)*Math.sin(f));return[(0,e.toDegrees)(d),(0,e.toDegrees)(f)]}exports.DEFAULT_RADIUS=r;
},{"./math.js":"B96G","./geom/GeometryType.js":"lmV0"}],"yZx6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;var E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"WUar":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js"),n=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var i=n;exports.default=i;
},{"./Units.js":"yZx6"}],"lohs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=E,exports.toEPSG4326=c,exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var e=require("../math.js"),t=o(require("./Projection.js")),r=o(require("./Units.js"));function o(e){return e&&e.__esModule?e:{default:e}}var n=6378137;exports.RADIUS=n;var s=Math.PI*n;exports.HALF_SIZE=s;var a=[-s,-s,s,s];exports.EXTENT=a;var u=[-180,-85,180,85];exports.WORLD_EXTENT=u;var p=function(t){function o(o){t.call(this,{code:o,units:r.default.METERS,extent:a,global:!0,worldExtent:u,getPointResolution:function(t,r){return t/(0,e.cosh)(r[1]/n)}})}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o}(t.default),i=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("urn:ogc:def:crs:EPSG:6.18:3:3857"),new p("urn:ogc:def:crs:EPSG::3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function E(e,t,r){var o=e.length,a=r>1?r:2,u=t;void 0===u&&(u=a>2?e.slice():new Array(o));for(var p=s,i=0;i<o;i+=a){u[i]=p*e[i]/180;var E=n*Math.log(Math.tan(Math.PI*(e[i+1]+90)/360));E>p?E=p:E<-p&&(E=-p),u[i+1]=E}return u}function c(e,t,r){var o=e.length,a=r>1?r:2,u=t;void 0===u&&(u=a>2?e.slice():new Array(o));for(var p=0;p<o;p+=a)u[p]=180*e[p]/s,u[p+1]=360*Math.atan(Math.exp(e[p+1]/n))/Math.PI-90;return u}exports.PROJECTIONS=i;
},{"../math.js":"B96G","./Projection.js":"WUar","./Units.js":"yZx6"}],"ZniN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=t(require("./Projection.js")),r=t(require("./Units.js"));function t(e){return e&&e.__esModule?e:{default:e}}var n=6378137;exports.RADIUS=n;var o=[-180,-90,180,90];exports.EXTENT=o;var s=Math.PI*n/180;exports.METERS_PER_UNIT=s;var u=function(e){function t(t,n){e.call(this,{code:t,units:r.default.DEGREES,extent:o,axisOrientation:n,global:!0,metersPerUnit:s,worldExtent:o})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(e.default),c=[new u("CRS:84"),new u("EPSG:4326","neu"),new u("urn:ogc:def:crs:EPSG::4326","neu"),new u("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new u("urn:ogc:def:crs:OGC:1.3:CRS84"),new u("urn:ogc:def:crs:OGC:2:84"),new u("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new u("urn:x-ogc:def:crs:EPSG:4326","neu")];exports.PROJECTIONS=c;
},{"./Projection.js":"WUar","./Units.js":"yZx6"}],"3tlE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;var e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"uhlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.add=o,exports.remove=n,exports.get=i;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"mH6q"}],"Diht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=p,exports.identityTransform=l,exports.addProjection=E,exports.addProjections=P,exports.get=j,exports.getPointResolution=v,exports.addEquivalentProjections=g,exports.addEquivalentTransforms=x,exports.clearAllProjections=m,exports.createProjection=O,exports.createTransformFromCoordinateTransform=T,exports.addCoordinateTransforms=S,exports.fromLonLat=y,exports.toLonLat=h,exports.equivalent=R,exports.getTransformFromProjections=q,exports.getTransform=C,exports.transform=_,exports.transformExtent=b,exports.transformWithProjections=G,exports.addCommon=M,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return u.METERS_PER_UNIT}});var e=require("./sphere.js"),r=require("./extent.js"),t=require("./math.js"),n=require("./proj/epsg3857.js"),o=require("./proj/epsg4326.js"),i=d(require("./proj/Projection.js")),u=c(require("./proj/Units.js")),s=c(require("./proj/projections.js")),a=require("./proj/transforms.js");function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){if(e&&e.__esModule)return e;var r=f();if(r&&r.has(e))return r.get(e);var t={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(t,o,i):t[o]=e[o]}}return t.default=e,r&&r.set(e,t),t}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,r,t){var n;if(void 0!==r){for(var o=0,i=e.length;o<i;++o)r[o]=e[o];n=r}else n=e.slice();return n}function l(e,r,t){if(void 0!==r&&e!==r){for(var n=0,o=e.length;n<o;++n)r[n]=e[n];e=r}return e}function E(e){s.add(e.getCode(),e),(0,a.add)(e,e,p)}function P(e){e.forEach(E)}function j(e){return"string"==typeof e?s.get(e):e||null}function v(r,t,n,o){var i,s=(r=j(r)).getPointResolutionFunc();if(s)i=s(t,n);else if(r.getUnits()==u.default.DEGREES&&!o||o==u.default.DEGREES)i=t;else{var a=q(r,j("EPSG:4326")),f=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];f=a(f,f,2),i=((0,e.getDistance)(f.slice(0,2),f.slice(2,4))+(0,e.getDistance)(f.slice(4,6),f.slice(6,8)))/2;var c=o?u.METERS_PER_UNIT[o]:r.getMetersPerUnit();void 0!==c&&(i/=c)}return i}function g(e){P(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,a.add)(r,e,p)})})}function x(e,r,t,n){e.forEach(function(e){r.forEach(function(r){(0,a.add)(e,r,t),(0,a.add)(r,e,n)})})}function m(){s.clear(),(0,a.clear)()}function O(e,r){return e?"string"==typeof e?j(e):e:j(r)}function T(e){return function(r,t,n){for(var o=r.length,i=void 0!==n?n:2,u=void 0!==t?t:new Array(o),s=0;s<o;s+=i){var a=e([r[s],r[s+1]]);u[s]=a[0],u[s+1]=a[1];for(var f=i-1;f>=2;--f)u[s+f]=r[s+f]}return u}}function S(e,r,t,n){var o=j(e),i=j(r);(0,a.add)(o,i,T(t)),(0,a.add)(i,o,T(n))}function y(e,r){return _(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function h(e,r){var n=_(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),o=n[0];return(o<-180||o>180)&&(n[0]=(0,t.modulo)(o+180,360)-180),n}function R(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:q(e,r)===p&&t}function q(e,r){var t=e.getCode(),n=r.getCode(),o=(0,a.get)(t,n);return o||(o=l),o}function C(e,r){return q(j(e),j(r))}function _(e,r,t){return C(r,t)(e,void 0,e.length)}function b(e,t,n){var o=C(t,n);return(0,r.applyTransform)(e,o)}function G(e,r,t){return q(r,t)(e)}function M(){g(n.PROJECTIONS),g(o.PROJECTIONS),x(o.PROJECTIONS,n.PROJECTIONS,n.fromEPSG4326,n.toEPSG4326)}M();
},{"./sphere.js":"q4ER","./extent.js":"QDir","./math.js":"B96G","./proj/epsg3857.js":"lohs","./proj/epsg4326.js":"ZniN","./proj/Projection.js":"WUar","./proj/Units.js":"yZx6","./proj/projections.js":"3tlE","./proj/transforms.js":"uhlP"}],"P4eA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.reset=n,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=a,exports.rotate=i,exports.scale=c,exports.translate=p,exports.compose=f,exports.invert=x,exports.determinant=v;var r=require("./asserts.js"),t=new Array(6);function e(){return[1,0,0,1,0,0]}function n(r){return s(r,1,0,0,1,0,0)}function o(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],f=t[3],x=t[4],v=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*f,r[3]=n*p+s*f,r[4]=e*x+o*v+u,r[5]=n*x+s*v+a,r}function s(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function u(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function a(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function i(r,e){var n=Math.cos(e),u=Math.sin(e);return o(r,s(t,n,u,-u,n,0,0))}function c(r,e,n){return o(r,s(t,e,0,0,n,0,0))}function p(r,e,n){return o(r,s(t,1,0,0,1,e,n))}function f(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function x(t){var e=v(t);(0,r.assert)(0!==e,32);var n=t[0],o=t[1],s=t[2],u=t[3],a=t[4],i=t[5];return t[0]=u/e,t[1]=-o/e,t[2]=-s/e,t[3]=n/e,t[4]=(s*i-u*a)/e,t[5]=-(n*i-o*a)/e,t}function v(r){return r[0]*r[3]-r[1]*r[2]}
},{"./asserts.js":"fLG6"}],"F8sI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=p(require("../Object.js")),r=require("../extent.js"),o=require("./flat/transform.js"),n=require("../proj.js"),i=p(require("../proj/Units.js")),s=require("../transform.js");function p(t){return t&&t.__esModule?t:{default:t}}var a=(0,s.create)(),u=function(e){function p(){e.call(this),this.extent_=(0,r.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return e&&(p.__proto__=e),p.prototype=Object.create(e&&e.prototype),p.prototype.constructor=p,p.prototype.clone=function(){return(0,t.abstract)()},p.prototype.closestPointXY=function(e,r,o,n){return(0,t.abstract)()},p.prototype.containsXY=function(t,e){return!1},p.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},p.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},p.prototype.computeExtent=function(e){return(0,t.abstract)()},p.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,r.returnOrUpdate)(this.extent_,t)},p.prototype.rotate=function(e,r){(0,t.abstract)()},p.prototype.scale=function(e,r,o){(0,t.abstract)()},p.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},p.prototype.getSimplifiedGeometry=function(e){return(0,t.abstract)()},p.prototype.getType=function(){return(0,t.abstract)()},p.prototype.applyTransform=function(e){(0,t.abstract)()},p.prototype.intersectsExtent=function(e){return(0,t.abstract)()},p.prototype.translate=function(e,r){(0,t.abstract)()},p.prototype.transform=function(t,e){var p=(0,n.get)(t),u=p.getUnits()==i.default.TILE_PIXELS?function(t,i,u){var c=p.getExtent(),f=p.getWorldExtent(),y=(0,r.getHeight)(f)/(0,r.getHeight)(c);return(0,s.compose)(a,f[0],f[3],y,-y,0,0,0),(0,o.transform2D)(t,0,t.length,u,a,i),(0,n.getTransform)(p,e)(t,i,u)}:(0,n.getTransform)(p,e);return this.applyTransform(u),this},p}(e.default),c=u;exports.default=c;
},{"../util.js":"KniQ","../Object.js":"PhPh","../extent.js":"QDir","./flat/transform.js":"LGwr","../proj.js":"Diht","../proj/Units.js":"yZx6","../transform.js":"P4eA"}],"pnrv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=u,exports.transformGeom2D=d,exports.default=void 0;var t=require("../util.js"),e=require("../extent.js"),i=a(require("./Geometry.js")),r=a(require("./GeometryLayout.js")),o=require("./flat/transform.js"),s=require("../obj.js");function a(t){return t&&t.__esModule?t:{default:t}}var n=function(i){function a(){i.call(this),this.layout=r.default.XY,this.stride=2,this.flatCoordinates=null}return i&&(a.__proto__=i),a.prototype=Object.create(i&&i.prototype),a.prototype.constructor=a,a.prototype.computeExtent=function(t){return(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},a.prototype.getCoordinates=function(){return(0,t.abstract)()},a.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},a.prototype.getFlatCoordinates=function(){return this.flatCoordinates},a.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},a.prototype.getLayout=function(){return this.layout},a.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,s.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},a.prototype.getSimplifiedGeometryInternal=function(t){return this},a.prototype.getStride=function(){return this.stride},a.prototype.setFlatCoordinates=function(t,e){this.stride=u(t),this.layout=t,this.flatCoordinates=e},a.prototype.setCoordinates=function(e,i){(0,t.abstract)()},a.prototype.setLayout=function(t,e,i){var o;if(t)o=u(t);else{for(var s=0;s<i;++s){if(0===e.length)return this.layout=r.default.XY,void(this.stride=2);e=e[0]}t=l(o=e.length)}this.layout=t,this.stride=o},a.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},a.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();(0,o.rotate)(i,0,i.length,r,t,e,i),this.changed()}},a.prototype.scale=function(t,i,r){var s=i;void 0===s&&(s=t);var a=r;a||(a=(0,e.getCenter)(this.getExtent()));var n=this.getFlatCoordinates();if(n){var l=this.getStride();(0,o.scale)(n,0,n.length,l,t,s,a,n),this.changed()}},a.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();(0,o.translate)(i,0,i.length,r,t,e,i),this.changed()}},a}(i.default);function l(t){var e;return 2==t?e=r.default.XY:3==t?e=r.default.XYZ:4==t&&(e=r.default.XYZM),e}function u(t){var e;return t==r.default.XY?e=2:t==r.default.XYZ||t==r.default.XYM?e=3:t==r.default.XYZM&&(e=4),e}function d(t,e,i){var r=t.getFlatCoordinates();if(r){var s=t.getStride();return(0,o.transform2D)(r,0,r.length,s,e,i)}return null}var f=n;exports.default=f;
},{"../util.js":"KniQ","../extent.js":"QDir","./Geometry.js":"F8sI","./GeometryLayout.js":"1Utv","./flat/transform.js":"LGwr","../obj.js":"mH6q"}],"EOSm":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"rMra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=t,exports.arrayMaxSquaredDelta=a,exports.multiArrayMaxSquaredDelta=n,exports.assignClosestPoint=s,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(var N=0;N<n;++N)i[N]=e[u+N];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}for(var N=h||[NaN,NaN],x=a+s;x<n;)if(e(t,x-s,x,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s,x+=s}else x+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=s(r,e,N,a,n,o,i,u,f,l,h),e=N}return l}function i(r,e,t,a,n,s,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=o(r,e,N,a,n,s,i,u,f,l,h),e=N[N.length-1]}return l}
},{"../../math.js":"B96G"}],"1FNh":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var f=t[o],l=0;l<n;++l)e[r++]=f[l];return r}function t(e,t,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=r(e,t,n[u],o);f[l++]=s,t=s}return f.length=l,f}function n(e,r,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=t(e,r,n[u],o,f[l]);f[l++]=s,r=s[s.length-1]}return f.length=l,f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"znXl":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){for(var i=void 0!==o?o:[],a=0,l=r;l<t;l+=n)i[a++]=e.slice(l,l+n);return i.length=a,i}function r(r,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=e(r,t,u,o,a[l]),t=u}return a.length=l,a}function t(e,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=r(e,t,u,o,a[l]),t=u[u.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"IEpt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.radialDistance=a,exports.snap=o,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f;var r=require("../../math.js");function e(r,e,n,u,o,i,s){var f=void 0!==s?s:[];return i||(n=a(r,e,n,u,o,f,0),r=f,e=0,u=2),f.length=t(r,e,n,u,o,f,0),f}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(var k=0;k<s;++k)f[k]&&(o[i++]=e[t+k*u],o[i++]=e[t+k*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"B96G"}],"jRgU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=u(require("./GeometryLayout.js")),i=u(require("./GeometryType.js")),o=u(require("./SimpleGeometry.js")),s=require("./flat/area.js"),r=require("./flat/closest.js"),a=require("./flat/deflate.js"),n=require("./flat/inflate.js"),l=require("./flat/simplify.js");function u(t){return t&&t.__esModule?t:{default:t}}var d=function(o){function u(t,e){o.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}return o&&(u.__proto__=o),u.prototype=Object.create(o&&o.prototype),u.prototype.constructor=u,u.prototype.clone=function(){return new u(this.flatCoordinates.slice(),this.layout)},u.prototype.closestPointXY=function(e,i,o,s){return s<(0,t.closestSquaredDistanceXY)(this.getExtent(),e,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,i,o,s))},u.prototype.getArea=function(){return(0,s.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getCoordinates=function(){return(0,n.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},u.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new u(i,e.default.XY)},u.prototype.getType=function(){return i.default.LINEAR_RING},u.prototype.intersectsExtent=function(t){return!1},u.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},u}(o.default),h=d;exports.default=h;
},{"../extent.js":"QDir","./GeometryLayout.js":"1Utv","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/area.js":"EOSm","./flat/closest.js":"rMra","./flat/deflate.js":"1FNh","./flat/inflate.js":"znXl","./flat/simplify.js":"IEpt"}],"gLcY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=n(require("./GeometryType.js")),o=n(require("./SimpleGeometry.js")),r=require("./flat/deflate.js"),i=require("../math.js");function n(t){return t&&t.__esModule?t:{default:t}}var s=function(o){function n(t,e){o.call(this),this.setCoordinates(t,e)}return o&&(n.__proto__=o),n.prototype=Object.create(o&&o.prototype),n.prototype.constructor=n,n.prototype.clone=function(){return new n(this.flatCoordinates.slice(),this.layout)},n.prototype.closestPointXY=function(t,e,o,r){var n=this.flatCoordinates,s=(0,i.squaredDistance)(t,e,n[0],n[1]);if(s<r){for(var a=this.stride,u=0;u<a;++u)o[u]=n[u];return o.length=a,s}return r},n.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},n.prototype.computeExtent=function(e){return(0,t.createOrUpdateFromCoordinate)(this.flatCoordinates,e)},n.prototype.getType=function(){return e.default.POINT},n.prototype.intersectsExtent=function(e){return(0,t.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])},n.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,r.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},n}(o.default),a=s;exports.default=a;
},{"../extent.js":"QDir","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/deflate.js":"1FNh","../math.js":"B96G"}],"dzdN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"QDir"}],"UDvN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("../../array.js"),e=require("./contains.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(r.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,e.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"../../array.js":"luEr","./contains.js":"dzdN"}],"2U8i":[function(require,module,exports) {
"use strict";function e(e,r,t,o,u,c){for(var f,n=[e[r],e[r+1]],s=[];r+o<t;r+=o){if(s[0]=e[r+o],s[1]=e[r+o+1],f=u.call(c,n,s))return f;n[0]=s[0],n[1]=s[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"GZir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./contains.js"),r=require("./segments.js");function t(e,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),e,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,r.forEach)(e,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,r,i,s,a){return!!t(n,r,i,s,a)||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[1])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[3])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[1])||!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[3]))))}function a(n,r,i,a,o){if(!s(n,r,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,e.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"QDir","./contains.js":"dzdN","./segments.js":"2U8i"}],"ElTe":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"2/8c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=e,exports.linearRingIsOriented=n,exports.linearRingsAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var a=r[e],u=r[e+1];i+=(a-o)*(u+s),o=a,s=u}return i>0}function n(r,n,t,i,o){for(var s=void 0!==o&&o,a=0,u=t.length;a<u;++a){var f=t[a],v=e(r,n,f,i);if(0===a){if(s&&v||!s&&!v)return!1}else if(s&&!v||!s&&v)return!1;n=f}return!0}function t(r,e,t,i,o){for(var s=0,a=t.length;s<a;++s)if(!n(r,e,t[s],i,o))return!1;return!0}function i(n,t,i,o,s){for(var a=void 0!==s&&s,u=0,f=i.length;u<f;++u){var v=i[u],l=e(n,t,v,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&(0,r.coordinates)(n,t,v,o),t=v}return t}function o(r,e,n,t,o){for(var s=0,a=n.length;s<a;++s)e=i(r,e,n[s],t,o);return e}
},{"./reverse.js":"ElTe"}],"6Nww":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=q,exports.fromExtent=x,exports.fromCircle=j,exports.makeRegular=m,exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=C(require("./GeometryLayout.js")),r=C(require("./GeometryType.js")),n=C(require("./LinearRing.js")),s=C(require("./Point.js")),o=C(require("./SimpleGeometry.js")),a=require("../sphere.js"),l=require("./flat/area.js"),d=require("./flat/closest.js"),h=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),p=require("./flat/intersectsextent.js"),c=require("./flat/orient.js"),_=require("./flat/simplify.js"),y=require("../math.js");function C(t){return t&&t.__esModule?t:{default:t}}var v=function(o){function a(t,e,i){o.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}return o&&(a.__proto__=o),a.prototype=Object.create(o&&o.prototype),a.prototype.constructor=a,a.prototype.appendLinearRing=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},a.prototype.clone=function(){return new a(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},a.prototype.closestPointXY=function(t,i,r,n){return n<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,d.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,d.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,r,n))},a.prototype.containsXY=function(t,e){return(0,h.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},a.prototype.getArea=function(){return(0,l.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},a.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,c.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateCoordinatesArray)(e,0,this.ends_,this.stride)},a.prototype.getEnds=function(){return this.ends_},a.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,g.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},a.prototype.getInteriorPoint=function(){return new s.default(this.getFlatInteriorPoint(),i.default.XYM)},a.prototype.getLinearRingCount=function(){return this.ends_.length},a.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new n.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},a.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],s=0,o=0,a=i.length;o<a;++o){var l=i[o],d=new n.default(e.slice(s,l),t);r.push(d),s=l}return r},a.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,c.linearRingIsOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,c.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},a.prototype.getSimplifiedGeometryInternal=function(t){var e=[],r=[];return e.length=(0,_.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,r),new a(e,i.default.XY,r)},a.prototype.getType=function(){return r.default.POLYGON},a.prototype.intersectsExtent=function(t){return(0,p.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},a.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,u.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},a}(o.default),R=v;function q(e,r,n,s){for(var o=n||32,l=[],d=0;d<o;++d)(0,t.extend)(l,(0,a.offset)(e,r,2*Math.PI*d/o,s));return l.push(l[0],l[1]),new v(l,i.default.XY,[l.length])}function x(t){var e=t[0],r=t[1],n=t[2],s=t[3],o=[e,r,e,s,n,s,n,r,e,r];return new v(o,i.default.XY,[o.length])}function j(t,e,i){for(var r=e||32,n=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=n*(r+1),l=new Array(a),d=0;d<a;d+=n){l[d]=0,l[d+1]=0;for(var h=2;h<n;h++)l[d+h]=o[h]}var u=[l.length],f=new v(l,s,u);return m(f,o,t.getRadius(),i),f}function m(t,e,i,r){for(var n=t.getFlatCoordinates(),s=t.getStride(),o=n.length/s-1,a=r||0,l=0;l<=o;++l){var d=l*s,h=a+2*(0,y.modulo)(l,o)*Math.PI/o;n[d]=e[0]+i*Math.cos(h),n[d+1]=e[1]+i*Math.sin(h)}t.changed()}exports.default=R;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"1Utv","./GeometryType.js":"lmV0","./LinearRing.js":"jRgU","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","../sphere.js":"q4ER","./flat/area.js":"EOSm","./flat/closest.js":"rMra","./flat/contains.js":"dzdN","./flat/deflate.js":"1FNh","./flat/inflate.js":"znXl","./flat/interiorpoint.js":"UDvN","./flat/intersectsextent.js":"GZir","./flat/orient.js":"2/8c","./flat/simplify.js":"IEpt","../math.js":"B96G"}],"hNqE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=A,exports.createResolutionConstraint=E,exports.createRotationConstraint=T,exports.isNoopAnimation=I,exports.default=void 0;var t=require("./tilegrid/common.js"),o=require("./util.js"),e=require("./functions.js"),i=require("./centerconstraint.js"),n=y(require("./Object.js")),r=require("./resolutionconstraint.js"),s=require("./rotationconstraint.js"),a=y(require("./ViewHint.js")),u=y(require("./ViewProperty.js")),h=require("./array.js"),l=require("./asserts.js"),c=require("./coordinate.js"),p=require("./easing.js"),m=require("./extent.js"),g=y(require("./geom/GeometryType.js")),d=require("./geom/Polygon.js"),R=require("./math.js"),f=require("./obj.js"),v=require("./proj.js"),_=y(require("./proj/Units.js"));function y(t){return t&&t.__esModule?t:{default:t}}var M=0,C=function(t){function i(o){t.call(this);var e=(0,f.assign)({},o);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=(0,v.createProjection)(e.projection,"EPSG:3857"),this.applyOptions_(e)}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.applyOptions_=function(t){var o={};o[u.default.CENTER]=void 0!==t.center?t.center:null;var e=E(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var i=A(t),n=e.constraint,r=T(t);this.constraints_={center:i,resolution:n,rotation:r},void 0!==t.resolution?o[u.default.RESOLUTION]=t.resolution:void 0!==t.zoom&&(o[u.default.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(o[u.default.RESOLUTION]=(0,R.clamp)(Number(this.getResolution()||o[u.default.RESOLUTION]),this.minResolution_,this.maxResolution_))),o[u.default.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(o),this.options_=t},i.prototype.getUpdatedOptions_=function(t){var o=(0,f.assign)({},this.options_);return void 0!==o.resolution?o.resolution=this.getResolution():o.zoom=this.getZoom(),o.center=this.getCenter(),o.rotation=this.getRotation(),(0,f.assign)({},o,t)},i.prototype.animate=function(t){var o,e=arguments,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(o=arguments[i-1],--i),!this.isDef()){var n=arguments[i-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(o&&x(o,!0))}for(var r=Date.now(),s=this.getCenter().slice(),u=this.getResolution(),h=this.getRotation(),l=[],c=0;c<i;++c){var m=e[c],g={start:r,complete:!1,anchor:m.anchor,duration:void 0!==m.duration?m.duration:1e3,easing:m.easing||p.inAndOut};if(m.center&&(g.sourceCenter=s,g.targetCenter=m.center,s=g.targetCenter),void 0!==m.zoom?(g.sourceResolution=u,g.targetResolution=this.constrainResolution(this.maxResolution_,m.zoom-this.minZoom_,0),u=g.targetResolution):m.resolution&&(g.sourceResolution=u,g.targetResolution=m.resolution,u=g.targetResolution),void 0!==m.rotation){g.sourceRotation=h;var d=(0,R.modulo)(m.rotation-h+Math.PI,2*Math.PI)-Math.PI;g.targetRotation=h+d,h=g.targetRotation}g.callback=o,I(g)?g.complete=!0:r+=g.duration,l.push(g)}this.animations_.push(l),this.setHint(a.default.ANIMATING,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return this.hints_[a.default.ANIMATING]>0},i.prototype.getInteracting=function(){return this.hints_[a.default.INTERACTING]>0},i.prototype.cancelAnimations=function(){this.setHint(a.default.ANIMATING,-this.hints_[a.default.ANIMATING]);for(var t=0,o=this.animations_.length;t<o;++t){var e=this.animations_[t];e[0].callback&&x(e[0].callback,!1)}this.animations_.length=0},i.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),o=!1,e=this.animations_.length-1;e>=0;--e){for(var i=this.animations_[e],n=!0,r=0,s=i.length;r<s;++r){var h=i[r];if(!h.complete){var l=t-h.start,c=h.duration>0?l/h.duration:1;c>=1?(h.complete=!0,c=1):n=!1;var p=h.easing(c);if(h.sourceCenter){var m=h.sourceCenter[0],g=h.sourceCenter[1],d=m+p*(h.targetCenter[0]-m),f=g+p*(h.targetCenter[1]-g);this.set(u.default.CENTER,[d,f])}if(h.sourceResolution&&h.targetResolution){var v=1===p?h.targetResolution:h.sourceResolution+p*(h.targetResolution-h.sourceResolution);h.anchor&&this.set(u.default.CENTER,this.calculateCenterZoom(v,h.anchor)),this.set(u.default.RESOLUTION,v)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var _=1===p?(0,R.modulo)(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+p*(h.targetRotation-h.sourceRotation);h.anchor&&this.set(u.default.CENTER,this.calculateCenterRotate(_,h.anchor)),this.set(u.default.ROTATION,_)}if(o=!0,!h.complete)break}}if(n){this.animations_[e]=null,this.setHint(a.default.ANIMATING,-1);var y=i[0].callback;y&&x(y,!0)}}this.animations_=this.animations_.filter(Boolean),o&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},i.prototype.calculateCenterRotate=function(t,o){var e,i=this.getCenter();return void 0!==i&&(e=[i[0]-o[0],i[1]-o[1]],(0,c.rotate)(e,t-this.getRotation()),(0,c.add)(e,o)),e},i.prototype.calculateCenterZoom=function(t,o){var e,i=this.getCenter(),n=this.getResolution();void 0!==i&&void 0!==n&&(e=[o[0]-t*(o[0]-i[0])/n,o[1]-t*(o[1]-i[1])/n]);return e},i.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+(0,o.getUid)(this)+'"]',i=document.querySelector(e);if(i){var n=getComputedStyle(i);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},i.prototype.constrainCenter=function(t){return this.constraints_.center(t)},i.prototype.constrainResolution=function(t,o,e){var i=o||0,n=e||0;return this.constraints_.resolution(t,i,n)},i.prototype.constrainRotation=function(t,o){var e=o||0;return this.constraints_.rotation(t,e)},i.prototype.getCenter=function(){return this.get(u.default.CENTER)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var o=t||this.getSizeFromViewport_(),e=this.getCenter();(0,l.assert)(e,1);var i=this.getResolution();(0,l.assert)(void 0!==i,2);var n=this.getRotation();return(0,l.assert)(void 0!==n,3),(0,m.getForViewAndSize)(e,i,n,o)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(u.default.RESOLUTION)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,o){var e=o||this.getSizeFromViewport_(),i=(0,m.getWidth)(t)/e[0],n=(0,m.getHeight)(t)/e[1];return Math.max(i,n)},i.prototype.getResolutionForValueFunction=function(t){var o=t||2,e=this.maxResolution_,i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return e/Math.pow(o,t*n)}},i.prototype.getRotation=function(){return this.get(u.default.ROTATION)},i.prototype.getValueForResolutionFunction=function(t){var o=t||2,e=this.maxResolution_,i=this.minResolution_,n=Math.log(e/i)/Math.log(o);return function(t){return Math.log(e/t)/Math.log(o)/n}},i.prototype.getState=function(t){var o=this.getCenter(),e=this.getProjection(),i=this.getResolution(),n=i/t,r=this.getRotation();return{center:[Math.round(o[0]/n)*n,Math.round(o[1]/n)*n],projection:void 0!==e?e:null,resolution:i,rotation:r,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,o=this.getResolution();return void 0!==o&&(t=this.getZoomForResolution(o)),t},i.prototype.getZoomForResolution=function(t){var o,e,i=this.minZoom_||0;if(this.resolutions_){var n=(0,h.linearFindNearest)(this.resolutions_,t,1);i=n,o=this.resolutions_[n],e=n==this.resolutions_.length-1?2:o/this.resolutions_[n+1]}else o=this.maxResolution_,e=this.zoomFactor_;return i+Math.log(o/t)/Math.log(e)},i.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},i.prototype.fit=function(t,o){var i,n=o||{},r=n.size;r||(r=this.getSizeFromViewport_()),(0,l.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?((0,l.assert)(!(0,m.isEmpty)(t),25),i=(0,d.fromExtent)(t)):t.getType()===g.default.CIRCLE?(t=t.getExtent(),(i=(0,d.fromExtent)(t)).rotate(this.getRotation(),(0,m.getCenter)(t))):i=t;var s,a=void 0!==n.padding?n.padding:[0,0,0,0],u=void 0===n.constrainResolution||n.constrainResolution,h=void 0!==n.nearest&&n.nearest;s=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.constrainResolution(this.maxResolution_,n.maxZoom-this.minZoom_,0):0;for(var c=i.getFlatCoordinates(),p=this.getRotation(),R=Math.cos(-p),f=Math.sin(-p),v=1/0,_=1/0,y=-1/0,M=-1/0,C=i.getStride(),A=0,E=c.length;A<E;A+=C){var T=c[A]*R-c[A+1]*f,I=c[A]*f+c[A+1]*R;v=Math.min(v,T),_=Math.min(_,I),y=Math.max(y,T),M=Math.max(M,I)}var N=this.getResolutionForExtent([v,_,y,M],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);if(N=isNaN(N)?s:Math.max(N,s),u){var Z=this.constrainResolution(N,0,0);!h&&Z<N&&(Z=this.constrainResolution(Z,-1,0)),N=Z}f=-f;var j=(v+y)/2,O=(_+M)/2,F=[(j+=(a[1]-a[3])/2*N)*R-(O+=(a[0]-a[2])/2*N)*f,O*R+j*f],S=n.callback?n.callback:e.VOID;void 0!==n.duration?this.animate({resolution:N,center:F,duration:n.duration,easing:n.easing},S):(this.setResolution(N),this.setCenter(F),x(S,!0))},i.prototype.centerOn=function(t,o,e){var i=this.getRotation(),n=Math.cos(-i),r=Math.sin(-i),s=t[0]*n-t[1]*r,a=t[1]*n+t[0]*r,u=this.getResolution(),h=(s+=(o[0]/2-e[0])*u)*n-(a+=(e[1]-o[1]/2)*u)*(r=-r),l=a*n+s*r;this.setCenter([h,l])},i.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},i.prototype.rotate=function(t,o){if(void 0!==o){var e=this.calculateCenterRotate(t,o);this.setCenter(e)}this.setRotation(t)},i.prototype.setCenter=function(t){this.set(u.default.CENTER,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setHint=function(t,o){return this.hints_[t]+=o,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.set(u.default.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setRotation=function(t){this.set(u.default.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i}(n.default);function x(t,o){setTimeout(function(){t(o)},0)}function A(t){return void 0!==t.extent?(0,i.createExtent)(t.extent):i.none}function E(o){var e,i,n,s=void 0!==o.minZoom?o.minZoom:M,a=void 0!==o.maxZoom?o.maxZoom:28,u=void 0!==o.zoomFactor?o.zoomFactor:2;if(void 0!==o.resolutions){var h=o.resolutions;i=h[s],n=void 0!==h[a]?h[a]:h[h.length-1],e=(0,r.createSnapToResolutions)(h)}else{var l=(0,v.createProjection)(o.projection,"EPSG:3857"),c=l.getExtent(),p=(c?Math.max((0,m.getWidth)(c),(0,m.getHeight)(c)):360*v.METERS_PER_UNIT[_.default.DEGREES]/l.getMetersPerUnit())/t.DEFAULT_TILE_SIZE/Math.pow(2,M),g=p/Math.pow(2,28-M);void 0!==(i=o.maxResolution)?s=0:i=p/Math.pow(u,s),void 0===(n=o.minResolution)&&(n=void 0!==o.maxZoom?void 0!==o.maxResolution?i/Math.pow(u,a):p/Math.pow(u,a):g),a=s+Math.floor(Math.log(i/n)/Math.log(u)),n=i/Math.pow(u,a-s),e=(0,r.createSnapToPower)(u,i,a-s)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:s,zoomFactor:u}}function T(t){if(void 0===t.enableRotation||t.enableRotation){var o=t.constrainRotation;return void 0===o||!0===o?(0,s.createSnapToZero)():!1===o?s.none:"number"==typeof o?(0,s.createSnapToN)(o):s.none}return s.disable}function I(t){return!(t.sourceCenter&&t.targetCenter&&!(0,c.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var N=C;exports.default=N;
},{"./tilegrid/common.js":"mOEX","./util.js":"KniQ","./functions.js":"RgA2","./centerconstraint.js":"Rc7z","./Object.js":"PhPh","./resolutionconstraint.js":"o7nl","./rotationconstraint.js":"9EKd","./ViewHint.js":"cuLW","./ViewProperty.js":"0/98","./array.js":"luEr","./asserts.js":"fLG6","./coordinate.js":"nGsj","./easing.js":"IeCz","./extent.js":"QDir","./geom/GeometryType.js":"lmV0","./geom/Polygon.js":"6Nww","./math.js":"B96G","./obj.js":"mH6q","./proj.js":"Diht","./proj/Units.js":"yZx6"}],"Xno5":[function(require,module,exports) {
"use strict";function e(e,t){var r=document.createElement("canvas");return e&&(r.width=e),t&&(r.height=t),r.getContext("2d")}function t(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function r(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function n(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function a(e){for(;e.lastChild;)e.removeChild(e.lastChild)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=e,exports.outerWidth=t,exports.outerHeight=r,exports.replaceNode=o,exports.removeNode=n,exports.removeChildren=a;
},{}],"1Hbe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};exports.default=e;
},{}],"T6DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=n(require("../Object.js")),o=n(require("./Property.js")),i=require("../math.js"),r=require("../obj.js");function n(t){return t&&t.__esModule?t:{default:t}}var s=function(e){function n(t){e.call(this);var i=(0,r.assign)({},t);i[o.default.OPACITY]=void 0!==t.opacity?t.opacity:1,i[o.default.VISIBLE]=void 0===t.visible||t.visible,i[o.default.Z_INDEX]=t.zIndex,i[o.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,i[o.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(i),this.state_=null,this.type}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getType=function(){return this.type},n.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=(0,i.clamp)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},n.prototype.getLayersArray=function(e){return(0,t.abstract)()},n.prototype.getLayerStatesArray=function(e){return(0,t.abstract)()},n.prototype.getExtent=function(){return this.get(o.default.EXTENT)},n.prototype.getMaxResolution=function(){return this.get(o.default.MAX_RESOLUTION)},n.prototype.getMinResolution=function(){return this.get(o.default.MIN_RESOLUTION)},n.prototype.getOpacity=function(){return this.get(o.default.OPACITY)},n.prototype.getSourceState=function(){return(0,t.abstract)()},n.prototype.getVisible=function(){return this.get(o.default.VISIBLE)},n.prototype.getZIndex=function(){return this.get(o.default.Z_INDEX)},n.prototype.setExtent=function(t){this.set(o.default.EXTENT,t)},n.prototype.setMaxResolution=function(t){this.set(o.default.MAX_RESOLUTION,t)},n.prototype.setMinResolution=function(t){this.set(o.default.MIN_RESOLUTION,t)},n.prototype.setOpacity=function(t){this.set(o.default.OPACITY,t)},n.prototype.setVisible=function(t){this.set(o.default.VISIBLE,t)},n.prototype.setZIndex=function(t){this.set(o.default.Z_INDEX,t)},n}(e.default),u=s;exports.default=u;
},{"../util.js":"KniQ","../Object.js":"PhPh","./Property.js":"1Hbe","../math.js":"B96G","../obj.js":"mH6q"}],"iC8j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"q0nK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=d(require("../Collection.js")),r=d(require("../CollectionEventType.js")),s=require("../Object.js"),i=d(require("../ObjectEventType.js")),n=require("../asserts.js"),a=require("../events.js"),o=d(require("../events/EventType.js")),l=require("../extent.js"),y=d(require("./Base.js")),h=require("../obj.js"),u=d(require("../source/State.js"));function d(e){return e&&e.__esModule?e:{default:e}}var c={LAYERS:"layers"},f=function(y){function d(e){var r=e||{},i=(0,h.assign)({},r);delete i.layers;var o=r.layers;y.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},(0,a.listen)(this,(0,s.getChangeEventType)(c.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new t.default(o.slice(),{unique:!0}):(0,n.assert)("function"==typeof o.getArray,43):o=new t.default(void 0,{unique:!0}),this.setLayers(o)}return y&&(d.__proto__=y),d.prototype=Object.create(y&&y.prototype),d.prototype.constructor=d,d.prototype.handleLayerChange_=function(){this.changed()},d.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(a.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var s in this.layersListenerKeys_.push((0,a.listen)(t,r.default.ADD,this.handleLayersAdd_,this),(0,a.listen)(t,r.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[s].forEach(a.unlistenByKey);(0,h.clear)(this.listenerKeys_);for(var n=t.getArray(),l=0,y=n.length;l<y;l++){var u=n[l];this.listenerKeys_[(0,e.getUid)(u)]=[(0,a.listen)(u,i.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(u,o.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},d.prototype.handleLayersAdd_=function(t){var r=t.element;this.listenerKeys_[(0,e.getUid)(r)]=[(0,a.listen)(r,i.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(r,o.default.CHANGE,this.handleLayerChange_,this)],this.changed()},d.prototype.handleLayersRemove_=function(t){var r=t.element,s=(0,e.getUid)(r);this.listenerKeys_[s].forEach(a.unlistenByKey),delete this.listenerKeys_[s],this.changed()},d.prototype.getLayers=function(){return this.get(c.LAYERS)},d.prototype.setLayers=function(e){this.set(c.LAYERS,e)},d.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},d.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var s=this.getLayerState(),i=r,n=t.length;i<n;i++){var a=t[i];a.opacity*=s.opacity,a.visible=a.visible&&s.visible,a.maxResolution=Math.min(a.maxResolution,s.maxResolution),a.minResolution=Math.max(a.minResolution,s.minResolution),void 0!==s.extent&&(void 0!==a.extent?a.extent=(0,l.getIntersection)(a.extent,s.extent):a.extent=s.extent)}return t},d.prototype.getSourceState=function(){return u.default.READY},d}(y.default),p=f;exports.default=p;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../Object.js":"PhPh","../ObjectEventType.js":"zehl","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","./Base.js":"T6DQ","../obj.js":"mH6q","../source/State.js":"iC8j"}],"TAHd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:e[0]=e[1]=r,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"kRwz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./util.js"),t=x(require("./Collection.js")),i=x(require("./CollectionEventType.js")),r=x(require("./MapBrowserEvent.js")),n=x(require("./MapBrowserEventHandler.js")),o=x(require("./MapBrowserEventType.js")),s=x(require("./MapEvent.js")),a=x(require("./MapEventType.js")),l=x(require("./MapProperty.js")),h=x(require("./render/EventType.js")),d=A(require("./Object.js")),u=x(require("./ObjectEventType.js")),p=x(require("./TileQueue.js")),y=x(require("./View.js")),f=x(require("./ViewHint.js")),v=require("./asserts.js"),c=require("./dom.js"),_=require("./events.js"),g=require("./events/Event.js"),E=x(require("./events/EventType.js")),m=require("./extent.js"),T=require("./functions.js"),w=require("./has.js"),R=x(require("./layer/Group.js")),C=require("./size.js"),L=require("./structs/PriorityQueue.js"),S=require("./transform.js");function P(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function A(e){if(e&&e.__esModule)return e;var t=P();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}}return i.default=e,t&&t.set(e,i),i}function x(e){return e&&e.__esModule?e:{default:e}}var I=function(y){function v(e){y.call(this);var r=O(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:w.DEVICE_PIXEL_RATIO,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=(0,S.create)(),this.pixelToCoordinateTransform_=(0,S.create)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(w.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var s=[E.default.CLICK,E.default.DBLCLICK,E.default.MOUSEDOWN,E.default.TOUCHSTART,E.default.MSPOINTERDOWN,o.default.POINTERDOWN,E.default.MOUSEWHEEL,E.default.WHEEL],a=0,h=s.length;a<h;++a)(0,_.listen)(this.overlayContainerStopEvent_,s[a],g.stopPropagation);for(var u in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new n.default(this,e.moveTolerance),o.default)(0,_.listen)(this.mapBrowserEventHandler_,o.default[u],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=r.keyboardEventTarget,this.keyHandlerKeys_=null,(0,_.listen)(this.viewport_,E.default.CONTEXTMENU,this.handleBrowserEvent,this),(0,_.listen)(this.viewport_,E.default.WHEEL,this.handleBrowserEvent,this),(0,_.listen)(this.viewport_,E.default.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=r.controls||new t.default,this.interactions=r.interactions||new t.default,this.overlays_=r.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new p.default(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},(0,_.listen)(this,(0,d.getChangeEventType)(l.default.LAYERGROUP),this.handleLayerGroupChanged_,this),(0,_.listen)(this,(0,d.getChangeEventType)(l.default.VIEW),this.handleViewChanged_,this),(0,_.listen)(this,(0,d.getChangeEventType)(l.default.SIZE),this.handleSizeChanged_,this),(0,_.listen)(this,(0,d.getChangeEventType)(l.default.TARGET),this.handleTargetChanged_,this),this.setProperties(r.values),this.controls.forEach(function(e){e.setMap(this)}.bind(this)),(0,_.listen)(this.controls,i.default.ADD,function(e){e.element.setMap(this)},this),(0,_.listen)(this.controls,i.default.REMOVE,function(e){e.element.setMap(null)},this),this.interactions.forEach(function(e){e.setMap(this)}.bind(this)),(0,_.listen)(this.interactions,i.default.ADD,function(e){e.element.setMap(this)},this),(0,_.listen)(this.interactions,i.default.REMOVE,function(e){e.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),(0,_.listen)(this.overlays_,i.default.ADD,function(e){this.addOverlayInternal_(e.element)},this),(0,_.listen)(this.overlays_,i.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)},this)}return y&&(v.__proto__=y),v.prototype=Object.create(y&&y.prototype),v.prototype.constructor=v,v.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},v.prototype.addControl=function(e){this.getControls().push(e)},v.prototype.addInteraction=function(e){this.getInteractions().push(e)},v.prototype.addLayer=function(e){this.getLayerGroup().getLayers().push(e)},v.prototype.addOverlay=function(e){this.getOverlays().push(e)},v.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},v.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),(0,_.unlisten)(this.viewport_,E.default.CONTEXTMENU,this.handleBrowserEvent,this),(0,_.unlisten)(this.viewport_,E.default.WHEEL,this.handleBrowserEvent,this),(0,_.unlisten)(this.viewport_,E.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(E.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),y.prototype.disposeInternal.call(this)},v.prototype.forEachFeatureAtPixel=function(e,t,i){if(this.frameState_){var r=this.getCoordinateFromPixel(e),n=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:T.TRUE;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,t,null,o,null)}},v.prototype.getFeaturesAtPixel=function(e,t){var i=null;return this.forEachFeatureAtPixel(e,function(e){i||(i=[]),i.push(e)},t),i},v.prototype.forEachLayerAtPixel=function(e,t,i){if(this.frameState_){var r=i||{},n=void 0!==r.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||T.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,n,t,null,o,null)}},v.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(e),r=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:T.TRUE,n=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,null)},v.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},v.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),i="changedTouches"in e?e.changedTouches[0]:e;return[i.clientX-t.left,i.clientY-t.top]},v.prototype.getTarget=function(){return this.get(l.default.TARGET)},v.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},v.prototype.getCoordinateFromPixel=function(e){var t=this.frameState_;return t?(0,S.apply)(t.pixelToCoordinateTransform,e.slice()):null},v.prototype.getControls=function(){return this.controls},v.prototype.getOverlays=function(){return this.overlays_},v.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},v.prototype.getInteractions=function(){return this.interactions},v.prototype.getLayerGroup=function(){return this.get(l.default.LAYERGROUP)},v.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},v.prototype.getPixelFromCoordinate=function(e){var t=this.frameState_;return t?(0,S.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null},v.prototype.getRenderer=function(){return this.renderer_},v.prototype.getSize=function(){return this.get(l.default.SIZE)},v.prototype.getView=function(){return this.get(l.default.VIEW)},v.prototype.getViewport=function(){return this.viewport_},v.prototype.getOverlayContainer=function(){return this.overlayContainer_},v.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},v.prototype.getTilePriority=function(e,t,i,r){var n=this.frameState_;if(!(n&&t in n.wantedTiles))return L.DROP;if(!n.wantedTiles[t][e.getKey()])return L.DROP;var o=i[0]-n.focus[0],s=i[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r},v.prototype.handleBrowserEvent=function(e,t){var i=t||e.type,n=new r.default(i,this,e);this.handleMapBrowserEvent(n)},v.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){this.focus_=e.coordinate,e.frameState=this.frameState_;var t=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var i=t.length-1;i>=0;i--){var r=t[i];if(r.getActive())if(!r.handleEvent(e))break}}},v.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var i=this.maxTilesLoading_,r=i;if(e){var n=e.viewHints;n[f.default.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,r=2),n[f.default.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,r=2)}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,r))}!e||!this.hasListener(h.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||M(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(h.default.RENDERCOMPLETE,e);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,e);o.length=0},v.prototype.handleSizeChanged_=function(){this.render()},v.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(var t=0,i=this.keyHandlerKeys_.length;t<i;++t)(0,_.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,_.listen)(r,E.default.KEYDOWN,this.handleBrowserEvent,this),(0,_.listen)(r,E.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(E.default.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),(0,c.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(E.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},v.prototype.handleTileChange_=function(){this.render()},v.prototype.handleViewPropertyChanged_=function(){this.render()},v.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&((0,_.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,_.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",(0,e.getUid)(t)),this.viewPropertyListenerKey_=(0,_.listen)(t,u.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,_.listen)(t,E.default.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},v.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(_.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,_.listen)(e,u.default.PROPERTYCHANGE,this.render,this),(0,_.listen)(e,E.default.CHANGE,this.render,this)]),this.render()},v.prototype.isRendered=function(){return!!this.frameState_},v.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},v.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},v.prototype.removeControl=function(e){return this.getControls().remove(e)},v.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},v.prototype.removeLayer=function(e){return this.getLayerGroup().getLayers().remove(e)},v.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},v.prototype.renderFrame_=function(t){var i,r=this.getSize(),n=this.getView(),o=(0,m.createEmpty)(),l=this.frameState_,h=null;if(void 0!==r&&(0,C.hasArea)(r)&&n&&n.isDef()){for(var d=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=this.getLayerGroup().getLayerStatesArray(),p={},y=0,v=u.length;y<v;++y)p[(0,e.getUid)(u[y].layer)]=u[y];i=n.getState(this.pixelRatio_),h={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:i.center,index:this.frameIndex_++,layerStates:p,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:i,viewHints:d,wantedTiles:{}}}if(h&&(h.extent=(0,m.getForViewAndSize)(i.center,i.resolution,i.rotation,h.size,o)),this.frameState_=h,this.renderer_.renderFrame(h),h){if(h.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,h.postRenderFunctions),l)(!this.previousExtent_||!(0,m.isEmpty)(this.previousExtent_)&&!(0,m.equals)(h.extent,this.previousExtent_))&&(this.dispatchEvent(new s.default(a.default.MOVESTART,this,l)),this.previousExtent_=(0,m.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!h.viewHints[f.default.ANIMATING]&&!h.viewHints[f.default.INTERACTING]&&!(0,m.equals)(h.extent,this.previousExtent_)&&(this.dispatchEvent(new s.default(a.default.MOVEEND,this,h)),(0,m.clone)(h.extent,this.previousExtent_))}this.dispatchEvent(new s.default(a.default.POSTRENDER,this,h)),setTimeout(this.handlePostRender.bind(this),0)},v.prototype.setLayerGroup=function(e){this.set(l.default.LAYERGROUP,e)},v.prototype.setSize=function(e){this.set(l.default.SIZE,e)},v.prototype.setTarget=function(e){this.set(l.default.TARGET,e)},v.prototype.setView=function(e){this.set(l.default.VIEW,e)},v.prototype.skipFeature=function(t){this.skippedFeatureUids_[(0,e.getUid)(t)]=!0,this.render()},v.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0)},v.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[(0,e.getUid)(t)],this.render()},v}(d.default);function O(e){var i=null;void 0!==e.keyboardEventTarget&&(i="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,n,o,s={},a=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new R.default({layers:e.layers});return s[l.default.LAYERGROUP]=a,s[l.default.TARGET]=e.target,s[l.default.VIEW]=void 0!==e.view?e.view:new y.default,void 0!==e.controls&&(Array.isArray(e.controls)?r=new t.default(e.controls.slice()):((0,v.assert)("function"==typeof e.controls.getArray,47),r=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?n=new t.default(e.interactions.slice()):((0,v.assert)("function"==typeof e.interactions.getArray,48),n=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?o=new t.default(e.overlays.slice()):((0,v.assert)("function"==typeof e.overlays.getArray,49),o=e.overlays):o=new t.default,{controls:r,interactions:n,keyboardEventTarget:i,overlays:o,values:s}}var F=I;function M(e){for(var t=0,i=e.length;t<i;++t){var r=e[t];if("function"==typeof r.getLayers)return M(r.getLayers().getArray());var n=r.getSource();if(n&&n.loading)return!0}return!1}exports.default=F;
},{"./util.js":"KniQ","./Collection.js":"FnDa","./CollectionEventType.js":"BTrx","./MapBrowserEvent.js":"HMLS","./MapBrowserEventHandler.js":"ohHk","./MapBrowserEventType.js":"Yh/D","./MapEvent.js":"vFcA","./MapEventType.js":"xLGm","./MapProperty.js":"zlNQ","./render/EventType.js":"z39m","./Object.js":"PhPh","./ObjectEventType.js":"zehl","./TileQueue.js":"0tHO","./View.js":"hNqE","./ViewHint.js":"cuLW","./asserts.js":"fLG6","./dom.js":"Xno5","./events.js":"55Uq","./events/Event.js":"fKNg","./events/EventType.js":"C8cu","./extent.js":"QDir","./functions.js":"RgA2","./has.js":"f3Nv","./layer/Group.js":"q0nK","./size.js":"TAHd","./structs/PriorityQueue.js":"RQLY","./transform.js":"P4eA"}],"+/xx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../functions.js"),t=i(require("../MapEventType.js")),r=i(require("../Object.js")),s=require("../dom.js"),n=require("../events.js");function i(e){return e&&e.__esModule?e:{default:e}}var o=function(r){function i(t){r.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:e.VOID,t.target&&this.setTarget(t.target)}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){(0,s.removeNode)(this.element),r.prototype.disposeInternal.call(this)},i.prototype.getMap=function(){return this.map_},i.prototype.setMap=function(r){this.map_&&(0,s.removeNode)(this.element);for(var i=0,o=this.listenerKeys.length;i<o;++i)(0,n.unlistenByKey)(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=r,this.map_)&&((this.target_?this.target_:r.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==e.VOID&&this.listenerKeys.push((0,n.listen)(r,t.default.POSTRENDER,this.render,this)),r.render())},i.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},i}(r.default),l=o;exports.default=l;
},{"../functions.js":"RgA2","../MapEventType.js":"xLGm","../Object.js":"PhPh","../dom.js":"Xno5","../events.js":"55Uq"}],"HgMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontFamilies=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var t="ol-selectable";exports.CLASS_SELECTABLE=t;var o="ol-unselectable";exports.CLASS_UNSELECTABLE=o;var r="ol-unsupported";exports.CLASS_UNSUPPORTED=r;var S="ol-control";exports.CLASS_CONTROL=S;var s="ol-collapsed";exports.CLASS_COLLAPSED=s;var L=function(){var e,t={};return function(o){if(e||(e=document.createElement("div").style),!(o in t)){e.font=o;var r=e.fontFamily;if(e.font="",!r)return null;t[o]=r.split(/,\s?/)}return t[o]}}();exports.getFontFamilies=L;
},{}],"GCgv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.visibleAtResolution=l,exports.default=void 0;var e=require("../events.js"),t=h(require("../events/EventType.js")),r=require("../util.js"),s=require("../Object.js"),n=h(require("./Base.js")),o=h(require("./Property.js")),a=require("../obj.js"),i=h(require("../render/EventType.js")),u=h(require("../source/State.js"));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(n){function h(t){var r=(0,a.assign)({},t);delete r.source,n.call(this,r),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),(0,e.listen)(this,(0,s.getChangeEventType)(o.default.SOURCE),this.handleSourcePropertyChange_,this);var i=t.source?t.source:null;this.setSource(i)}return n&&(h.__proto__=n),h.prototype=Object.create(n&&n.prototype),h.prototype.constructor=h,h.prototype.getLayersArray=function(e){var t=e||[];return t.push(this),t},h.prototype.getLayerStatesArray=function(e){var t=e||[];return t.push(this.getLayerState()),t},h.prototype.getSource=function(){return this.get(o.default.SOURCE)||null},h.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():u.default.UNDEFINED},h.prototype.handleSourceChange_=function(){this.changed()},h.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&((0,e.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=(0,e.listen)(r,t.default.CHANGE,this.handleSourceChange_,this)),this.changed()},h.prototype.setMap=function(s){this.mapPrecomposeKey_&&((0,e.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),s||this.changed(),this.mapRenderKey_&&((0,e.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),s&&(this.mapPrecomposeKey_=(0,e.listen)(s,i.default.PRECOMPOSE,function(e){var t=e,s=this.getLayerState();s.managed=!1,void 0===this.getZIndex()&&(s.zIndex=1/0),t.frameState.layerStatesArray.push(s),t.frameState.layerStates[(0,r.getUid)(this)]=s},this),this.mapRenderKey_=(0,e.listen)(this,t.default.CHANGE,s.render,s),this.changed())},h.prototype.setSource=function(e){this.set(o.default.SOURCE,e)},h}(n.default);function l(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution}var c=p;exports.default=c;
},{"../events.js":"55Uq","../events/EventType.js":"C8cu","../util.js":"KniQ","../Object.js":"PhPh","./Base.js":"T6DQ","./Property.js":"1Hbe","../obj.js":"mH6q","../render/EventType.js":"z39m","../source/State.js":"iC8j"}],"Q4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=p,exports.default=void 0;var e=require("../array.js"),t=a(require("./Control.js")),l=require("../css.js"),i=require("../dom.js"),s=require("../events.js"),o=a(require("../events/EventType.js")),r=require("../layer/Layer.js");function a(e){return e&&e.__esModule?e:{default:e}}var n=function(t){function a(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||p,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-attribution",a=void 0!==i.tipLabel?i.tipLabel:"Attributions",n=void 0!==i.collapseLabel?i.collapseLabel:"»";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;var c=void 0!==i.label?i.label:"i";"string"==typeof c?(this.label_=document.createElement("span"),this.label_.textContent=c):this.label_=c;var d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=a,h.appendChild(d),(0,s.listen)(h,o.default.CLICK,this.handleClick_,this);var u=r+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+l.CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=u,_.appendChild(this.ulElement_),_.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a.prototype.collectSourceAttributions_=function(e){for(var t={},l=[],i=e.layerStatesArray,s=e.viewState.resolution,o=0,a=i.length;o<a;++o){var n=i[o];if((0,r.visibleAtResolution)(n,s)){var p=n.layer.getSource();if(p){var c=p.getAttributions();if(c){var d=c(e);if(d)if(this.overrideCollapsible_||!1!==p.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(d))for(var h=0,u=d.length;h<u;++h)d[h]in t||(l.push(d[h]),t[d[h]]=!0);else d in t||(l.push(d),t[d]=!0)}}}}return l},a.prototype.updateElement_=function(t){if(t){var l=this.collectSourceAttributions_(t),s=l.length>0;if(this.renderedVisible_!=s&&(this.element.style.display=s?"":"none",this.renderedVisible_=s),!(0,e.equals)(l,this.renderedAttributions_)){(0,i.removeChildren)(this.ulElement_);for(var o=0,r=l.length;o<r;++o){var a=document.createElement("li");a.innerHTML=l[o],this.ulElement_.appendChild(a)}this.renderedAttributions_=l}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},a.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},a.prototype.handleToggle_=function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,i.replaceNode)(this.collapseLabel_,this.label_):(0,i.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},a.prototype.getCollapsible=function(){return this.collapsible_},a.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},a.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},a.prototype.getCollapsed=function(){return this.collapsed_},a}(t.default);function p(e){this.updateElement_(e.frameState)}var c=n;exports.default=c;
},{"../array.js":"luEr","./Control.js":"+/xx","../css.js":"HgMV","../dom.js":"Xno5","../events.js":"55Uq","../events/EventType.js":"C8cu","../layer/Layer.js":"GCgv"}],"sCgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=l,exports.default=void 0;var t=r(require("./Control.js")),e=require("../css.js"),s=require("../easing.js"),a=require("../events.js"),i=r(require("../events/EventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function r(s){var r=s||{};t.call(this,{element:document.createElement("div"),render:r.render||l,target:r.target});var o=void 0!==r.className?r.className:"ol-rotate",n=void 0!==r.label?r.label:"⇧";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=n):(this.label_=n,this.label_.classList.add("ol-compass"));var d=r.tipLabel?r.tipLabel:"Reset rotation",h=document.createElement("button");h.className=o+"-reset",h.setAttribute("type","button"),h.title=d,h.appendChild(this.label_),(0,a.listen)(h,i.default.CLICK,this.handleClick_,this);var u=o+" "+e.CLASS_UNSELECTABLE+" "+e.CLASS_CONTROL,_=this.element;_.className=u,_.appendChild(h),this.callResetNorth_=r.resetNorth?r.resetNorth:void 0,this.duration_=void 0!==r.duration?r.duration:250,this.autoHide_=void 0===r.autoHide||r.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(e.CLASS_HIDDEN)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},r.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:s.easeOut}):t.setRotation(0))},r}(t.default);function l(t){var s=t.frameState;if(s){var a=s.viewState.rotation;if(a!=this.rotation_){var i="rotate("+a+"rad)";if(this.autoHide_){var r=this.element.classList.contains(e.CLASS_HIDDEN);r||0!==a?r&&0!==a&&this.element.classList.remove(e.CLASS_HIDDEN):this.element.classList.add(e.CLASS_HIDDEN)}this.label_.style.msTransform=i,this.label_.style.webkitTransform=i,this.label_.style.transform=i}this.rotation_=a}}var n=o;exports.default=n;
},{"./Control.js":"+/xx","../css.js":"HgMV","../easing.js":"IeCz","../events.js":"55Uq","../events/EventType.js":"C8cu"}],"L3+c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=a(require("../events/EventType.js")),o=a(require("./Control.js")),i=require("../css.js"),n=require("../easing.js");function a(e){return e&&e.__esModule?e:{default:e}}var r=function(o){function a(n){var a=n||{};o.call(this,{element:document.createElement("div"),target:a.target});var r=void 0!==a.className?a.className:"ol-zoom",l=void 0!==a.delta?a.delta:1,s=void 0!==a.zoomInLabel?a.zoomInLabel:"+",u=void 0!==a.zoomOutLabel?a.zoomOutLabel:"−",d=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",c=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=r+"-in",p.setAttribute("type","button"),p.title=d,p.appendChild("string"==typeof s?document.createTextNode(s):s),(0,e.listen)(p,t.default.CLICK,this.handleClick_.bind(this,l));var m=document.createElement("button");m.className=r+"-out",m.setAttribute("type","button"),m.title=c,m.appendChild("string"==typeof u?document.createTextNode(u):u),(0,e.listen)(m,t.default.CLICK,this.handleClick_.bind(this,-l));var v=r+" "+i.CLASS_UNSELECTABLE+" "+i.CLASS_CONTROL,b=this.element;b.className=v,b.appendChild(p),b.appendChild(m),this.duration_=void 0!==a.duration?a.duration:250}return o&&(a.__proto__=o),a.prototype=Object.create(o&&o.prototype),a.prototype.constructor=a,a.prototype.handleClick_=function(e,t){t.preventDefault(),this.zoomByDelta_(e)},a.prototype.zoomByDelta_=function(e){var t=this.getMap().getView();if(t){var o=t.getResolution();if(o){var i=t.constrainResolution(o,e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:i,duration:this.duration_,easing:n.easeOut})):t.setResolution(i)}}},a}(o.default),l=r;exports.default=l;
},{"../events.js":"55Uq","../events/EventType.js":"C8cu","./Control.js":"+/xx","../css.js":"HgMV","../easing.js":"IeCz"}],"uzb+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=i;var t=u(require("../Collection.js")),e=u(require("./Attribution.js")),o=u(require("./Rotate.js")),r=u(require("./Zoom.js"));function u(t){return t&&t.__esModule?t:{default:t}}function i(u){var i=u||{},n=new t.default;return(void 0===i.zoom||i.zoom)&&n.push(new r.default(i.zoomOptions)),(void 0===i.rotate||i.rotate)&&n.push(new o.default(i.rotateOptions)),(void 0===i.attribution||i.attribution)&&n.push(new e.default(i.attributionOptions)),n}
},{"../Collection.js":"FnDa","./Attribution.js":"Q4Cf","./Rotate.js":"sCgw","./Zoom.js":"L3+c"}],"77gA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0};t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,i){this.points_.push(t,i,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var n=i-3;n>0&&this.points_[n+2]>t;)n-=3;var e=this.points_[i+2]-this.points_[n+2];if(e<1e3/60)return!1;var s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/e,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_};var i=t;exports.default=i;
},{}],"caOi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"jB2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=a,exports.rotate=s,exports.rotateWithoutConstraints=u,exports.zoom=c,exports.zoomByDelta=l,exports.zoomWithoutConstraints=p,exports.default=void 0;var t=r(require("../Object.js")),e=require("../easing.js"),o=r(require("./Property.js")),n=require("../math.js");function r(t){return t&&t.__esModule?t:{default:t}}var i=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(o.default.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(o.default.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(t.default);function a(t,o,n){var r=t.getCenter();if(r){var i=t.constrainCenter([r[0]+o[0],r[1]+o[1]]);n?t.animate({duration:n,easing:e.linear,center:i}):t.setCenter(i)}}function s(t,e,o,n){e=t.constrainRotation(e,0),u(t,e,o,n)}function u(t,o,n,r){if(void 0!==o){var i=t.getRotation(),a=t.getCenter();void 0!==i&&a&&r>0?t.animate({rotation:o,anchor:n,duration:r,easing:e.easeOut}):t.rotate(o,n)}}function c(t,e,o,n,r){e=t.constrainResolution(e,0,r),p(t,e,o,n)}function l(t,e,o,r){var i=t.getResolution(),a=t.constrainResolution(i,e,0);if(void 0!==a){var s=t.getResolutions();a=(0,n.clamp)(a,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(o&&void 0!==a&&a!==i){var u=t.getCenter(),c=t.calculateCenterZoom(a,o);c=t.constrainCenter(c),o=[(a*u[0]-i*c[0])/(a-i),(a*u[1]-i*c[1])/(a-i)]}p(t,a,o,r)}function p(t,o,n,r){if(o){var i=t.getResolution(),a=t.getCenter();if(void 0!==i&&a&&o!==i&&r)t.animate({resolution:o,anchor:n,duration:r,easing:e.easeOut});else{if(n){var s=t.calculateCenterZoom(o,n);t.setCenter(s)}t.setResolution(o)}}}var f=i;exports.default=f;
},{"../Object.js":"PhPh","../easing.js":"IeCz","./Property.js":"caOi","../math.js":"B96G"}],"2NSa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../MapBrowserEventType.js")),e=n(require("./Interaction.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;var e=r();if(e&&e.has(t))return e.get(t);var n={};if(null!=t){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=o?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=t[a]}}return n.default=t,e&&e.set(t,n),n}function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(e){t.call(this,{handleEvent:i});var r=e||{};this.delta_=r.delta?r.delta:1,this.duration_=void 0!==r.duration?r.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.default);function i(r){var n=!1;if(r.type==t.default.DBLCLICK){var o=r.originalEvent,a=r.map,i=r.coordinate,u=o.shiftKey?-this.delta_:this.delta_,l=a.getView();(0,e.zoomByDelta)(l,u,i,this.duration_),r.preventDefault(),n=!0}return!n}var u=a;exports.default=u;
},{"../MapBrowserEventType.js":"Yh/D","./Interaction.js":"jB2p"}],"YcID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.primaryAction=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=n(require("../MapBrowserEventType.js")),t=require("../asserts.js"),r=require("../functions.js"),o=require("../has.js");function n(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=i;var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=a;var s=function(e){return e.target.getTargetElement()===document.activeElement};exports.focus=s;var l=r.TRUE;exports.always=l;var u=function(t){return t.type==e.default.CLICK};exports.click=u;var y=function(e){var t=e.originalEvent;return 0==t.button&&!(o.WEBKIT&&o.MAC&&t.ctrlKey)};exports.mouseActionButton=y;var p=r.FALSE;exports.never=p;var v=function(e){return"pointermove"==e.type};exports.pointerMove=v;var c=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=c;var f=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=f;var K=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=K;var x=function(e){var t=e.originalEvent;return!t.altKey&&(o.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=x;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=E;var m=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};exports.targetNotEditable=m;var d=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"mouse"==r.pointerType};exports.mouseOnly=d;var g=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),r.isPrimary&&0===r.button};exports.primaryAction=g;
},{"../MapBrowserEventType.js":"Yh/D","../asserts.js":"fLG6","../functions.js":"RgA2","../has.js":"f3Nv"}],"dnA2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=a,exports.default=void 0;var e=r(require("../MapBrowserEventType.js")),t=r(require("./Interaction.js")),n=require("../obj.js");function r(e){return e&&e.__esModule?e:{default:e}}var o=function(t){function r(e){var n=e||{};t.call(this,n),n.handleDownEvent&&(this.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(this.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(this.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(this.handleUpEvent=n.handleUpEvent),n.stopDown&&(this.stopDown=n.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.handleDownEvent=function(e){return!1},r.prototype.handleDragEvent=function(e){},r.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==e.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==e.default.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==e.default.POINTERDOWN){var o=this.handleDownEvent(t);o&&t.preventDefault(),this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==e.default.POINTERMOVE&&this.handleMoveEvent(t);return!n},r.prototype.handleMoveEvent=function(e){},r.prototype.handleUpEvent=function(e){return!1},r.prototype.stopDown=function(e){return e},r.prototype.updateTrackedPointers_=function(t){if(i(t)){var r=t.pointerEvent,o=r.pointerId.toString();t.type==e.default.POINTERUP?delete this.trackedPointers_[o]:t.type==e.default.POINTERDOWN?this.trackedPointers_[o]=r:o in this.trackedPointers_&&(this.trackedPointers_[o]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}},r}(t.default);function a(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return[n/t,r/t]}function i(t){var n=t.type;return n===e.default.POINTERDOWN||n===e.default.POINTERDRAG||n===e.default.POINTERUP}var s=o;exports.default=s;
},{"../MapBrowserEventType.js":"Yh/D","./Interaction.js":"jB2p","../obj.js":"mH6q"}],"N4gU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("../ViewHint.js")),e=require("../coordinate.js"),i=require("../easing.js"),n=require("../events/condition.js"),r=require("../functions.js"),o=a(require("./Pointer.js"));function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function a(t){if(t&&t.__esModule)return t;var e=s();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=n?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(i,r,o):i[r]=t[r]}}return i.default=t,e&&e.set(t,i),i}function c(t){return t&&t.__esModule?t:{default:t}}var u=function(s){function a(t){s.call(this,{stopDown:r.FALSE});var e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=e.condition?e.condition:n.noModifierKeys,this.noKinetic_=!1}return s&&(a.__proto__=s),a.prototype=Object.create(s&&s.prototype),a.prototype.constructor=a,a.prototype.handleDragEvent=function(i){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(t.default.INTERACTING,1));var n=this.targetPointers,r=(0,o.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var s=this.lastCentroid[0]-r[0],a=r[1]-this.lastCentroid[1],c=i.map.getView(),u=[s,a];(0,e.scale)(u,c.getResolution()),(0,e.rotate)(u,c.getRotation()),(0,e.add)(u,c.getCenter()),u=c.constrainCenter(u),c.setCenter(u)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length},a.prototype.handleUpEvent=function(e){var n=e.map,r=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenter(),c=n.getPixelFromCoordinate(a),u=n.getCoordinateFromPixel([c[0]-o*Math.cos(s),c[1]-o*Math.sin(s)]);r.animate({center:r.constrainCenter(u),duration:500,easing:i.easeOut})}return this.panning_&&(this.panning_=!1,r.setHint(t.default.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},a.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},a}(o.default),h=u;exports.default=h;
},{"../ViewHint.js":"cuLW","../coordinate.js":"nGsj","../easing.js":"IeCz","../events/condition.js":"YcID","../functions.js":"RgA2","./Pointer.js":"dnA2"}],"PgBj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../rotationconstraint.js"),e=a(require("../ViewHint.js")),o=require("../events/condition.js"),n=require("../functions.js"),i=require("./Interaction.js"),r=a(require("./Pointer.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(r){function a(t){var e=t||{};r.call(this,{stopDown:n.FALSE}),this.condition_=e.condition?e.condition:o.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250}return r&&(a.__proto__=r),a.prototype=Object.create(r&&r.prototype),a.prototype.constructor=a,a.prototype.handleDragEvent=function(e){if((0,o.mouseOnly)(e)){var n=e.map,r=n.getView();if(r.getConstraints().rotation!==t.disable){var a=n.getSize(),s=e.pixel,u=Math.atan2(a[1]/2-s[1],s[0]-a[0]/2);if(void 0!==this.lastAngle_){var l=u-this.lastAngle_,d=r.getRotation();(0,i.rotateWithoutConstraints)(r,d-l)}this.lastAngle_=u}}},a.prototype.handleUpEvent=function(t){if(!(0,o.mouseOnly)(t))return!0;var n=t.map.getView();n.setHint(e.default.INTERACTING,-1);var r=n.getRotation();return(0,i.rotate)(n,r,void 0,this.duration_),!1},a.prototype.handleDownEvent=function(t){return!!(0,o.mouseOnly)(t)&&(!(!(0,o.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().setHint(e.default.INTERACTING,1),this.lastAngle_=void 0,!0))},a}(r.default),u=s;exports.default=u;
},{"../rotationconstraint.js":"9EKd","../ViewHint.js":"cuLW","../events/condition.js":"YcID","../functions.js":"RgA2","./Interaction.js":"jB2p","./Pointer.js":"dnA2"}],"bMDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../Disposable.js")),e=i(require("../geom/Polygon.js"));function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function i(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.setMap(null)},i.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},i.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},i.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},i.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,i=this.endPixel_,o=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new e.default([o])},i.prototype.getGeometry=function(){return this.geometry_},i}(t.default),s=o;exports.default=s;
},{"../Disposable.js":"DDda","../geom/Polygon.js":"6Nww"}],"AQ/R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("../events/Event.js")),o=require("../events/condition.js"),e=require("../functions.js"),n=r(require("./Pointer.js")),i=r(require("../render/Box.js"));function r(t){return t&&t.__esModule?t:{default:t}}var s={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},a=function(t){function o(o,e,n){t.call(this,o),this.coordinate=e,this.mapBrowserEvent=n}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o}(t.default),d=function(t){function n(n){t.call(this);var r=n||{};this.box_=new i.default(r.className||"ol-dragbox"),this.minArea_=void 0!==r.minArea?r.minArea:64,this.onBoxEnd_=r.onBoxEnd?r.onBoxEnd:e.VOID,this.startPixel_=null,this.condition_=r.condition?r.condition:o.always,this.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:this.defaultBoxEndCondition}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.defaultBoxEndCondition=function(t,o,e){var n=e[0]-o[0],i=e[1]-o[1];return n*n+i*i>=this.minArea_},n.prototype.getGeometry=function(){return this.box_.getGeometry()},n.prototype.handleDragEvent=function(t){(0,o.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new a(s.BOXDRAG,t.coordinate,t)))},n.prototype.handleUpEvent=function(t){return!(0,o.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new a(s.BOXEND,t.coordinate,t))),!1)},n.prototype.handleDownEvent=function(t){return!!(0,o.mouseOnly)(t)&&(!(!(0,o.mouseActionButton)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new a(s.BOXSTART,t.coordinate,t)),!0))},n}(n.default),u=d;exports.default=u;
},{"../events/Event.js":"fKNg","../events/condition.js":"YcID","../functions.js":"RgA2","./Pointer.js":"dnA2","../render/Box.js":"bMDg"}],"pTqW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../easing.js"),e=require("../events/condition.js"),o=require("../extent.js"),r=i(require("./DragBox.js"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(t){function o(o){var r=o||{},i=r.condition?r.condition:e.shiftKeyOnly;t.call(this,{condition:i,className:r.className||"ol-dragzoom",onBoxEnd:a}),this.duration_=void 0!==r.duration?r.duration:200,this.out_=void 0!==r.out&&r.out}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o}(r.default);function a(){var e=this.getMap(),r=e.getView(),i=e.getSize(),n=this.getGeometry().getExtent();if(this.out_){var a=r.calculateExtent(i),s=(0,o.createOrUpdateFromCoordinates)([e.getPixelFromCoordinate((0,o.getBottomLeft)(n)),e.getPixelFromCoordinate((0,o.getTopRight)(n))]),u=r.getResolutionForExtent(s,i);(0,o.scaleFromCenter)(a,1/u),n=a}var d=r.constrainResolution(r.getResolutionForExtent(n,i)),c=(0,o.getCenter)(n);c=r.constrainCenter(c),r.animate({resolution:d,center:c,duration:this.duration_,easing:t.easeOut})}var s=n;exports.default=s;
},{"../easing.js":"IeCz","../events/condition.js":"YcID","../extent.js":"QDir","./DragBox.js":"AQ/R"}],"mmJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"CFRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../coordinate.js"),t=u(require("../events/EventType.js")),r=u(require("../events/KeyCode.js")),n=require("../events/condition.js"),i=a(require("./Interaction.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}}return r.default=e,t&&t.set(e,r),r}function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(t){e.call(this,{handleEvent:l});var r=t||{};this.defaultCondition_=function(e){return(0,n.noModifierKeys)(e)&&(0,n.targetNotEditable)(e)},this.condition_=void 0!==r.condition?r.condition:this.defaultCondition_,this.duration_=void 0!==r.duration?r.duration:100,this.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(i.default);function l(n){var o=!1;if(n.type==t.default.KEYDOWN){var a=n.originalEvent.keyCode;if(this.condition_(n)&&(a==r.default.DOWN||a==r.default.LEFT||a==r.default.RIGHT||a==r.default.UP)){var u=n.map.getView(),d=u.getResolution()*this.pixelDelta_,l=0,f=0;a==r.default.DOWN?f=-d:a==r.default.LEFT?l=-d:a==r.default.RIGHT?l=d:f=d;var s=[l,f];(0,e.rotate)(s,u.getRotation()),(0,i.pan)(u,s,this.duration_),n.preventDefault(),o=!0}}return!o}var f=d;exports.default=f;
},{"../coordinate.js":"nGsj","../events/EventType.js":"C8cu","../events/KeyCode.js":"mmJk","../events/condition.js":"YcID","./Interaction.js":"jB2p"}],"7S8w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/EventType.js")),e=require("../events/condition.js"),r=n(require("./Interaction.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function n(t){if(t&&t.__esModule)return t;var e=o();if(e&&e.has(t))return e.get(t);var r={};if(null!=t){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=n?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}}return r.default=t,e&&e.set(t,r),r}function i(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function r(r){t.call(this,{handleEvent:u});var o=r||{};this.condition_=o.condition?o.condition:e.targetNotEditable,this.delta_=o.delta?o.delta:1,this.duration_=void 0!==o.duration?o.duration:100}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(r.default);function u(e){var o=!1;if(e.type==t.default.KEYDOWN||e.type==t.default.KEYPRESS){var n=e.originalEvent.charCode;if(this.condition_(e)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=e.map,a=n=="+".charCodeAt(0)?this.delta_:-this.delta_,u=i.getView();(0,r.zoomByDelta)(u,a,void 0,this.duration_),e.preventDefault(),o=!0}}return!o}var d=a;exports.default=d;
},{"../events/EventType.js":"C8cu","../events/condition.js":"YcID","./Interaction.js":"jB2p"}],"kPt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Mode=void 0;var t=h(require("../ViewHint.js")),e=require("../events/condition.js"),i=require("../easing.js"),o=h(require("../events/EventType.js")),r=require("../has.js"),a=u(require("./Interaction.js")),n=require("../math.js");function s(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return s=function(){return t},t}function u(t){if(t&&t.__esModule)return t;var e=s();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=o?Object.getOwnPropertyDescriptor(t,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=t[r]}}return i.default=t,e&&e.set(t,i),i}function h(t){return t&&t.__esModule?t:{default:t}}var d=1,c={TRACKPAD:"trackpad",WHEEL:"wheel"};exports.Mode=c;var l=function(s){function u(t){var i=t||{};s.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:e.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return s&&(u.__proto__=s),u.prototype=Object.create(s&&s.prototype),u.prototype.constructor=u,u.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(t.default.INTERACTING,-1)},u.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var a=e.type;if(a!==o.default.WHEEL&&a!==o.default.MOUSEWHEEL)return!0;e.preventDefault();var n,s=e.map,u=e.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==o.default.WHEEL?(n=u.deltaY,r.FIREFOX&&u.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=r.DEVICE_PIXEL_RATIO),u.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)):e.type==o.default.MOUSEWHEEL&&(n=-u.wheelDeltaY,r.SAFARI&&(n/=3)),0===n)return!1;var h=Date.now();if(void 0===this.startTime_&&(this.startTime_=h),(!this.mode_||h-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?c.TRACKPAD:c.WHEEL),this.mode_===c.TRACKPAD){var d=s.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):d.setHint(t.default.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var l=d.getResolution()*Math.pow(2,n/this.trackpadDeltaPerZoom_),_=d.getMinResolution(),p=d.getMaxResolution(),m=0;if(l<_?(l=Math.max(l,_/this.trackpadZoomBuffer_),m=1):l>p&&(l=Math.min(l,p*this.trackpadZoomBuffer_),m=-1),this.lastAnchor_){var f=d.calculateCenterZoom(l,this.lastAnchor_);d.setCenter(d.constrainCenter(f))}return d.setResolution(l),0===m&&this.constrainResolution_&&d.animate({resolution:d.constrainResolution(l,n>0?-1:1),easing:i.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),m>0?d.animate({resolution:_,easing:i.easeOut,anchor:this.lastAnchor_,duration:500}):m<0&&d.animate({resolution:p,easing:i.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=h,!1}this.delta_+=n;var v=Math.max(this.timeout_-(h-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,s),v),!1},u.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=d,o=(0,n.clamp)(this.delta_,-i,i);(0,a.zoomByDelta)(e,-o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},u.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},u}(a.default),_=l;exports.default=_;
},{"../ViewHint.js":"cuLW","../events/condition.js":"YcID","../easing.js":"IeCz","../events/EventType.js":"C8cu","../has.js":"f3Nv","./Interaction.js":"jB2p","../math.js":"B96G"}],"8hbG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../ViewHint.js")),e=require("../functions.js"),r=require("./Interaction.js"),i=a(require("./Pointer.js")),n=require("../rotationconstraint.js");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function a(t){if(t&&t.__esModule)return t;var e=o();if(e&&e.has(t))return e.get(t);var r={};if(null!=t){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=i?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}}return r.default=t,e&&e.set(t,r),r}function s(t){return t&&t.__esModule?t:{default:t}}var l=function(o){function a(t){var r=t||{},i=r;i.stopDown||(i.stopDown=e.FALSE),o.call(this,i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==r.threshold?r.threshold:.3,this.duration_=void 0!==r.duration?r.duration:250}return o&&(a.__proto__=o),a.prototype=Object.create(o&&o.prototype),a.prototype.constructor=a,a.prototype.handleDragEvent=function(t){var e=0,o=this.targetPointers[0],a=this.targetPointers[1],s=Math.atan2(a.clientY-o.clientY,a.clientX-o.clientX);if(void 0!==this.lastAngle_){var l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=s;var h=t.map,u=h.getView();if(u.getConstraints().rotation!==n.disable){var c=h.getViewport().getBoundingClientRect(),p=(0,i.centroid)(this.targetPointers);if(p[0]-=c.left,p[1]-=c.top,this.anchor_=h.getCoordinateFromPixel(p),this.rotating_){var d=u.getRotation();h.render(),(0,r.rotateWithoutConstraints)(u,d+e,this.anchor_)}}},a.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var i=e.map.getView();if(i.setHint(t.default.INTERACTING,-1),this.rotating_){var n=i.getRotation();(0,r.rotate)(i,n,this.anchor_,this.duration_)}return!1}return!0},a.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var r=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||r.getView().setHint(t.default.INTERACTING,1),!0}return!1},a}(i.default),h=l;exports.default=h;
},{"../ViewHint.js":"cuLW","../functions.js":"RgA2","./Interaction.js":"jB2p","./Pointer.js":"dnA2","../rotationconstraint.js":"9EKd"}],"rcXm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("../ViewHint.js")),e=require("../functions.js"),n=require("./Interaction.js"),r=o(require("./Pointer.js"));function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function o(t){if(t&&t.__esModule)return t;var e=i();if(e&&e.has(t))return e.get(t);var n={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=r?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}}return n.default=t,e&&e.set(t,n),n}function a(t){return t&&t.__esModule?t:{default:t}}var s=function(i){function o(t){var n=t||{},r=n;r.stopDown||(r.stopDown=e.FALSE),i.call(this,r),this.constrainResolution_=n.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==n.duration?n.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return i&&(o.__proto__=i),o.prototype=Object.create(i&&i.prototype),o.prototype.constructor=o,o.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],o=this.targetPointers[1],a=i.clientX-o.clientX,s=i.clientY-o.clientY,l=Math.sqrt(a*a+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;var u=t.map,c=u.getView(),h=c.getResolution(),p=c.getMaxResolution(),f=c.getMinResolution(),d=h*e;d>p?(e=p/h,d=p):d<f&&(e=f/h,d=f),1!=e&&(this.lastScaleDelta_=e);var _=u.getViewport().getBoundingClientRect(),g=(0,r.centroid)(this.targetPointers);g[0]-=_.left,g[1]-=_.top,this.anchor_=u.getCoordinateFromPixel(g),u.render(),(0,n.zoomWithoutConstraints)(c,d,this.anchor_)},o.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var r=e.map.getView();r.setHint(t.default.INTERACTING,-1);var i=r.getResolution();if(this.constrainResolution_||i<r.getMinResolution()||i>r.getMaxResolution()){var o=this.lastScaleDelta_-1;(0,n.zoom)(r,i,this.anchor_,this.duration_,o)}return!1}return!0},o.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().setHint(t.default.INTERACTING,1),!0}return!1},o}(r.default),l=s;exports.default=l;
},{"../ViewHint.js":"cuLW","../functions.js":"RgA2","./Interaction.js":"jB2p","./Pointer.js":"dnA2"}],"IYO6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=require("../events.js"),r=n(require("../events/Event.js")),s=n(require("../events/EventType.js")),i=n(require("./Interaction.js")),o=require("../proj.js");function n(t){return t&&t.__esModule?t:{default:t}}var a={ADD_FEATURES:"addfeatures"},u=function(t){function e(e,r,s,i){t.call(this,e),this.features=s,this.file=r,this.projection=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.default),p=function(r){function i(e){var s=e||{};r.call(this,{handleEvent:t.TRUE}),this.formatConstructors_=s.formatConstructors?s.formatConstructors:[],this.projection_=s.projection?(0,o.get)(s.projection):null,this.dropListenKeys_=null,this.source_=s.source||null,this.target=s.target?s.target:null}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i.prototype.handleResult_=function(t,e){var r=e.target.result,s=this.getMap(),i=this.projection_;i||(i=s.getView().getProjection());for(var o=this.formatConstructors_,n=[],p=0,c=o.length;p<c;++p){var l=new o[p];if((n=this.tryReadFeatures_(l,r,{featureProjection:i}))&&n.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(n)),this.dispatchEvent(new u(a.ADD_FEATURES,t,n,i))},i.prototype.registerListeners_=function(){var t=this.getMap();if(t){var r=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,e.listen)(r,s.default.DROP,c,this),(0,e.listen)(r,s.default.DRAGENTER,l,this),(0,e.listen)(r,s.default.DRAGOVER,l,this),(0,e.listen)(r,s.default.DROP,l,this)]}},i.prototype.setActive=function(t){r.prototype.setActive.call(this,t),t?this.registerListeners_():this.unregisterListeners_()},i.prototype.setMap=function(t){this.unregisterListeners_(),r.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},i.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(s){return null}},i.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(e.unlistenByKey),this.dropListenKeys_=null)},i}(i.default);function c(t){for(var e=t.dataTransfer.files,r=0,i=e.length;r<i;++r){var o=e.item(r),n=new FileReader;n.addEventListener(s.default.LOAD,this.handleResult_.bind(this,o)),n.readAsText(o)}}function l(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var h=p;exports.default=h;
},{"../functions.js":"RgA2","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","./Interaction.js":"jB2p","../proj.js":"Diht"}],"0/IT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../rotationconstraint.js"),e=a(require("../ViewHint.js")),i=require("../events/condition.js"),o=require("./Interaction.js"),n=a(require("./Pointer.js"));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(n){function a(t){var e=t||{};n.call(this,e),this.condition_=e.condition?e.condition:i.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==e.duration?e.duration:400}return n&&(a.__proto__=n),a.prototype=Object.create(n&&n.prototype),a.prototype.constructor=a,a.prototype.handleDragEvent=function(e){if((0,i.mouseOnly)(e)){var n=e.map,a=n.getSize(),s=e.pixel,r=s[0]-a[0]/2,l=a[1]/2-s[1],u=Math.atan2(l,r),d=Math.sqrt(r*r+l*l),h=n.getView();if(h.getConstraints().rotation!==t.disable&&void 0!==this.lastAngle_){var _=u-this.lastAngle_;(0,o.rotateWithoutConstraints)(h,h.getRotation()-_)}if(this.lastAngle_=u,void 0!==this.lastMagnitude_){var c=this.lastMagnitude_*(h.getResolution()/d);(0,o.zoomWithoutConstraints)(h,c)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/d),this.lastMagnitude_=d}},a.prototype.handleUpEvent=function(t){if(!(0,i.mouseOnly)(t))return!0;var n=t.map.getView();n.setHint(e.default.INTERACTING,-1);var a=this.lastScaleDelta_-1;return(0,o.rotate)(n,n.getRotation()),(0,o.zoom)(n,n.getResolution(),void 0,this.duration_,a),this.lastScaleDelta_=0,!1},a.prototype.handleDownEvent=function(t){return!!(0,i.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(e.default.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},a}(n.default),r=s;exports.default=r;
},{"../rotationconstraint.js":"9EKd","../ViewHint.js":"cuLW","../events/condition.js":"YcID","./Interaction.js":"jB2p","./Pointer.js":"dnA2"}],"mYW9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=h,exports.default=void 0;var e=require("./asserts.js"),t=require("./events.js"),r=s(require("./events/EventType.js")),n=i(require("./Object.js"));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;var t=o();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=e[i]}}return r.default=e,t&&t.set(e,r),r}function s(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function o(r){if(e.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,(0,t.listen)(this,(0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),r)if("function"==typeof r.getSimplifiedGeometry){var o=r;this.setGeometry(o)}else{var i=r;this.setProperties(i)}}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.clone=function(){var e=new o(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e},o.prototype.getGeometry=function(){return this.get(this.geometryName_)},o.prototype.getId=function(){return this.id_},o.prototype.getGeometryName=function(){return this.geometryName_},o.prototype.getStyle=function(){return this.style_},o.prototype.getStyleFunction=function(){return this.styleFunction_},o.prototype.handleGeometryChange_=function(){this.changed()},o.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,t.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,t.listen)(e,r.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},o.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},o.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?h(e):void 0,this.changed()},o.prototype.setId=function(e){this.id_=e,this.changed()},o.prototype.setGeometryName=function(e){(0,t.unlisten)(this,(0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=e,(0,t.listen)(this,(0,n.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},o}(n.default);function h(t){return"function"==typeof t?t:(Array.isArray(t)?r=t:((0,e.assert)("function"==typeof t.getZIndex,41),r=[t]),function(){return r});var r}var a=y;exports.default=a;
},{"./asserts.js":"fLG6","./events.js":"55Uq","./events/EventType.js":"C8cu","./Object.js":"PhPh"}],"AyCw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=i(require("./GeometryType.js")),r=i(require("./SimpleGeometry.js")),o=require("./flat/deflate.js");function i(t){return t&&t.__esModule?t:{default:t}}var s=function(r){function i(t,e,o){if(r.call(this),void 0!==o&&void 0===e)this.setFlatCoordinates(o,t);else{var i=e||0;this.setCenterAndRadius(t,i,o)}}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i.prototype.clone=function(){return new i(this.flatCoordinates.slice(),void 0,this.layout)},i.prototype.closestPointXY=function(t,e,r,o){var i=this.flatCoordinates,s=t-i[0],n=e-i[1],a=s*s+n*n;if(a<o){if(0===a)for(var d=0;d<this.stride;++d)r[d]=i[d];else{var u=this.getRadius()/Math.sqrt(a);r[0]=i[0]+u*s,r[1]=i[1]+u*n;for(var f=2;f<this.stride;++f)r[f]=i[f]}return r.length=this.stride,a}return o},i.prototype.containsXY=function(t,e){var r=this.flatCoordinates,o=t-r[0],i=e-r[1];return o*o+i*i<=this.getRadiusSquared_()},i.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},i.prototype.computeExtent=function(e){var r=this.flatCoordinates,o=r[this.stride]-r[0];return(0,t.createOrUpdate)(r[0]-o,r[1]-o,r[0]+o,r[1]+o,e)},i.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},i.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},i.prototype.getType=function(){return e.default.CIRCLE},i.prototype.intersectsExtent=function(e){var r=this.getExtent();if((0,t.intersects)(e,r)){var o=this.getCenter();return e[0]<=o[0]&&e[2]>=o[0]||(e[1]<=o[1]&&e[3]>=o[1]||(0,t.forEachCorner)(e,this.intersectsCoordinate,this))}return!1},i.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+r;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},i.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,s=(0,o.deflateCoordinate)(i,0,t,this.stride);i[s++]=i[0]+e;for(var n=1,a=this.stride;n<a;++n)i[s++]=i[n];i.length=s,this.changed()},i.prototype.getCoordinates=function(){return null},i.prototype.setCoordinates=function(t,e){},i.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},i}(r.default);s.prototype.transform;var n=s;exports.default=n;
},{"../extent.js":"QDir","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/deflate.js":"1FNh"}],"rDTq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a){var f=NaN,s=NaN,o=(i-t)/l;if(1===o)f=n[t],s=n[t+1];else if(2==o)f=(1-u)*n[t]+u*n[t+l],s=(1-u)*n[t+1]+u*n[t+l+1];else if(0!==o){for(var v=n[t],c=n[t+1],p=0,h=[0],g=t+l;g<i;g+=l){var d=n[g],x=n[g+1];p+=Math.sqrt((d-v)*(d-v)+(x-c)*(x-c)),h.push(p),v=d,c=x}var M=u*p,N=(0,r.binarySearch)(h,M);if(N<0){var j=(M-h[-N-2])/(h[-N-1]-h[-N-2]),q=t+(-N-2)*l;f=(0,e.lerp)(n[q],n[q+l],j),s=(0,e.lerp)(n[q+1],n[q+l+1],j)}else f=n[t+N*l],s=n[t+N*l+1]}return a?(a[0]=f,a[1]=s,a):[f,s]}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,s=t/i;f<s;){var o=f+s>>1;l<r[(o+1)*i-1]?s=o:f=o+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var s=0,o=n.length;s<o;++s){var v=n[s];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"luEr","../../math.js":"B96G"}],"ZZrx":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"DfxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=p(require("./GeometryLayout.js")),o=p(require("./GeometryType.js")),s=p(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),n=require("./flat/deflate.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js"),d=require("./flat/length.js"),f=require("./flat/segments.js"),u=require("./flat/simplify.js");function p(t){return t&&t.__esModule?t:{default:t}}var c=function(s){function p(t,e){s.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}return s&&(p.__proto__=s),p.prototype=Object.create(s&&s.prototype),p.prototype.constructor=p,p.prototype.appendCoordinate=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},p.prototype.clone=function(){return new p(this.flatCoordinates.slice(),this.layout)},p.prototype.closestPointXY=function(t,i,o,s){return s<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,o,s))},p.prototype.forEachSegment=function(t){return(0,f.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.getCoordinateAtM=function(t,e){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM)return null;var o=void 0!==e&&e;return(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,o)},p.prototype.getCoordinates=function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getCoordinateAt=function(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},p.prototype.getLength=function(){return(0,d.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},p.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},p.prototype.getSimplifiedGeometryInternal=function(t){var e=[];return e.length=(0,u.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new p(e,i.default.XY)},p.prototype.getType=function(){return o.default.LINE_STRING},p.prototype.intersectsExtent=function(t){return(0,h.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},p.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},p}(s.default),C=c;exports.default=C;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"1Utv","./GeometryType.js":"lmV0","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","./flat/deflate.js":"1FNh","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/length.js":"ZZrx","./flat/segments.js":"2U8i","./flat/simplify.js":"IEpt"}],"4fbC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=f(require("./GeometryLayout.js")),s=f(require("./GeometryType.js")),r=f(require("./LineString.js")),n=f(require("./SimpleGeometry.js")),o=require("./flat/closest.js"),a=require("./flat/deflate.js"),l=require("./flat/inflate.js"),d=require("./flat/interpolate.js"),h=require("./flat/intersectsextent.js"),u=require("./flat/simplify.js");function f(t){return t&&t.__esModule?t:{default:t}}var p=function(n){function f(e,i,s){if(n.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&s)this.setFlatCoordinates(i,e),this.ends_=s;else{for(var r=this.getLayout(),o=e,a=[],l=[],d=0,h=o.length;d<h;++d){var u=o[d];0===d&&(r=u.getLayout()),(0,t.extend)(a,u.getFlatCoordinates()),l.push(a.length)}this.setFlatCoordinates(r,a),this.ends_=l}}return n&&(f.__proto__=n),f.prototype=Object.create(n&&n.prototype),f.prototype.constructor=f,f.prototype.appendLineString=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},f.prototype.clone=function(){return new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},f.prototype.closestPointXY=function(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,s,r))},f.prototype.getCoordinateAtM=function(t,e,s){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,n=void 0!==s&&s;return(0,d.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},f.prototype.getCoordinates=function(){return(0,l.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)},f.prototype.getEnds=function(){return this.ends_},f.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new r.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},f.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[],n=0,o=0,a=e.length;o<a;++o){var l=e[o],d=new r.default(t.slice(n,l),i);s.push(d),n=l}return s},f.prototype.getFlatMidpoints=function(){for(var e=[],i=this.flatCoordinates,s=0,r=this.ends_,n=this.stride,o=0,a=r.length;o<a;++o){var l=r[o],h=(0,d.interpolatePoint)(i,s,l,n,.5);(0,t.extend)(e,h),s=l}return e},f.prototype.getSimplifiedGeometryInternal=function(t){var e=[],s=[];return e.length=(0,u.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,s),new f(e,i.default.XY,s)},f.prototype.getType=function(){return s.default.MULTI_LINE_STRING},f.prototype.intersectsExtent=function(t){return(0,h.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)},f.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,a.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},f}(n.default),y=p;exports.default=y;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"1Utv","./GeometryType.js":"lmV0","./LineString.js":"DfxW","./SimpleGeometry.js":"pnrv","./flat/closest.js":"rMra","./flat/deflate.js":"1FNh","./flat/inflate.js":"znXl","./flat/interpolate.js":"rDTq","./flat/intersectsextent.js":"GZir","./flat/simplify.js":"IEpt"}],"dNu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),r=l(require("./GeometryType.js")),o=l(require("./Point.js")),i=l(require("./SimpleGeometry.js")),s=require("./flat/deflate.js"),n=require("./flat/inflate.js"),a=require("../math.js");function l(t){return t&&t.__esModule?t:{default:t}}var d=function(i){function l(t,e){i.call(this),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}return i&&(l.__proto__=i),l.prototype=Object.create(i&&i.prototype),l.prototype.constructor=l,l.prototype.appendPoint=function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},l.prototype.clone=function(){return new l(this.flatCoordinates.slice(),this.layout)},l.prototype.closestPointXY=function(t,r,o,i){if(i<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,r))return i;for(var s=this.flatCoordinates,n=this.stride,l=0,d=s.length;l<d;l+=n){var u=(0,a.squaredDistance)(t,r,s[l],s[l+1]);if(u<i){i=u;for(var f=0;f<n;++f)o[f]=s[l+f];o.length=n}}return i},l.prototype.getCoordinates=function(){return(0,n.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new o.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},l.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,i=[],s=0,n=t.length;s<n;s+=r){var a=new o.default(t.slice(s,s+r),e);i.push(a)}return i},l.prototype.getType=function(){return r.default.MULTI_POINT},l.prototype.intersectsExtent=function(t){for(var r=this.flatCoordinates,o=this.stride,i=0,s=r.length;i<s;i+=o){var n=r[i],a=r[i+1];if((0,e.containsXY)(t,n,a))return!0}return!1},l.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},l}(i.default),u=d;exports.default=u;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryType.js":"lmV0","./Point.js":"gLcY","./SimpleGeometry.js":"pnrv","./flat/deflate.js":"1FNh","./flat/inflate.js":"znXl","../math.js":"B96G"}],"VjQP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"QDir"}],"6ouh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=y(require("./GeometryLayout.js")),s=y(require("./GeometryType.js")),r=y(require("./MultiPoint.js")),n=y(require("./Polygon.js")),o=y(require("./SimpleGeometry.js")),a=require("./flat/area.js"),l=require("./flat/center.js"),h=require("./flat/closest.js"),d=require("./flat/contains.js"),u=require("./flat/deflate.js"),f=require("./flat/inflate.js"),g=require("./flat/interiorpoint.js"),p=require("./flat/intersectsextent.js"),_=require("./flat/orient.js"),c=require("./flat/simplify.js");function y(t){return t&&t.__esModule?t:{default:t}}var v=function(o){function y(e,i,s){if(o.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!s&&!Array.isArray(e[0])){for(var r=this.getLayout(),n=e,a=[],l=[],h=0,d=n.length;h<d;++h){var u=n[h];0===h&&(r=u.getLayout());for(var f=a.length,g=u.getEnds(),p=0,_=g.length;p<_;++p)g[p]+=f;(0,t.extend)(a,u.getFlatCoordinates()),l.push(g)}i=r,e=a,s=l}void 0!==i&&s?(this.setFlatCoordinates(i,e),this.endss_=s):this.setCoordinates(e,i)}return o&&(y.__proto__=o),y.prototype=Object.create(o&&o.prototype),y.prototype.constructor=y,y.prototype.appendPolygon=function(e){var i;if(this.flatCoordinates){var s=this.flatCoordinates.length;(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates());for(var r=0,n=(i=e.getEnds().slice()).length;r<n;++r)i[r]+=s}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()},y.prototype.clone=function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();return new y(this.flatCoordinates.slice(),this.layout,e)},y.prototype.closestPointXY=function(t,i,s,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,h.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,h.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,s,r))},y.prototype.containsXY=function(t,e){return(0,d.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},y.prototype.getArea=function(){return(0,a.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},y.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,_.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)},y.prototype.getEndss=function(){return this.endss_},y.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,l.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,g.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},y.prototype.getInteriorPoints=function(){return new r.default(this.getFlatInteriorPoints().slice(),i.default.XYM)},y.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,_.linearRingsAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,_.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},y.prototype.getSimplifiedGeometryInternal=function(t){var e=[],s=[];return e.length=(0,c.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,s),new y(e,i.default.XY,s)},y.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var s=this.endss_[t].slice(),r=s[s.length-1];if(0!==e)for(var o=0,a=s.length;o<a;++o)s[o]-=e;return new n.default(this.flatCoordinates.slice(e,r),this.layout,s)},y.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[],r=0,o=0,a=i.length;o<a;++o){var l=i[o].slice(),h=l[l.length-1];if(0!==r)for(var d=0,u=l.length;d<u;++d)l[d]-=r;var f=new n.default(e.slice(r,h),t,l);s.push(f),r=h}return s},y.prototype.getType=function(){return s.default.MULTI_POLYGON},y.prototype.intersectsExtent=function(t){return(0,p.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},y.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,u.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var s=i[i.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()},y}(o.default),C=v;exports.default=C;
},{"../array.js":"luEr","../extent.js":"QDir","./GeometryLayout.js":"1Utv","./GeometryType.js":"lmV0","./MultiPoint.js":"dNu5","./Polygon.js":"6Nww","./SimpleGeometry.js":"pnrv","./flat/area.js":"EOSm","./flat/center.js":"VjQP","./flat/closest.js":"rMra","./flat/contains.js":"dzdN","./flat/deflate.js":"1FNh","./flat/inflate.js":"znXl","./flat/interiorpoint.js":"UDvN","./flat/intersectsextent.js":"GZir","./flat/orient.js":"2/8c","./flat/simplify.js":"IEpt"}],"8+bQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"};exports.default=e;
},{}],"oqAD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"image",VECTOR:"vector"};exports.default=e;
},{}],"eucy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=a,exports.asArray=i,exports.normalize=p,exports.toString=c,exports.fromString=void 0;var r=require("./asserts.js"),e=require("./math.js"),t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$/i;function a(r){return"string"==typeof r?r:c(r)}function s(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}var o=function(){var r={},e=0;return function(t){var n;if(r.hasOwnProperty(t))n=r[t];else{if(e>=1024){var a=0;for(var s in r)0==(3&a++)&&(delete r[s],--e)}n=u(t),r[t]=n,++e}return n}}();function i(r){return Array.isArray(r)?r:o(r)}function u(e){var a,o,i,u,c;if(n.exec(e)&&(e=s(e)),t.exec(e)){var l,f=e.length-1;l=f<=4?1:2;var v=4===f||8===f;a=parseInt(e.substr(1+0*l,l),16),o=parseInt(e.substr(1+1*l,l),16),i=parseInt(e.substr(1+2*l,l),16),u=v?parseInt(e.substr(1+3*l,l),16):255,1==l&&(a=(a<<4)+a,o=(o<<4)+o,i=(i<<4)+i,v&&(u=(u<<4)+u)),c=[a,o,i,u/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,e.clamp)(r[0]+.5|0,0,255),r[1]=(0,e.clamp)(r[1]+.5|0,0,255),r[2]=(0,e.clamp)(r[2]+.5|0,0,255),r[3]=(0,e.clamp)(r[3],0,1),r}function c(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var n=r[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===r[3]?1:r[3])+")"}exports.fromString=o;
},{"./asserts.js":"fLG6","./math.js":"B96G"}],"V5+X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"eucy"}],"u3k+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3};exports.default=e;
},{}],"oMDz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=s(require("../events/Target.js")),r=s(require("../events/EventType.js"));function s(e){return e&&e.__esModule?e:{default:e}}var n=function(t){function s(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},s.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(r.default.CLEAR)},s.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},s.prototype.forEach=function(e,t){for(var r=this.oldest_;r;)e.call(t,r.value_,r.key_,this),r=r.newer},s.prototype.get=function(t){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)},s.prototype.remove=function(t){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},s.prototype.getCount=function(){return this.count_},s.prototype.getKeys=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.key_;return t},s.prototype.getValues=function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.value_;return t},s.prototype.peekLast=function(){return this.oldest_.value_},s.prototype.peekLastKey=function(){return this.oldest_.key_},s.prototype.peekFirstKey=function(){return this.newest_.key_},s.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},s.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},s.prototype.set=function(t,r){(0,e.assert)(!(t in this.entries_),16);var s={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[t]=s,++this.count_},s.prototype.setSize=function(e){this.highWaterMark=e},s.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},s}(t.default),o=n;exports.default=o;
},{"../asserts.js":"fLG6","../events/Target.js":"8CR4","../events/EventType.js":"C8cu"}],"iAG7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=j,exports.rotateAtOffset=w,exports.drawImage=A,exports.resetTransform=exports.measureTextHeight=exports.checkFont=exports.textHeights=exports.checkedFonts=exports.labelCache=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var e=require("../css.js"),t=require("../dom.js"),r=require("../obj.js"),a=s(require("../structs/LRUCache.js")),o=require("../transform.js");function s(e){return e&&e.__esModule?e:{default:e}}var n="10px sans-serif";exports.defaultFont=n;var l=[0,0,0,1];exports.defaultFillStyle=l;var i="round";exports.defaultLineCap=i;var u=[];exports.defaultLineDash=u;var f=0;exports.defaultLineDashOffset=f;var p="round";exports.defaultLineJoin=p;var d=10;exports.defaultMiterLimit=d;var x=[0,0,0,1];exports.defaultStrokeStyle=x;var v="center";exports.defaultTextAlign=v;var c="middle";exports.defaultTextBaseline=c;var h=[0,0,0,0];exports.defaultPadding=h;var m=1;exports.defaultLineWidth=m;var g=new a.default;exports.labelCache=g;var y={};exports.checkedFonts=y;var T=null,L={};exports.textHeights=L;var b=function(){var t,a,o=60,s=y,n="32px ",l=["monospace","serif"],i=l.length,u="wmytzilWMYTZIL@#/&?$%10";function f(e){for(var t=C(),r=100;r<=700;r+=300){for(var o=r+" ",s=!0,f=0;f<i;++f){var p=l[f];if(t.font=o+n+p,a=t.measureText(u).width,e!=p){t.font=o+n+e+","+p;var d=t.measureText(u).width;s=s&&d!=a}}if(s)return!0}return!1}function p(){var e=!0;for(var a in s)s[a]<o&&(f(a)?(s[a]=o,(0,r.clear)(L),T=null,g.clear()):(++s[a],e=!1));e&&(clearInterval(t),t=void 0)}return function(r){var a=(0,e.getFontFamilies)(r);if(a)for(var n=0,l=a.length;n<l;++n){var i=a[n];i in s||(s[i]=o,f(i)||(s[i]=0,void 0===t&&(t=setInterval(p,32))))}}}();function C(){return T||(T=(0,t.createCanvasContext2D)(1,1)),T}exports.checkFont=b;var F=function(){var e,t=L;return function(r){var a=t[r];return null==a&&(e||((e=document.createElement("span")).textContent="M",e.style.margin=e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=r,document.body.appendChild(e),a=t[r]=e.offsetHeight,document.body.removeChild(e)),a}}();function j(e,t){var r=C();return e!=r.font&&(r.font=e),r.measureText(t).width}function w(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}exports.measureTextHeight=F;var k=(0,o.create)();function A(e,t,r,a,o,s,n,l,i,u,f){var p;1!=r&&(p=e.globalAlpha,e.globalAlpha=p*r),t&&e.setTransform.apply(e,t),e.drawImage(a,o,s,n,l,i,u,n*f,l*f),p&&(e.globalAlpha=p),t&&e.setTransform.apply(e,k)}exports.resetTransform=k;
},{"../css.js":"HgMV","../dom.js":"Xno5","../obj.js":"mH6q","../structs/LRUCache.js":"oMDz","../transform.js":"P4eA"}],"S8ow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};e.prototype.clone=function(){return new e({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getOpacity=function(){return this.opacity_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.getRotation=function(){return this.rotation_},e.prototype.getScale=function(){return this.scale_},e.prototype.getSnapToPixel=function(){return!1},e.prototype.getAnchor=function(){return(0,t.abstract)()},e.prototype.getImage=function(e){return(0,t.abstract)()},e.prototype.getHitDetectionImage=function(e){return(0,t.abstract)()},e.prototype.getImageState=function(){return(0,t.abstract)()},e.prototype.getImageSize=function(){return(0,t.abstract)()},e.prototype.getHitDetectionImageSize=function(){return(0,t.abstract)()},e.prototype.getOrigin=function(){return(0,t.abstract)()},e.prototype.getSize=function(){return(0,t.abstract)()},e.prototype.setOpacity=function(t){this.opacity_=t},e.prototype.setRotateWithView=function(t){this.rotateWithView_=t},e.prototype.setRotation=function(t){this.rotation_=t},e.prototype.setScale=function(t){this.scale_=t},e.prototype.setSnapToPixel=function(t){},e.prototype.listenImageChange=function(e,o){return(0,t.abstract)()},e.prototype.load=function(){(0,t.abstract)()},e.prototype.unlistenImageChange=function(e,o){(0,t.abstract)()};var o=e;exports.default=o;
},{"../util.js":"KniQ"}],"il3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../color.js"),i=require("../colorlike.js"),e=require("../dom.js"),s=require("../has.js"),a=r(require("../ImageState.js")),n=require("../render/canvas.js"),o=r(require("./Image.js"));function r(t){return t&&t.__esModule?t:{default:t}}var h=function(o){function r(t){var i=void 0!==t.rotateWithView&&t.rotateWithView;o.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_)}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.clone=function(){var t=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},r.prototype.getAnchor=function(){return this.anchor_},r.prototype.getAngle=function(){return this.angle_},r.prototype.getFill=function(){return this.fill_},r.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},r.prototype.getImage=function(t){return this.canvas_},r.prototype.getImageSize=function(){return this.imageSize_},r.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},r.prototype.getImageState=function(){return a.default.LOADED},r.prototype.getOrigin=function(){return this.origin_},r.prototype.getPoints=function(){return this.points_},r.prototype.getRadius=function(){return this.radius_},r.prototype.getRadius2=function(){return this.radius2_},r.prototype.getSize=function(){return this.size_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.listenImageChange=function(t,i){},r.prototype.load=function(){},r.prototype.unlistenImageChange=function(t,i){},r.prototype.render_=function(t){var a,o,r="",h="",l=0,u=null,_=0,c=0;this.stroke_&&(null===(o=this.stroke_.getColor())&&(o=n.defaultStrokeStyle),o=(0,i.asColorLike)(o),void 0===(c=this.stroke_.getWidth())&&(c=n.defaultLineWidth),u=this.stroke_.getLineDash(),_=this.stroke_.getLineDashOffset(),s.CANVAS_LINE_DASH||(u=null,_=0),void 0===(h=this.stroke_.getLineJoin())&&(h=n.defaultLineJoin),void 0===(r=this.stroke_.getLineCap())&&(r=n.defaultLineCap),void 0===(l=this.stroke_.getMiterLimit())&&(l=n.defaultMiterLimit));var d=2*(this.radius_+c)+1,g={strokeStyle:o,strokeWidth:c,size:d,lineCap:r,lineDash:u,lineDashOffset:_,lineJoin:h,miterLimit:l};if(void 0===t){var f=(0,e.createCanvasContext2D)(d,d);this.canvas_=f.canvas,a=d=this.canvas_.width,this.draw_(g,f,0,0),this.createHitDetectionCanvas_(g)}else{d=Math.round(d);var p,v=!this.fill_;v&&(p=this.drawHitDetectionCanvas_.bind(this,g));var k=this.getChecksum(),m=t.add(k,d,d,this.draw_.bind(this,g),p);this.canvas_=m.image,this.origin_=[m.offsetX,m.offsetY],a=m.image.width,v?(this.hitDetectionCanvas_=m.hitImage,this.hitDetectionImageSize_=[m.hitImage.width,m.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[a,a])}this.anchor_=[d/2,d/2],this.size_=[d,d],this.imageSize_=[a,a]},r.prototype.draw_=function(t,e,s,a){var o,r,h;e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.beginPath();var l=this.points_;if(l===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(l*=2),o=0;o<=l;o++)r=2*o*Math.PI/l-Math.PI/2+this.angle_,h=o%2==0?this.radius_:u,e.lineTo(t.size/2+h*Math.cos(r),t.size/2+h*Math.sin(r))}if(this.fill_){var _=this.fill_.getColor();null===_&&(_=n.defaultFillStyle),e.fillStyle=(0,i.asColorLike)(_),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},r.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var i=(0,e.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=i.canvas,this.drawHitDetectionCanvas_(t,i,0,0)}},r.prototype.drawHitDetectionCanvas_=function(i,e,s,a){e.setTransform(1,0,0,1,0,0),e.translate(s,a),e.beginPath();var o=this.points_;if(o===1/0)e.arc(i.size/2,i.size/2,this.radius_,0,2*Math.PI,!0);else{var r,h,l,u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(o*=2),r=0;r<=o;r++)l=2*r*Math.PI/o-Math.PI/2+this.angle_,h=r%2==0?this.radius_:u,e.lineTo(i.size/2+h*Math.cos(l),i.size/2+h*Math.sin(l))}e.fillStyle=(0,t.asString)(n.defaultFillStyle),e.fill(),this.stroke_&&(e.strokeStyle=i.strokeStyle,e.lineWidth=i.strokeWidth,i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),e.stroke()),e.closePath()},r.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",i=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||i!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var e="r"+t+i+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[e,t,i,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},r}(o.default),l=h;exports.default=l;
},{"../color.js":"eucy","../colorlike.js":"V5+X","../dom.js":"Xno5","../has.js":"f3Nv","../ImageState.js":"u3k+","../render/canvas.js":"iAG7","./Image.js":"S8ow"}],"cdf1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function e(e){var r=e||{};t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,atlasManager:r.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(t.default),a=r;exports.default=a;
},{"./RegularShape.js":"il3X"}],"AFcg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("../util.js"),r=require("../color.js"),t=function(o){var r=o||{};this.color_=void 0!==r.color?r.color:null,this.checksum_=void 0};t.prototype.clone=function(){var o=this.getColor();return new t({color:Array.isArray(o)?o.slice():o||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(o){this.color_=o,this.checksum_=void 0},t.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+(0,r.asString)(t):this.checksum_=(0,o.getUid)(this.color_):this.checksum_="f-"}return this.checksum_};var e=t;exports.default=e;
},{"../util.js":"KniQ","../color.js":"eucy"}],"TXDt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),i=function(t){var i=t||{};this.color_=void 0!==i.color?i.color:null,this.lineCap_=i.lineCap,this.lineDash_=void 0!==i.lineDash?i.lineDash:null,this.lineDashOffset_=i.lineDashOffset,this.lineJoin_=i.lineJoin,this.miterLimit_=i.miterLimit,this.width_=i.width,this.checksum_=void 0};i.prototype.clone=function(){var t=this.getColor();return new i({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},i.prototype.getColor=function(){return this.color_},i.prototype.getLineCap=function(){return this.lineCap_},i.prototype.getLineDash=function(){return this.lineDash_},i.prototype.getLineDashOffset=function(){return this.lineDashOffset_},i.prototype.getLineJoin=function(){return this.lineJoin_},i.prototype.getMiterLimit=function(){return this.miterLimit_},i.prototype.getWidth=function(){return this.width_},i.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},i.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},i.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},i.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},i.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},i.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},i.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},i.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=(0,t.getUid)(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var e=i;exports.default=e;
},{"../util.js":"KniQ"}],"1he4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=l,exports.createDefaultStyle=f,exports.createEditingStyle=d,exports.default=void 0;var e=require("../asserts.js"),t=i(require("../geom/GeometryType.js")),o=i(require("./Circle.js")),r=i(require("./Fill.js")),n=i(require("./Stroke.js"));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e||{};this.geometry_=null,this.geometryFunction_=a,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex};function l(t){var o;if("function"==typeof t)o=t;else{var r;if(Array.isArray(t))r=t;else(0,e.assert)("function"==typeof t.getZIndex,41),r=[t];o=function(){return r}}return o}u.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new u({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},u.prototype.getRenderer=function(){return this.renderer_},u.prototype.setRenderer=function(e){this.renderer_=e},u.prototype.getGeometry=function(){return this.geometry_},u.prototype.getGeometryFunction=function(){return this.geometryFunction_},u.prototype.getFill=function(){return this.fill_},u.prototype.setFill=function(e){this.fill_=e},u.prototype.getImage=function(){return this.image_},u.prototype.setImage=function(e){this.image_=e},u.prototype.getStroke=function(){return this.stroke_},u.prototype.setStroke=function(e){this.stroke_=e},u.prototype.getText=function(){return this.text_},u.prototype.setText=function(e){this.text_=e},u.prototype.getZIndex=function(){return this.zIndex_},u.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=a,this.geometry_=e},u.prototype.setZIndex=function(e){this.zIndex_=e};var s=null;function f(e,t){if(!s){var i=new r.default({color:"rgba(255,255,255,0.4)"}),l=new n.default({color:"#3399CC",width:1.25});s=[new u({image:new o.default({fill:i,stroke:l,radius:5}),fill:i,stroke:l})]}return s}function d(){var e={},i=[255,255,255,1],l=[0,153,255,1];return e[t.default.POLYGON]=[new u({fill:new r.default({color:[255,255,255,.5]})})],e[t.default.MULTI_POLYGON]=e[t.default.POLYGON],e[t.default.LINE_STRING]=[new u({stroke:new n.default({color:i,width:5})}),new u({stroke:new n.default({color:l,width:3})})],e[t.default.MULTI_LINE_STRING]=e[t.default.LINE_STRING],e[t.default.CIRCLE]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING]),e[t.default.POINT]=[new u({image:new o.default({radius:6,fill:new r.default({color:l}),stroke:new n.default({color:i,width:1.5})}),zIndex:1/0})],e[t.default.MULTI_POINT]=e[t.default.POINT],e[t.default.GEOMETRY_COLLECTION]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING],e[t.default.POINT]),e}function a(e){return e.getGeometry()}var c=u;exports.default=c;
},{"../asserts.js":"fLG6","../geom/GeometryType.js":"lmV0","./Circle.js":"cdf1","./Fill.js":"AFcg","./Stroke.js":"TXDt"}],"dflx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("../LayerType.js")),t=o(require("./Layer.js")),r=o(require("./VectorRenderType.js")),n=require("../obj.js"),i=require("../style/Style.js");function o(e){return e&&e.__esModule?e:{default:e}}var u={RENDER_ORDER:"renderOrder"},d=function(t){function o(i){var o=i||{},u=(0,n.assign)({},o);delete u.style,delete u.renderBuffer,delete u.updateWhileAnimating,delete u.updateWhileInteracting,t.call(this,u),this.declutter_=void 0!==o.declutter&&o.declutter,this.renderBuffer_=void 0!==o.renderBuffer?o.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(o.style),this.updateWhileAnimating_=void 0!==o.updateWhileAnimating&&o.updateWhileAnimating,this.updateWhileInteracting_=void 0!==o.updateWhileInteracting&&o.updateWhileInteracting,this.renderMode_=o.renderMode||r.default.VECTOR,this.type=e.default.VECTOR}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.getDeclutter=function(){return this.declutter_},o.prototype.setDeclutter=function(e){this.declutter_=e},o.prototype.getRenderBuffer=function(){return this.renderBuffer_},o.prototype.getRenderOrder=function(){return this.get(u.RENDER_ORDER)},o.prototype.getStyle=function(){return this.style_},o.prototype.getStyleFunction=function(){return this.styleFunction_},o.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},o.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},o.prototype.setRenderOrder=function(e){this.set(u.RENDER_ORDER,e)},o.prototype.setStyle=function(e){this.style_=void 0!==e?e:i.createDefaultStyle,this.styleFunction_=null===e?void 0:(0,i.toFunction)(this.style_),this.changed()},o.prototype.getRenderMode=function(){return this.renderMode_},o}(t.default);d.prototype.getSource;var l=d;exports.default=l;
},{"../LayerType.js":"8+bQ","./Layer.js":"GCgv","./VectorRenderType.js":"oqAD","../obj.js":"mH6q","../style/Style.js":"1he4"}],"AbO3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"U3JP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=s,exports.xhr=n;var e=require("./functions.js"),t=r(require("./format/FormatType.js"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,r,s,n){return function(a,o,u){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(a,o,u):e,!0),r.getType()==t.default.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var a,o=r.getType();o==t.default.JSON||o==t.default.TEXT?a=i.responseText:o==t.default.XML?(a=i.responseXML)||(a=(new DOMParser).parseFromString(i.responseText,"application/xml")):o==t.default.ARRAY_BUFFER&&(a=i.response),a?s.call(this,r.readFeatures(a,{featureProjection:u}),r.readProjection(a),r.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),i.onerror=function(){n.call(this)}.bind(this),i.send()}}function n(t,r){return s(t,r,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},e.VOID)}
},{"./functions.js":"RgA2","./format/FormatType.js":"AbO3"}],"JpXE":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function r(e){return function(t,r){var n=e.getZForResolution(r),o=e.getTileRangeForExtentAndZ(t,n),u=[],i=[n,0,0];for(i[1]=o.minX;i[1]<=o.maxX;++i[1])for(i[2]=o.minY;i[2]<=o.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=r;
},{}],"H38a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=i(require("../Object.js")),o=require("../proj.js"),r=i(require("./State.js"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function i(t){e.call(this),this.projection_=(0,o.get)(t.projection),this.attributions_=s(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:r.default.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getAttributions=function(){return this.attributions_},i.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolutions=function(){return(0,t.abstract)()},i.prototype.getState=function(){return this.state_},i.prototype.getWrapX=function(){return this.wrapX_},i.prototype.refresh=function(){this.changed()},i.prototype.setAttributions=function(t){this.attributions_=s(t),this.changed()},i.prototype.setState=function(t){this.state_=t,this.changed()},i}(e.default);function s(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var u=n;exports.default=u;
},{"../util.js":"KniQ","../Object.js":"PhPh","../proj.js":"Diht","./State.js":"iC8j"}],"s8Fc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};exports.default=e;
},{}],"+5J5":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,o=arguments[3];!function(o,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):o.quickselect=n()}(this,function(){"use strict";function t(t,o,n){var r=t[o];t[o]=t[n],t[n]=r}function o(t,o){return t<o?-1:t>o?1:0}return function(n,r,e,f,u){!function o(n,r,e,f,u){for(;f>e;){if(f-e>600){var a=f-e+1,i=r-e+1,c=Math.log(a),h=.5*Math.exp(2*c/3),s=.5*Math.sqrt(c*h*(a-h)/a)*(i-a/2<0?-1:1),l=Math.max(e,Math.floor(r-i*h/a+s)),M=Math.min(f,Math.floor(r+(a-i)*h/a+s));o(n,r,l,M,u)}var m=n[r],p=e,d=f;for(t(n,e,r),u(n[f],m)>0&&t(n,e,f);p<d;){for(t(n,p,d),p++,d--;u(n[p],m)<0;)p++;for(;u(n[d],m)>0;)d--}0===u(n[e],m)?t(n,e,d):t(n,++d,f),d<=r&&(e=d+1),r<=d&&(f=d-1)}}(n,r,e||0,f||n.length-1,u||o)}});
},{}],"y0Xa":[function(require,module,exports) {
"use strict";module.exports=i,module.exports.default=i;var t=require("quickselect");function i(t,n){if(!(this instanceof i))return new i(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function n(t,i,n){if(!n)return i.indexOf(t);for(var a=0;a<i.length;a++)if(n(t,i[a]))return a;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,a,h){h||(h=x(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var r,o=i;o<n;o++)r=t.children[o],e(h,t.leaf?a(r):r);return h}function e(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function r(t,i){return t.minX-i.minX}function o(t,i){return t.minY-i.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function m(t,i){var n=Math.max(t.minX,i.minX),a=Math.max(t.minY,i.minY),h=Math.min(t.maxX,i.maxX),e=Math.min(t.maxY,i.maxY);return Math.max(0,h-n)*Math.max(0,e-a)}function c(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function f(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function x(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,a,h,e){for(var r,o=[n,a];o.length;)(a=o.pop())-(n=o.pop())<=h||(r=n+Math.ceil((a-n)/h/2)*h,t(i,r,n,a,e),o.push(n,r,r,a))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],a=this.toBBox;if(!f(t,i))return n;for(var h,e,r,o,s=[];i;){for(h=0,e=i.children.length;h<e;h++)r=i.children[h],f(t,o=i.leaf?a(r):r)&&(i.leaf?n.push(r):c(t,o)?this._all(r,n):s.push(r));i=s.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!f(t,i))return!1;for(var a,h,e,r,o=[];i;){for(a=0,h=i.children.length;a<h;a++)if(e=i.children[a],f(t,r=i.leaf?n(e):e)){if(i.leaf||c(t,r))return!0;o.push(e)}i=o.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var h=this.data;this.data=a,a=h}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(t,i){if(!t)return this;for(var a,h,e,r,o=this.data,s=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),h=l[l.length-1],a=u.pop(),r=!0),o.leaf&&-1!==(e=n(t,o.children,i)))return o.children.splice(e,1),l.push(o),this._condense(l),this;r||o.leaf||!c(o,s)?h?(a++,o=h.children[a],r=!1):o=null:(l.push(o),u.push(a),a=0,h=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:r,compareMinY:o,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,h){var e,r=n-i+1,o=this._maxEntries;if(r<=o)return a(e=x(t.slice(i,n+1)),this.toBBox),e;h||(h=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,h-1))),(e=x([])).leaf=!1,e.height=h;var s,l,u,m,c=Math.ceil(r/o),f=c*Math.ceil(Math.sqrt(o));for(d(t,i,n,f,this.compareMinX),s=i;s<=n;s+=f)for(d(t,s,u=Math.min(s+f-1,n),c,this.compareMinY),l=s;l<=u;l+=c)m=Math.min(l+c-1,u),e.children.push(this._build(t,l,m,h-1));return a(e,this.toBBox),e},_chooseSubtree:function(t,i,n,a){for(var h,e,r,o,l,m,c,f;a.push(i),!i.leaf&&a.length-1!==n;){for(c=f=1/0,h=0,e=i.children.length;h<e;h++)l=s(r=i.children[h]),(m=u(t,r)-l)<f?(f=m,c=l<c?l:c,o=r):m===f&&l<c&&(c=l,o=r);i=o||i.children[0]}return i},_insert:function(t,i,n){var a=this.toBBox,h=n?t:a(t),r=[],o=this._chooseSubtree(h,this.data,i,r);for(o.children.push(t),e(o,h);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(h,r,i)},_split:function(t,i){var n=t[i],h=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,h);var r=this._chooseSplitIndex(n,e,h),o=x(n.children.splice(r,n.children.length-r));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,i){this.data=x([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var a,e,r,o,l,u,c,f;for(u=c=1/0,a=i;a<=n-i;a++)o=m(e=h(t,0,a,this.toBBox),r=h(t,a,n,this.toBBox)),l=s(e)+s(r),o<u?(u=o,f=a,c=l<c?l:c):o===u&&l<c&&(c=l,f=a);return f},_chooseSplitAxis:function(t,i,n){var a=t.leaf?this.compareMinX:r,h=t.leaf?this.compareMinY:o;this._allDistMargin(t,i,n,a)<this._allDistMargin(t,i,n,h)&&t.children.sort(a)},_allDistMargin:function(t,i,n,a){t.children.sort(a);var r,o,s=this.toBBox,u=h(t,0,i,s),m=h(t,n-i,n,s),c=l(u)+l(m);for(r=i;r<n-i;r++)o=t.children[r],e(u,t.leaf?s(o):o),c+=l(u);for(r=n-i-1;r>=i;r--)o=t.children[r],e(m,t.leaf?s(o):o),c+=l(m);return c},_adjustParentBBoxes:function(t,i,n){for(var a=n;a>=0;a--)e(i[a],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};
},{"quickselect":"+5J5"}],"MiUH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=n(require("rbush")),r=require("../extent.js"),i=require("../obj.js");function n(t){return t&&t.__esModule?t:{default:t}}var o=function(t){this.rbush_=(0,e.default)(t,void 0),this.items_={}};o.prototype.insert=function(e,r){var i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:r};this.rbush_.insert(i),this.items_[(0,t.getUid)(r)]=i},o.prototype.load=function(e,r){for(var i=new Array(r.length),n=0,o=r.length;n<o;n++){var s=e[n],u=r[n],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:u};i[n]=a,this.items_[(0,t.getUid)(u)]=a}this.rbush_.load(i)},o.prototype.remove=function(e){var r=(0,t.getUid)(e),i=this.items_[r];return delete this.items_[r],null!==this.rbush_.remove(i)},o.prototype.update=function(e,i){var n=this.items_[(0,t.getUid)(i)],o=[n.minX,n.minY,n.maxX,n.maxY];(0,r.equals)(o,e)||(this.remove(i),this.insert(e,i))},o.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},o.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},o.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},o.prototype.forEachInExtent=function(t,e,r){return this.forEach_(this.getInExtent(t),e,r)},o.prototype.forEach_=function(t,e,r){for(var i,n=0,o=t.length;n<o;n++)if(i=e.call(r,t[n]))return i;return i},o.prototype.isEmpty=function(){return(0,i.isEmpty)(this.items_)},o.prototype.clear=function(){this.rbush_.clear(),this.items_={}},o.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,r.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},o.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]};var s=o;exports.default=s;
},{"../util.js":"KniQ","rbush":"y0Xa","../extent.js":"QDir","../obj.js":"mH6q"}],"ZS12":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=require("../util.js"),t=E(require("../Collection.js")),r=E(require("../CollectionEventType.js")),n=E(require("../ObjectEventType.js")),i=require("../array.js"),s=require("../asserts.js"),o=require("../events.js"),a=E(require("../events/Event.js")),u=E(require("../events/EventType.js")),h=require("../extent.js"),d=require("../featureloader.js"),l=require("../functions.js"),f=require("../loadingstrategy.js"),_=require("../obj.js"),c=E(require("./Source.js")),p=E(require("./State.js")),v=E(require("./VectorEventType.js")),y=E(require("../structs/RBush.js"));function E(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(t,r){e.call(this,t),this.feature=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(a.default);exports.VectorSourceEvent=g;var I=function(a){function c(e){var r=e||{};a.call(this,{attributions:r.attributions,projection:void 0,state:p.default.READY,wrapX:void 0===r.wrapX||r.wrapX}),this.loader_=l.VOID,this.format_=r.format,this.overlaps_=null==r.overlaps||r.overlaps,this.url_=r.url,void 0!==r.loader?this.loader_=r.loader:void 0!==this.url_&&((0,s.assert)(this.format_,7),this.loader_=(0,d.xhr)(this.url_,this.format_)),this.strategy_=void 0!==r.strategy?r.strategy:f.all;var n,i,o=void 0===r.useSpatialIndex||r.useSpatialIndex;this.featuresRtree_=o?new y.default:null,this.loadedExtentsRtree_=new y.default,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(r.features)?i=r.features:r.features&&(i=(n=r.features).getArray()),o||void 0!==n||(n=new t.default(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}return a&&(c.__proto__=a),c.prototype=Object.create(a&&a.prototype),c.prototype.constructor=c,c.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},c.prototype.addFeatureInternal=function(t){var r=(0,e.getUid)(t);if(this.addToIndex_(r,t)){this.setupChangeEvents_(r,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new g(v.default.ADDFEATURE,t))}},c.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[(0,o.listen)(t,u.default.CHANGE,this.handleFeatureChange_,this),(0,o.listen)(t,n.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]},c.prototype.addToIndex_=function(e,t){var r=!0,n=t.getId();return void 0!==n?n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t:((0,s.assert)(!(e in this.undefIdIndex_),30),this.undefIdIndex_[e]=t),r},c.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},c.prototype.addFeaturesInternal=function(t){for(var r=[],n=[],i=[],s=0,o=t.length;s<o;s++){var a=t[s],u=(0,e.getUid)(a);this.addToIndex_(u,a)&&n.push(a)}for(var h=0,d=n.length;h<d;h++){var l=n[h],f=(0,e.getUid)(l);this.setupChangeEvents_(f,l);var _=l.getGeometry();if(_){var c=_.getExtent();r.push(c),i.push(l)}else this.nullGeometryFeatures_[f]=l}this.featuresRtree_&&this.featuresRtree_.load(r,i);for(var p=0,y=n.length;p<y;p++)this.dispatchEvent(new g(v.default.ADDFEATURE,n[p]))},c.prototype.bindFeaturesCollection_=function(e){var t=!1;(0,o.listen)(this,v.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),(0,o.listen)(this,v.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),(0,o.listen)(e,r.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)},this),(0,o.listen)(e,r.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)},this),this.featuresCollection_=e},c.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(o.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var n=new g(v.default.CLEAR);this.dispatchEvent(n),this.changed()},c.prototype.forEachFeature=function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},c.prototype.forEachFeatureAtCoordinateDirect=function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})},c.prototype.forEachFeatureInExtent=function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},c.prototype.forEachFeatureIntersectingExtent=function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})},c.prototype.getFeaturesCollection=function(){return this.featuresCollection_},c.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,_.isEmpty)(this.nullGeometryFeatures_)||(0,i.extend)(e,(0,_.getValues)(this.nullGeometryFeatures_))),e},c.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},c.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_.getInExtent(e)},c.prototype.getClosestFeatureToCoordinate=function(e,t){var r=e[0],n=e[1],i=null,s=[NaN,NaN],o=1/0,a=[-1/0,-1/0,1/0,1/0],u=t||l.TRUE;return this.featuresRtree_.forEachInExtent(a,function(e){if(u(e)){var t=e.getGeometry(),h=o;if((o=t.closestPointXY(r,n,s,o))<h){i=e;var d=Math.sqrt(o);a[0]=r-d,a[1]=n-d,a[2]=r+d,a[3]=n+d}}}),i},c.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},c.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},c.prototype.getFormat=function(){return this.format_},c.prototype.getOverlaps=function(){return this.overlaps_},c.prototype.getUrl=function(){return this.url_},c.prototype.handleFeatureChange_=function(t){var r=t.target,n=(0,e.getUid)(r),i=r.getGeometry();if(i){var s=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(s,r)):this.featuresRtree_&&this.featuresRtree_.update(s,r)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);var o=r.getId();if(void 0!==o){var a=o.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[a]=r):this.idIndex_[a]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[a]=r)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(r),this.undefIdIndex_[n]=r);this.changed(),this.dispatchEvent(new g(v.default.CHANGEFEATURE,r))},c.prototype.hasFeature=function(t){var r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t)in this.undefIdIndex_},c.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,_.isEmpty)(this.nullGeometryFeatures_)},c.prototype.loadFeatures=function(e,t,r){var n=this,i=this.loadedExtentsRtree_,s=this.strategy_(e,t);this.loading=!1;for(var o=function(e,o){var a=s[e];i.forEachInExtent(a,function(e){return(0,h.containsExtent)(e.extent,a)})||(n.loader_.call(n,a,t,r),i.insert(a,{extent:a.slice()}),n.loading=n.loader_!==l.VOID)},a=0,u=s.length;a<u;++a)o(a)},c.prototype.removeLoadedExtent=function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,h.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)},c.prototype.removeFeature=function(t){var r=(0,e.getUid)(t);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},c.prototype.removeFeatureInternal=function(t){var r=(0,e.getUid)(t);this.featureChangeKeys_[r].forEach(o.unlistenByKey),delete this.featureChangeKeys_[r];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[r],this.dispatchEvent(new g(v.default.REMOVEFEATURE,t))},c.prototype.removeFromIdIndex_=function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t},c.prototype.setLoader=function(e){this.loader_=e},c}(c.default),x=I;exports.default=x;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../ObjectEventType.js":"zehl","../array.js":"luEr","../asserts.js":"fLG6","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../extent.js":"QDir","../featureloader.js":"U3JP","../functions.js":"RgA2","../loadingstrategy.js":"JpXE","../obj.js":"mH6q","./Source.js":"H38a","./State.js":"iC8j","./VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH"}],"5e7i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=R,exports.createBox=M,exports.default=void 0;var t=L(require("../events/EventType.js")),e=L(require("../Feature.js")),i=L(require("../MapBrowserEventType.js")),s=L(require("../MapBrowserPointerEvent.js")),o=require("../Object.js"),r=require("../coordinate.js"),n=require("../events.js"),h=L(require("../events/Event.js")),a=require("../events/condition.js"),d=require("../extent.js"),u=require("../functions.js"),_=L(require("../geom/Circle.js")),l=L(require("../geom/GeometryType.js")),c=L(require("../geom/LineString.js")),f=L(require("../geom/MultiLineString.js")),p=L(require("../geom/MultiPoint.js")),y=L(require("../geom/MultiPolygon.js")),g=require("../pointer/MouseSource.js"),m=L(require("../geom/Point.js")),C=N(require("../geom/Polygon.js")),k=L(require("./Pointer.js")),P=L(require("./Property.js")),v=L(require("../layer/Vector.js")),T=L(require("../source/Vector.js")),O=require("../style/Style.js");function w(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return w=function(){return t},t}function N(t){if(t&&t.__esModule)return t;var e=w();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=s?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]}}return i.default=t,e&&e.set(t,i),i}function L(t){return t&&t.__esModule?t:{default:t}}var I={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},E={DRAWSTART:"drawstart",DRAWEND:"drawend"},D=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.default),G=function(h){function d(t){var e=t;e.stopDown||(e.stopDown=u.FALSE),h.call(this,e),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=S(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===I.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:u.TRUE;var i=t.geometryFunction;if(!i)if(this.type_===l.default.CIRCLE)i=function(t,e){var i=e||new _.default([NaN,NaN]),s=(0,r.squaredDistance)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(s)),i};else{var s,d=this.mode_;d===I.POINT?s=m.default:d===I.LINE_STRING?s=c.default:d===I.POLYGON&&(s=C.default),i=function(t,e){var i=e;return i?d===I.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new s(t),i}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new v.default({source:new T.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:F(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:a.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=a.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:a.shiftKeyOnly,(0,n.listen)(this,(0,o.getChangeEventType)(P.default.ACTIVE),this.updateState_,this)}return h&&(d.__proto__=h),d.prototype=Object.create(h&&h.prototype),d.prototype.constructor=d,d.prototype.setMap=function(t){h.prototype.setMap.call(this,t),this.updateState_()},d.prototype.getOverlay=function(){return this.overlay_},d.prototype.handleEvent=function(e){e.originalEvent.type===t.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==I.POINT&&this.freehandCondition_(e);var s=e.type===i.default.POINTERMOVE,o=!0;!this.freehand_&&this.lastDragTime_&&e.type===i.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,s=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===i.default.POINTERDOWN?o=!1:s?(o=e.type===i.default.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==g.POINTER_TYPE||e.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===i.default.DBLCLICK&&(o=!1),h.prototype.handleEvent.call(this,e)&&o},d.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s.default(i.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},d.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===I.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===I.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},d.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,s=e[0]-i[0],o=e[1]-i[1],r=s*s+o*o;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},d.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,s=[this.finishCoordinate_];if(this.mode_===I.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===I.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,s=[o[0][0],o[0][o[0].length-2]]}if(i)for(var r=t.map,n=0,h=s.length;n<h;n++){var a=s[n],d=r.getPixelFromCoordinate(a),u=t.pixel,_=u[0]-d[0],l=u[1]-d[1],c=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(_*_+l*l)<=c){this.finishCoordinate_=a;break}}}return e},d.prototype.createOrUpdateSketchPoint_=function(t){var i=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(i):(this.sketchPoint_=new e.default(new m.default(i)),this.updateSketchFeatures_())},d.prototype.startDrawing_=function(t){var i=t.coordinate;this.finishCoordinate_=i,this.mode_===I.POINT?this.sketchCoords_=i.slice():this.mode_===I.POLYGON?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new e.default(new c.default(this.sketchLineCoords_)));var s=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new e.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new D(E.DRAWSTART,this.sketchFeature_))},d.prototype.modifyDrawing_=function(t){var i,s,o,r=t.coordinate,n=this.sketchFeature_.getGeometry();(this.mode_===I.POINT?s=this.sketchCoords_:this.mode_===I.POLYGON?(s=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):s=(i=this.sketchCoords_)[i.length-1],s[0]=r[0],s[1]=r[1],this.geometryFunction_(this.sketchCoords_,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(r);if(n.getType()==l.default.POLYGON&&this.mode_!==I.POLYGON){this.sketchLine_||(this.sketchLine_=new e.default);var h=n.getLinearRing(0);(o=this.sketchLine_.getGeometry())?(o.setFlatCoordinates(h.getLayout(),h.getFlatCoordinates()),o.changed()):(o=new c.default(h.getFlatCoordinates(),h.getLayout()),this.sketchLine_.setGeometry(o))}else this.sketchLineCoords_&&(o=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},d.prototype.addToDrawing_=function(t){var e,i,s=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===I.LINE_STRING?(this.finishCoordinate_=s.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),this.geometryFunction_(i,o)):this.mode_===I.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(s.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},d.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===I.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===I.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},d.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===I.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===I.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===l.default.MULTI_POINT?t.setGeometry(new p.default([e])):this.type_===l.default.MULTI_LINE_STRING?t.setGeometry(new f.default([e])):this.type_===l.default.MULTI_POLYGON&&t.setGeometry(new y.default([e])),this.dispatchEvent(new D(E.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},d.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},d.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new D(E.DRAWSTART,this.sketchFeature_))},d.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},d.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},d}(k.default);function F(){var t=(0,O.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function R(t,e){return function(i,s){var o=i[0],n=i[1],h=Math.sqrt((0,r.squaredDistance)(o,n)),a=s||(0,C.fromCircle)(new _.default(o),t),d=e;if(!e){var u=n[0]-o[0],l=n[1]-o[1];d=Math.atan(l/u)-(u<0?Math.PI:0)}return(0,C.makeRegular)(a,o,h,d),a}}function M(){return function(t,e){var i=(0,d.boundingExtent)(t),s=[[(0,d.getBottomLeft)(i),(0,d.getBottomRight)(i),(0,d.getTopRight)(i),(0,d.getTopLeft)(i),(0,d.getBottomLeft)(i)]],o=e;return o?o.setCoordinates(s):o=new C.default(s),o}}function S(t){var e;return t===l.default.POINT||t===l.default.MULTI_POINT?e=I.POINT:t===l.default.LINE_STRING||t===l.default.MULTI_LINE_STRING?e=I.LINE_STRING:t===l.default.POLYGON||t===l.default.MULTI_POLYGON?e=I.POLYGON:t===l.default.CIRCLE&&(e=I.CIRCLE),e}var j=G;exports.default=j;
},{"../events/EventType.js":"C8cu","../Feature.js":"mYW9","../MapBrowserEventType.js":"Yh/D","../MapBrowserPointerEvent.js":"J1WQ","../Object.js":"PhPh","../coordinate.js":"nGsj","../events.js":"55Uq","../events/Event.js":"fKNg","../events/condition.js":"YcID","../extent.js":"QDir","../functions.js":"RgA2","../geom/Circle.js":"AyCw","../geom/GeometryType.js":"lmV0","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"4fbC","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"6ouh","../pointer/MouseSource.js":"Plx9","../geom/Point.js":"gLcY","../geom/Polygon.js":"6Nww","./Pointer.js":"dnA2","./Property.js":"caOi","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../style/Style.js":"1he4"}],"1o7b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../Feature.js")),t=c(require("../MapBrowserEventType.js")),r=require("../coordinate.js"),n=c(require("../events/Event.js")),o=require("../extent.js"),i=c(require("../geom/GeometryType.js")),a=c(require("../geom/Point.js")),u=require("../geom/Polygon.js"),l=c(require("./Pointer.js")),s=c(require("../layer/Vector.js")),p=c(require("../source/Vector.js")),d=require("../style/Style.js");function c(e){return e&&e.__esModule?e:{default:e}}var h={EXTENTCHANGED:"extentchanged"},x=function(e){function t(t){e.call(this,h.EXTENTCHANGED),this.extent=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(n.default),_=function(n){function i(e){var t=e||{};n.call(this,t),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new s.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:f(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new s.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:v(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return n&&(i.__proto__=n),i.prototype=Object.create(n&&n.prototype),i.prototype.constructor=i,i.prototype.snapToVertex_=function(e,t){var n=t.getCoordinateFromPixel(e),o=this.getExtent();if(o){var i=g(o);i.sort(function(e,t){return(0,r.squaredDistanceToSegment)(n,e)-(0,r.squaredDistanceToSegment)(n,t)});var a=i[0],u=(0,r.closestOnSegment)(n,a),l=t.getPixelFromCoordinate(u);if((0,r.distance)(e,l)<=this.pixelTolerance_){var s=t.getPixelFromCoordinate(a[0]),p=t.getPixelFromCoordinate(a[1]),d=(0,r.squaredDistance)(l,s),c=(0,r.squaredDistance)(l,p),h=Math.sqrt(Math.min(d,c));return this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(u=d>c?a[1]:a[0]),u}}return null},i.prototype.handlePointerMove_=function(e){var t=e.pixel,r=e.map,n=this.snapToVertex_(t,r);n||(n=r.getCoordinateFromPixel(t)),this.createOrUpdatePointerFeature_(n)},i.prototype.createOrUpdateExtentFeature_=function(t){var r=this.extentFeature_;return r?t?r.setGeometry((0,u.fromExtent)(t)):r.setGeometry(void 0):(r=t?new e.default((0,u.fromExtent)(t)):new e.default({}),this.extentFeature_=r,this.extentOverlay_.getSource().addFeature(r)),r},i.prototype.createOrUpdatePointerFeature_=function(t){var r=this.vertexFeature_;r?r.getGeometry().setCoordinates(t):(r=new e.default(new a.default(t)),this.vertexFeature_=r,this.vertexOverlay_.getSource().addFeature(r));return r},i.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=t.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),n.prototype.handleEvent.call(this,e),!1)},i.prototype.handleDownEvent=function(e){var t=e.pixel,r=e.map,n=this.getExtent(),o=this.snapToVertex_(t,r),i=function(e){var t=null,r=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?r=n[3]:e[1]==n[3]&&(r=n[1]),null!==t&&null!==r?[t,r]:null};if(o&&n){var a=o[0]==n[0]||o[0]==n[2]?o[0]:null,u=o[1]==n[1]||o[1]==n[3]?o[1]:null;null!==a&&null!==u?this.pointerHandler_=y(i(o)):null!==a?this.pointerHandler_=E(i([a,n[1]]),i([a,n[3]])):null!==u&&(this.pointerHandler_=E(i([n[0],u]),i([n[2],u])))}else o=r.getCoordinateFromPixel(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=y(o);return!0},i.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0},i.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtent();return t&&0!==(0,o.getArea)(t)||this.setExtent(null),!1},i.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),n.prototype.setMap.call(this,e)},i.prototype.getExtent=function(){return this.extent_},i.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new x(this.extent_))},i}(l.default);function f(){var e=(0,d.createEditingStyle)();return function(t,r){return e[i.default.POLYGON]}}function v(){var e=(0,d.createEditingStyle)();return function(t,r){return e[i.default.POINT]}}function y(e){return function(t){return(0,o.boundingExtent)([e,t])}}function E(e,t){return e[0]==t[0]?function(r){return(0,o.boundingExtent)([e,[r[0],t[1]]])}:e[1]==t[1]?function(r){return(0,o.boundingExtent)([e,[t[0],r[1]]])}:null}function g(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var m=_;exports.default=m;
},{"../Feature.js":"mYW9","../MapBrowserEventType.js":"Yh/D","../coordinate.js":"nGsj","../events/Event.js":"fKNg","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","../geom/Polygon.js":"6Nww","./Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../style/Style.js":"1he4"}],"qrxo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModifyEvent=void 0;var e=require("../util.js"),t=x(require("../Collection.js")),r=x(require("../CollectionEventType.js")),i=x(require("../Feature.js")),n=x(require("../MapBrowserEventType.js")),o=require("../array.js"),s=require("../coordinate.js"),a=require("../events.js"),u=x(require("../events/Event.js")),h=x(require("../events/EventType.js")),d=require("../events/condition.js"),l=require("../extent.js"),g=x(require("../geom/GeometryType.js")),_=x(require("../geom/Point.js")),p=x(require("./Pointer.js")),f=x(require("../layer/Vector.js")),c=x(require("../source/Vector.js")),m=x(require("../source/VectorEventType.js")),v=x(require("../structs/RBush.js")),y=require("../style/Style.js");function x(e){return e&&e.__esModule?e:{default:e}}var E=0,C=1,S={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},F=function(e){function t(t,r,i){e.call(this,t),this.features=r,this.mapBrowserEvent=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(u.default);exports.ModifyEvent=F;var T=function(u){function p(e){var i;if(u.call(this,e),this.condition_=e.condition?e.condition:d.primaryAction,this.defaultDeleteCondition_=function(e){return(0,d.altKeyOnly)(e)&&(0,d.singleClick)(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:d.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new v.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new f.default({source:new c.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:M(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,i=new t.default(this.source_.getFeatures()),(0,a.listen)(this.source_,m.default.ADDFEATURE,this.handleSourceAdd_,this),(0,a.listen)(this.source_,m.default.REMOVEFEATURE,this.handleSourceRemove_,this)):i=e.features,!i)throw new Error("The modify interaction requires features or a source");this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),(0,a.listen)(this.features_,r.default.ADD,this.handleFeatureAdd_,this),(0,a.listen)(this.features_,r.default.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return u&&(p.__proto__=u),p.prototype=Object.create(u&&u.prototype),p.prototype.constructor=p,p.prototype.addFeature_=function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),(0,a.listen)(e,h.default.CHANGE,this.handleFeatureChange_,this)},p.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new F(S.MODIFYSTART,this.features_,e)))},p.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,a.unlisten)(e,h.default.CHANGE,this.handleFeatureChange_,this)},p.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var i=r.length-1;i>=0;--i)t.remove(r[i])},p.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),u.prototype.setActive.call(this,e)},p.prototype.setMap=function(e){this.overlay_.setMap(e),u.prototype.setMap.call(this,e)},p.prototype.getOverlay=function(){return this.overlay_},p.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},p.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},p.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},p.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},p.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},p.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)},p.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i){var o=r[i],s={feature:e,geometry:t,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},p.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length-1;i<n;++i){var o=r.slice(i,i+2),s={feature:e,geometry:t,index:i,segment:o};this.rBush_.insert((0,l.boundingExtent)(o),s)}},p.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),h={feature:e,geometry:t,depth:[i],index:s,segment:u};this.rBush_.insert((0,l.boundingExtent)(u),h)}},p.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length-1;s<a;++s){var u=o.slice(s,s+2),h={feature:e,geometry:t,depth:[i],index:s,segment:u};this.rBush_.insert((0,l.boundingExtent)(u),h)}},p.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var o=r[i],s=0,a=o.length;s<a;++s)for(var u=o[s],h=0,d=u.length-1;h<d;++h){var g=u.slice(h,h+2),_={feature:e,geometry:t,depth:[s,i],index:h,segment:g};this.rBush_.insert((0,l.boundingExtent)(g),_)}},p.prototype.writeCircleGeometry_=function(e,t){var r=t.getCenter(),i={feature:e,geometry:t,index:E,segment:[r,r]},n={feature:e,geometry:t,index:C,segment:[r,r]},o=[i,n];i.featureSegments=n.featureSegments=o,this.rBush_.insert((0,l.createOrUpdateFromCoordinate)(r),i),this.rBush_.insert(t.getExtent(),n)},p.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),i=0;i<r.length;++i)this.SEGMENT_WRITERS_[r[i].getType()].call(this,e,r[i])},p.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new i.default(new _.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},p.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=n.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=n.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==n.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),u.prototype.handleEvent.call(this,e)&&!t);var t},p.prototype.handleDragEvent=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,i=this.dragSegments_.length;r<i;++r){for(var n=this.dragSegments_[r],o=n[0],a=o.depth,u=o.geometry,h=void 0,d=o.segment,l=n[1];t.length<u.getStride();)t.push(d[l][t.length]);switch(u.getType()){case g.default.POINT:h=t,d[0]=d[1]=t;break;case g.default.MULTI_POINT:(h=u.getCoordinates())[o.index]=t,d[0]=d[1]=t;break;case g.default.LINE_STRING:(h=u.getCoordinates())[o.index+l]=t,d[l]=t;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(h=u.getCoordinates())[a[0]][o.index+l]=t,d[l]=t;break;case g.default.MULTI_POLYGON:(h=u.getCoordinates())[a[1]][a[0]][o.index+l]=t,d[l]=t;break;case g.default.CIRCLE:d[0]=d[1]=t,o.index===E?(this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,u.setRadius((0,s.distance)(u.getCenter(),t)),this.changingFeature_=!1)}h&&this.setGeometryCoordinates_(u,h)}this.createOrUpdateVertexFeature_(t)},p.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var r=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=[],o=i.getGeometry().getCoordinates(),a=(0,l.boundingExtent)([o]),u=this.rBush_.getInExtent(a),h={};u.sort(I);for(var d=0,_=u.length;d<_;++d){var p=u[d],f=p.segment,c=(0,e.getUid)(p.feature),m=p.depth;if(m&&(c+="-"+m.join("-")),h[c]||(h[c]=new Array(2)),p.geometry.getType()===g.default.CIRCLE&&p.index===C){var v=P(r,p);(0,s.equals)(v,o)&&!h[c][0]&&(this.dragSegments_.push([p,0]),h[c][0]=p)}else if((0,s.equals)(f[0],o)&&!h[c][0])this.dragSegments_.push([p,0]),h[c][0]=p;else if((0,s.equals)(f[1],o)&&!h[c][1]){if((p.geometry.getType()===g.default.LINE_STRING||p.geometry.getType()===g.default.MULTI_LINE_STRING)&&h[c][0]&&0===h[c][0].index)continue;this.dragSegments_.push([p,1]),h[c][1]=p}else this.insertVertexCondition_(t)&&(0,e.getUid)(f)in this.vertexSegments_&&!h[c][0]&&!h[c][1]&&n.push([p,o])}n.length&&this.willModifyFeatures_(t);for(var y=n.length-1;y>=0;--y)this.insertVertex_.apply(this,n[y])}return!!this.vertexFeature_},p.prototype.handleUpEvent=function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],i=r.geometry;if(i.getType()===g.default.CIRCLE){var n=i.getCenter(),o=r.featureSegments[0],s=r.featureSegments[1];o.segment[0]=o.segment[1]=n,s.segment[0]=s.segment[1]=n,this.rBush_.update((0,l.createOrUpdateFromCoordinate)(n),o),this.rBush_.update(i.getExtent(),s)}else this.rBush_.update((0,l.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new F(S.MODIFYEND,this.features_,e)),this.modified_=!1),!1},p.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},p.prototype.handlePointerAtPixel_=function(t,r){var i=r.getCoordinateFromPixel(t),n=(0,l.buffer)((0,l.createOrUpdateFromCoordinate)(i),r.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(n);if(o.length>0){o.sort(function(e,t){return G(i,e)-G(i,t)});var a=o[0],u=a.segment,h=P(i,a),d=r.getPixelFromCoordinate(h),_=(0,s.distance)(t,d);if(_<=this.pixelTolerance_){var p={};if(a.geometry.getType()===g.default.CIRCLE&&a.index===C)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var f=r.getPixelFromCoordinate(u[0]),c=r.getPixelFromCoordinate(u[1]),m=(0,s.squaredDistance)(d,f),v=(0,s.squaredDistance)(d,c);_=Math.sqrt(Math.min(m,v)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(h=m>v?u[1]:u[0]),this.createOrUpdateVertexFeature_(h);for(var y=1,x=o.length;y<x;++y){var E=o[y].segment;if(!((0,s.equals)(u[0],E[0])&&(0,s.equals)(u[1],E[1])||(0,s.equals)(u[0],E[1])&&(0,s.equals)(u[1],E[0])))break;p[(0,e.getUid)(E)]=!0}}return p[(0,e.getUid)(u)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},p.prototype.insertVertex_=function(e,t){for(var r,i=e.segment,n=e.feature,o=e.geometry,s=e.depth,a=e.index;t.length<o.getStride();)t.push(0);switch(o.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(r=o.getCoordinates())[s[0]].splice(a+1,0,t);break;case g.default.MULTI_POLYGON:(r=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,t);break;case g.default.LINE_STRING:(r=o.getCoordinates()).splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(e),this.updateSegmentIndices_(o,a,s,1);var h={segment:[i[0],t],feature:n,geometry:o,depth:s,index:a};u.insert((0,l.boundingExtent)(h.segment),h),this.dragSegments_.push([h,1]);var d={segment:[t,i[1]],feature:n,geometry:o,depth:s,index:a+1};u.insert((0,l.boundingExtent)(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},p.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=n.default.POINTERDRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this.removeVertex_(),this.dispatchEvent(new F(S.MODIFYEND,this.features_,e)),this.modified_=!1,!0}return!1},p.prototype.removeVertex_=function(){var t,r,i,n,o,s,a,u,h,d,_,p=this.dragSegments_,f={},c=!1;for(o=p.length-1;o>=0;--o)d=(i=p[o])[0],_=(0,e.getUid)(d.feature),d.depth&&(_+="-"+d.depth.join("-")),_ in f||(f[_]={}),0===i[1]?(f[_].right=d,f[_].index=d.index):1==i[1]&&(f[_].left=d,f[_].index=d.index+1);for(_ in f){switch(h=f[_].right,a=f[_].left,(u=(s=f[_].index)-1)<0&&(u=0),t=r=(n=(d=void 0!==a?a:h).geometry).getCoordinates(),c=!1,n.getType()){case g.default.MULTI_LINE_STRING:r[d.depth[0]].length>2&&(r[d.depth[0]].splice(s,1),c=!0);break;case g.default.LINE_STRING:r.length>2&&(r.splice(s,1),c=!0);break;case g.default.MULTI_POLYGON:t=t[d.depth[1]];case g.default.POLYGON:(t=t[d.depth[0]]).length>4&&(s==t.length-1&&(s=0),t.splice(s,1),c=!0,0===s&&(t.pop(),t.push(t[0]),u=t.length-1))}if(c){this.setGeometryCoordinates_(n,r);var m=[];if(void 0!==a&&(this.rBush_.remove(a),m.push(a.segment[0])),void 0!==h&&(this.rBush_.remove(h),m.push(h.segment[1])),void 0!==a&&void 0!==h){var v={depth:d.depth,feature:d.feature,geometry:d.geometry,index:u,segment:m};this.rBush_.insert((0,l.boundingExtent)(v.segment),v)}this.updateSegmentIndices_(n,s,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return c},p.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},p.prototype.updateSegmentIndices_=function(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(n){n.geometry===e&&(void 0===r||void 0===n.depth||(0,o.equals)(n.depth,r))&&n.index>t&&(n.index+=i)})},p}(p.default);function I(e,t){return e.index-t.index}function G(e,t){var r=t.geometry;if(r.getType()===g.default.CIRCLE){var i=r;if(t.index===C){var n=(0,s.squaredDistance)(i.getCenter(),e),o=Math.sqrt(n)-i.getRadius();return o*o}}return(0,s.squaredDistanceToSegment)(e,t.segment)}function P(e,t){var r=t.geometry;return r.getType()===g.default.CIRCLE&&t.index===C?r.getClosestPoint(e):(0,s.closestOnSegment)(e,t.segment)}function M(){var e=(0,y.createEditingStyle)();return function(t,r){return e[g.default.POINT]}}var w=T;exports.default=w;
},{"../util.js":"KniQ","../Collection.js":"FnDa","../CollectionEventType.js":"BTrx","../Feature.js":"mYW9","../MapBrowserEventType.js":"Yh/D","../array.js":"luEr","../coordinate.js":"nGsj","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","../events/condition.js":"YcID","../extent.js":"QDir","../geom/GeometryType.js":"lmV0","../geom/Point.js":"gLcY","./Pointer.js":"dnA2","../layer/Vector.js":"dflx","../source/Vector.js":"ZS12","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH","../style/Style.js":"1he4"}],"6SMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=p(require("../CollectionEventType.js")),r=require("../array.js"),i=require("../events.js"),o=p(require("../events/Event.js")),n=require("../events/condition.js"),a=require("../functions.js"),s=p(require("../geom/GeometryType.js")),u=p(require("./Interaction.js")),l=p(require("../layer/Vector.js")),c=require("../obj.js"),h=p(require("../source/Vector.js")),d=require("../style/Style.js");function p(e){return e&&e.__esModule?e:{default:e}}var f={SELECT:"select"},y=function(e){function t(t,r,i,o){e.call(this,t),this.selected=r,this.deselected=i,this.mapBrowserEvent=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(o.default),_=function(o){function s(e){o.call(this,{handleEvent:v});var s=e||{};this.condition_=s.condition?s.condition:n.singleClick,this.addCondition_=s.addCondition?s.addCondition:n.never,this.removeCondition_=s.removeCondition?s.removeCondition:n.never,this.toggleCondition_=s.toggleCondition?s.toggleCondition:n.shiftKeyOnly,this.multi_=!!s.multi&&s.multi,this.filter_=s.filter?s.filter:a.TRUE,this.hitTolerance_=s.hitTolerance?s.hitTolerance:0;var u,c=new l.default({source:new h.default({useSpatialIndex:!1,features:s.features,wrapX:s.wrapX}),style:s.style?s.style:g(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=c,s.layers)if("function"==typeof s.layers)u=s.layers;else{var d=s.layers;u=function(e){return(0,r.includes)(d,e)}}else u=a.TRUE;this.layerFilter_=u,this.featureLayerAssociation_={};var p=this.getFeatures();(0,i.listen)(p,t.default.ADD,this.addFeature_,this),(0,i.listen)(p,t.default.REMOVE,this.removeFeature_,this)}return o&&(s.__proto__=o),s.prototype=Object.create(o&&o.prototype),s.prototype.constructor=s,s.prototype.addFeatureLayerAssociation_=function(t,r){this.featureLayerAssociation_[(0,e.getUid)(t)]=r},s.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},s.prototype.getHitTolerance=function(){return this.hitTolerance_},s.prototype.getLayer=function(t){return this.featureLayerAssociation_[(0,e.getUid)(t)]},s.prototype.getOverlay=function(){return this.featureOverlay_},s.prototype.setHitTolerance=function(e){this.hitTolerance_=e},s.prototype.setMap=function(e){var t=this.getMap(),r=this.getFeatures();t&&r.forEach(t.unskipFeature.bind(t)),o.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},s.prototype.addFeature_=function(e){var t=this.getMap();t&&t.skipFeature(e.element)},s.prototype.removeFeature_=function(e){var t=this.getMap();t&&t.unskipFeature(e.element)},s.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[(0,e.getUid)(t)]},s}(u.default);function v(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),i=this.removeCondition_(e),o=this.toggleCondition_(e),a=!t&&!i&&!o,s=e.map,u=this.getFeatures(),l=[],h=[];if(a){(0,c.clear)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return h.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=u.getLength()-1;d>=0;--d){var p=u.item(d),_=h.indexOf(p);_>-1?h.splice(_,1):(u.remove(p),l.push(p))}0!==h.length&&u.extend(h)}else{s.forEachFeatureAtPixel(e.pixel,function(e,n){if(this.filter_(e,n))return!t&&!o||(0,r.includes)(u.getArray(),e)?(i||o)&&(0,r.includes)(u.getArray(),e)&&(l.push(e),this.removeFeatureLayerAssociation_(e)):(h.push(e),this.addFeatureLayerAssociation_(e,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var v=l.length-1;v>=0;--v)u.remove(l[v]);u.extend(h)}return(h.length>0||l.length>0)&&this.dispatchEvent(new y(f.SELECT,h,l,e)),(0,n.pointerMove)(e)}function g(){var e=(0,d.createEditingStyle)();return(0,r.extend)(e[s.default.POLYGON],e[s.default.LINE_STRING]),(0,r.extend)(e[s.default.GEOMETRY_COLLECTION],e[s.default.LINE_STRING]),function(t,r){return t.getGeometry()?e[t.getGeometry().getType()]:null}}var m=_;exports.default=m;
},{"../util.js":"KniQ","../CollectionEventType.js":"BTrx","../array.js":"luEr","../events.js":"55Uq","../events/Event.js":"fKNg","../events/condition.js":"YcID","../functions.js":"RgA2","../geom/GeometryType.js":"lmV0","./Interaction.js":"jB2p","../layer/Vector.js":"dflx","../obj.js":"mH6q","../source/Vector.js":"ZS12","../style/Style.js":"1he4"}],"NnGW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=p(require("../CollectionEventType.js")),r=require("../coordinate.js"),i=require("../events.js"),n=p(require("../events/EventType.js")),o=require("../extent.js"),s=require("../functions.js"),a=p(require("../geom/GeometryType.js")),u=require("../geom/Polygon.js"),h=p(require("./Pointer.js")),l=require("../obj.js"),d=p(require("../source/VectorEventType.js")),g=p(require("../structs/RBush.js"));function p(e){return e&&e.__esModule?e:{default:e}}function _(e){return e.feature?e.feature:e.element?e.element:void 0}var c=function(h){function p(e){var t=e||{},r=t;r.handleDownEvent||(r.handleDownEvent=s.TRUE),r.stopDown||(r.stopDown=s.FALSE),h.call(this,r),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.sortByDistance_=f.bind(this),this.rBush_=new g.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return h&&(p.__proto__=h),p.prototype=Object.create(h&&h.prototype),p.prototype.constructor=p,p.prototype.addFeature=function(t,r){var s=void 0===r||r,a=(0,e.getUid)(t),u=t.getGeometry();if(u){var h=this.SEGMENT_WRITERS_[u.getType()];h&&(this.indexedFeaturesExtents_[a]=u.getExtent((0,o.createEmpty)()),h.call(this,t,u))}s&&(this.featureChangeListenerKeys_[a]=(0,i.listen)(t,n.default.CHANGE,this.handleFeatureChange_,this))},p.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},p.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},p.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},p.prototype.handleEvent=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),h.prototype.handleEvent.call(this,e)},p.prototype.handleFeatureAdd_=function(e){var t=_(e);this.addFeature(t)},p.prototype.handleFeatureRemove_=function(e){var t=_(e);this.removeFeature(t)},p.prototype.handleFeatureChange_=function(t){var r=t.target;if(this.handlingDownUpSequence){var i=(0,e.getUid)(r);i in this.pendingFeatures_||(this.pendingFeatures_[i]=r)}else this.updateFeature_(r)},p.prototype.handleUpEvent=function(e){var t=(0,l.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},p.prototype.removeFeature=function(t,r){var n=void 0===r||r,o=(0,e.getUid)(t),s=this.indexedFeaturesExtents_[o];if(s){var a=this.rBush_,u=[];a.forEachInExtent(s,function(e){t===e.feature&&u.push(e)});for(var h=u.length-1;h>=0;--h)a.remove(u[h])}n&&((0,i.unlistenByKey)(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])},p.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,o=this.getFeatures_();r&&(n.forEach(i.unlistenByKey),n.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),h.prototype.setMap.call(this,e),e&&(this.features_?n.push((0,i.listen)(this.features_,t.default.ADD,this.handleFeatureAdd_,this),(0,i.listen)(this.features_,t.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,i.listen)(this.source_,d.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,i.listen)(this.source_,d.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},p.prototype.snapTo=function(e,t,i){var n=i.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),s=i.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),u=(0,o.boundingExtent)([n,s]),h=this.rBush_.getInExtent(u);this.vertex_&&!this.edge_&&(h=h.filter(function(e){return e.feature.getGeometry().getType()!==a.default.CIRCLE}));var l,d,g,p,_=!1,c=null,f=null;if(h.length>0){this.pixelCoordinate_=t,h.sort(this.sortByDistance_);var y=h[0].segment,v=h[0].feature.getGeometry().getType()===a.default.CIRCLE;this.vertex_&&!this.edge_?(l=i.getPixelFromCoordinate(y[0]),d=i.getPixelFromCoordinate(y[1]),g=(0,r.squaredDistance)(e,l),p=(0,r.squaredDistance)(e,d),Math.sqrt(Math.min(g,p))<=this.pixelTolerance_&&(_=!0,c=g>p?y[1]:y[0],f=i.getPixelFromCoordinate(c))):this.edge_&&(c=v?(0,r.closestOnCircle)(t,h[0].feature.getGeometry()):(0,r.closestOnSegment)(t,y),f=i.getPixelFromCoordinate(c),(0,r.distance)(e,f)<=this.pixelTolerance_&&(_=!0,this.vertex_&&!v&&(l=i.getPixelFromCoordinate(y[0]),d=i.getPixelFromCoordinate(y[1]),g=(0,r.squaredDistance)(f,l),p=(0,r.squaredDistance)(f,d),Math.sqrt(Math.min(g,p))<=this.pixelTolerance_&&(c=g>p?y[1]:y[0],f=i.getPixelFromCoordinate(c))))),_&&(f=[Math.round(f[0]),Math.round(f[1])])}return{snapped:_,vertex:c,vertexPixel:f}},p.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},p.prototype.writeCircleGeometry_=function(e,t){for(var r=(0,u.fromCircle)(t).getCoordinates()[0],i=0,n=r.length-1;i<n;++i){var s=r.slice(i,i+2),a={feature:e,segment:s};this.rBush_.insert((0,o.boundingExtent)(s),a)}},p.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),i=0;i<r.length;++i){var n=this.SEGMENT_WRITERS_[r[i].getType()];n&&n.call(this,e,r[i])}},p.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length-1;i<n;++i){var s=r.slice(i,i+2),a={feature:e,segment:s};this.rBush_.insert((0,o.boundingExtent)(s),a)}},p.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var s=r[i],a=0,u=s.length-1;a<u;++a){var h=s.slice(a,a+2),l={feature:e,segment:h};this.rBush_.insert((0,o.boundingExtent)(h),l)}},p.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i){var o=r[i],s={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),s)}},p.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var s=r[i],a=0,u=s.length;a<u;++a)for(var h=s[a],l=0,d=h.length-1;l<d;++l){var g=h.slice(l,l+2),p={feature:e,segment:g};this.rBush_.insert((0,o.boundingExtent)(g),p)}},p.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),i={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)},p.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;++i)for(var s=r[i],a=0,u=s.length-1;a<u;++a){var h=s.slice(a,a+2),l={feature:e,segment:h};this.rBush_.insert((0,o.boundingExtent)(h),l)}},p}(h.default);function f(e,t){return(0,r.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment)-(0,r.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment)}var y=c;exports.default=y;
},{"../util.js":"KniQ","../CollectionEventType.js":"BTrx","../coordinate.js":"nGsj","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../functions.js":"RgA2","../geom/GeometryType.js":"lmV0","../geom/Polygon.js":"6Nww","./Pointer.js":"dnA2","../obj.js":"mH6q","../source/VectorEventType.js":"s8Fc","../structs/RBush.js":"MiUH"}],"dAAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TranslateEvent=void 0;var t=l(require("../Collection.js")),e=require("../Object.js"),r=require("../events.js"),a=l(require("../events/Event.js")),i=require("../functions.js"),o=require("../array.js"),s=l(require("./Pointer.js")),n=l(require("./Property.js"));function l(t){return t&&t.__esModule?t:{default:t}}var u={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},h=function(t){function e(e,r,a){t.call(this,e),this.features=r,this.coordinate=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default);exports.TranslateEvent=h;var c=function(a){function s(t){var s,l=t||{};if(a.call(this,l),this.lastCoordinate_=null,this.features_=void 0!==l.features?l.features:null,l.layers)if("function"==typeof l.layers)s=l.layers;else{var u=l.layers;s=function(t){return(0,o.includes)(u,t)}}else s=i.TRUE;this.layerFilter_=s,this.hitTolerance_=l.hitTolerance?l.hitTolerance:0,this.lastFeature_=null,(0,r.listen)(this,(0,e.getChangeEventType)(n.default.ACTIVE),this.handleActiveChanged_,this)}return a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s,s.prototype.handleDownEvent=function(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATESTART,r,e.coordinate)),!0}return!1},s.prototype.handleUpEvent=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var r=this.features_||new t.default([this.lastFeature_]);return this.dispatchEvent(new h(u.TRANSLATEEND,r,e.coordinate)),!0}return!1},s.prototype.handleDragEvent=function(e){if(this.lastCoordinate_){var r=e.coordinate,a=r[0]-this.lastCoordinate_[0],i=r[1]-this.lastCoordinate_[1],o=this.features_||new t.default([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(a,i),t.setGeometry(e)}),this.lastCoordinate_=r,this.dispatchEvent(new h(u.TRANSLATING,o,r))}},s.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},s.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||(0,o.includes)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},s.prototype.getHitTolerance=function(){return this.hitTolerance_},s.prototype.setHitTolerance=function(t){this.hitTolerance_=t},s.prototype.setMap=function(t){var e=this.getMap();a.prototype.setMap.call(this,t),this.updateState_(e)},s.prototype.handleActiveChanged_=function(){this.updateState_(null)},s.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},s}(s.default),p=c;exports.default=p;
},{"../Collection.js":"FnDa","../Object.js":"PhPh","../events.js":"55Uq","../events/Event.js":"fKNg","../functions.js":"RgA2","../array.js":"luEr","./Pointer.js":"dnA2","./Property.js":"caOi"}],"aMDX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=O,Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return h.default}});var e=q(require("./Collection.js")),t=q(require("./Kinetic.js")),r=q(require("./interaction/DoubleClickZoom.js")),n=q(require("./interaction/DragPan.js")),o=q(require("./interaction/DragRotate.js")),i=q(require("./interaction/DragZoom.js")),u=q(require("./interaction/KeyboardPan.js")),a=q(require("./interaction/KeyboardZoom.js")),c=q(require("./interaction/MouseWheelZoom.js")),d=q(require("./interaction/PinchRotate.js")),l=q(require("./interaction/PinchZoom.js")),f=require("./events/condition.js"),s=q(require("./interaction/DragAndDrop.js")),p=q(require("./interaction/DragBox.js")),b=q(require("./interaction/DragRotateAndZoom.js")),m=q(require("./interaction/Draw.js")),j=q(require("./interaction/Extent.js")),g=q(require("./interaction/Interaction.js")),P=q(require("./interaction/Modify.js")),y=q(require("./interaction/Pointer.js")),D=q(require("./interaction/Select.js")),x=q(require("./interaction/Snap.js")),h=q(require("./interaction/Translate.js"));function q(e){return e&&e.__esModule?e:{default:e}}function O(s){var p=s||{},b=new e.default,m=new t.default(-.005,.05,100);return(void 0===p.altShiftDragRotate||p.altShiftDragRotate)&&b.push(new o.default),(void 0===p.doubleClickZoom||p.doubleClickZoom)&&b.push(new r.default({delta:p.zoomDelta,duration:p.zoomDuration})),(void 0===p.dragPan||p.dragPan)&&b.push(new n.default({condition:p.onFocusOnly?f.focus:void 0,kinetic:m})),(void 0===p.pinchRotate||p.pinchRotate)&&b.push(new d.default),(void 0===p.pinchZoom||p.pinchZoom)&&b.push(new l.default({constrainResolution:p.constrainResolution,duration:p.zoomDuration})),(void 0===p.keyboard||p.keyboard)&&(b.push(new u.default),b.push(new a.default({delta:p.zoomDelta,duration:p.zoomDuration}))),(void 0===p.mouseWheelZoom||p.mouseWheelZoom)&&b.push(new c.default({condition:p.onFocusOnly?f.focus:void 0,constrainResolution:p.constrainResolution,duration:p.zoomDuration})),(void 0===p.shiftDragZoom||p.shiftDragZoom)&&b.push(new i.default({duration:p.zoomDuration})),b}
},{"./Collection.js":"FnDa","./Kinetic.js":"77gA","./interaction/DoubleClickZoom.js":"2NSa","./interaction/DragPan.js":"N4gU","./interaction/DragRotate.js":"PgBj","./interaction/DragZoom.js":"pTqW","./interaction/KeyboardPan.js":"CFRo","./interaction/KeyboardZoom.js":"7S8w","./interaction/MouseWheelZoom.js":"kPt6","./interaction/PinchRotate.js":"8hbG","./interaction/PinchZoom.js":"rcXm","./events/condition.js":"YcID","./interaction/DragAndDrop.js":"IYO6","./interaction/DragBox.js":"AQ/R","./interaction/DragRotateAndZoom.js":"0/IT","./interaction/Draw.js":"5e7i","./interaction/Extent.js":"1o7b","./interaction/Interaction.js":"jB2p","./interaction/Modify.js":"qrxo","./interaction/Pointer.js":"dnA2","./interaction/Select.js":"6SMG","./interaction/Snap.js":"NnGW","./interaction/Translate.js":"dAAZ"}],"7f+F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENABLE_RASTER_REPROJECTION=exports.ERROR_THRESHOLD=void 0;var R=.5;exports.ERROR_THRESHOLD=R;var E=!0;exports.ENABLE_RASTER_REPROJECTION=E;
},{}],"Ojbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),e=r(require("./events/Target.js")),o=r(require("./events/EventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function r(t,o,r,n){e.call(this),this.extent=t,this.pixelRatio_=r,this.resolution=o,this.state=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.changed=function(){this.dispatchEvent(o.default.CHANGE)},r.prototype.getExtent=function(){return this.extent},r.prototype.getImage=function(){return(0,t.abstract)()},r.prototype.getPixelRatio=function(){return this.pixelRatio_},r.prototype.getResolution=function(){return this.resolution},r.prototype.getState=function(){return this.state},r.prototype.load=function(){(0,t.abstract)()},r}(e.default),i=n;exports.default=i;
},{"./util.js":"KniQ","./events/Target.js":"8CR4","./events/EventType.js":"C8cu"}],"K7j2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function r(r,o,a,s,i){var u=void 0!==i?e.default.IDLE:e.default.LOADED;t.call(this,r,o,a,u),this.loader_=void 0!==i?i:null,this.canvas_=s,this.error_=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.getError=function(){return this.error_},r.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()},r.prototype.load=function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},r.prototype.getImage=function(){return this.canvas_},r}(t.default),a=o;exports.default=a;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3k+"}],"E+B6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(e,o,r,n,s){t.call(this,e),this.vectorContext=o,this.frameState=r,this.context=n,this.glContext=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t.default),r=o;exports.default=r;
},{"../events/Event.js":"fKNg"}],"4LQ/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){};t.prototype.drawCustom=function(t,o,e){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,o){},t.prototype.drawFeature=function(t,o){},t.prototype.drawGeometryCollection=function(t,o){},t.prototype.drawLineString=function(t,o){},t.prototype.drawMultiLineString=function(t,o){},t.prototype.drawMultiPoint=function(t,o){},t.prototype.drawMultiPolygon=function(t,o){},t.prototype.drawPoint=function(t,o){},t.prototype.drawPolygon=function(t,o){},t.prototype.drawText=function(t,o){},t.prototype.setFillStrokeStyle=function(t,o){},t.prototype.setImageStyle=function(t,o){},t.prototype.setTextStyle=function(t,o){};var o=t;exports.default=o;
},{}],"fo6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),s=_(require("../../geom/GeometryType.js")),a=require("../../geom/SimpleGeometry.js"),o=require("../../geom/flat/transform.js"),l=require("../../has.js"),n=_(require("../VectorContext.js")),r=require("../canvas.js"),h=require("../../transform.js");function _(t){return t&&t.__esModule?t:{default:t}}var f=function(n){function _(t,e,i,s,a){n.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.viewRotation_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,h.create)()}return n&&(_.__proto__=n),_.prototype=Object.create(n&&n.prototype),_.prototype.constructor=_,_.prototype.drawImages_=function(t,e,i,s){if(this.image_){var a=(0,o.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),l=this.context_,n=this.tmpLocalTransform_,r=l.globalAlpha;1!=this.imageOpacity_&&(l.globalAlpha=r*this.imageOpacity_);var _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(var f=0,g=a.length;f<g;f+=2){var S=a[f]-this.imageAnchorX_,x=a[f+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_){var d=S+this.imageAnchorX_,m=x+this.imageAnchorY_;(0,h.compose)(n,d,m,this.imageScale_,this.imageScale_,_,-d,-m),l.setTransform.apply(l,n)}l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,x,this.imageWidth_,this.imageHeight_)}0===_&&1==this.imageScale_||l.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(l.globalAlpha=r)}},_.prototype.drawText_=function(t,e,i,s){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=(0,o.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_),l=this.context_,n=this.textRotation_;for(this.textRotateWithView_&&(n+=this.viewRotation_);e<i;e+=s){var r=a[e]+this.textOffsetX_,_=a[e+1]+this.textOffsetY_;if(0!==n||1!=this.textScale_){var f=(0,h.compose)(this.tmpLocalTransform_,r,_,this.textScale_,this.textScale_,n,-r,-_);l.setTransform.apply(l,f)}this.textStrokeState_&&l.strokeText(this.text_,r,_),this.textFillState_&&l.fillText(this.text_,r,_)}0===n&&1==this.textScale_||l.setTransform(1,0,0,1,0,0)}},_.prototype.moveToLineTo_=function(t,e,i,s,a){var l=this.context_,n=(0,o.transform2D)(t,e,i,s,this.transform_,this.pixelCoordinates_);l.moveTo(n[0],n[1]);var r=n.length;a&&(r-=2);for(var h=2;h<r;h+=2)l.lineTo(n[h],n[h+1]);return a&&l.closePath(),i},_.prototype.drawRings_=function(t,e,i,s){for(var a=0,o=i.length;a<o;++a)e=this.moveToLineTo_(t,e,i[a],s,!0);return e},_.prototype.drawCircle=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,a.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),s=e[2]-e[0],o=e[3]-e[1],l=Math.sqrt(s*s+o*o),n=this.context_;n.beginPath(),n.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},_.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},_.prototype.drawGeometry=function(t){switch(t.getType()){case s.default.POINT:this.drawPoint(t);break;case s.default.LINE_STRING:this.drawLineString(t);break;case s.default.POLYGON:this.drawPolygon(t);break;case s.default.MULTI_POINT:this.drawMultiPoint(t);break;case s.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case s.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case s.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case s.default.CIRCLE:this.drawCircle(t)}},_.prototype.drawFeature=function(t,e){var s=e.getGeometryFunction()(t);s&&(0,i.intersects)(this.extent_,s.getExtent())&&(this.setStyle(e),this.drawGeometry(s))},_.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])},_.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},_.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},_.prototype.drawLineString=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,s=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(s,0,s.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},_.prototype.drawMultiLineString=function(t){var e=t.getExtent();if((0,i.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var s=this.context_,a=t.getFlatCoordinates(),o=0,l=t.getEnds(),n=t.getStride();s.beginPath();for(var r=0,h=l.length;r<h;++r)o=this.moveToLineTo_(a,o,l[r],n,!1);s.stroke()}if(""!==this.text_){var _=t.getFlatMidpoints();this.drawText_(_,0,_.length,2)}}},_.prototype.drawPolygon=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var s=t.getFlatInteriorPoint();this.drawText_(s,0,2,2)}}},_.prototype.drawMultiPolygon=function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,s=t.getOrientedFlatCoordinates(),a=0,o=t.getEndss(),l=t.getStride();e.beginPath();for(var n=0,r=o.length;n<r;++n){var h=o[n];a=this.drawRings_(s,a,h,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var _=t.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}},_.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},_.prototype.setContextStrokeState_=function(e){var i=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=e.lineCap&&(s.lineCap=i.lineCap=e.lineCap),l.CANVAS_LINE_DASH&&((0,t.equals)(s.lineDash,e.lineDash)||i.setLineDash(s.lineDash=e.lineDash),s.lineDashOffset!=e.lineDashOffset&&(s.lineDashOffset=i.lineDashOffset=e.lineDashOffset)),s.lineJoin!=e.lineJoin&&(s.lineJoin=i.lineJoin=e.lineJoin),s.lineWidth!=e.lineWidth&&(s.lineWidth=i.lineWidth=e.lineWidth),s.miterLimit!=e.miterLimit&&(s.miterLimit=i.miterLimit=e.miterLimit),s.strokeStyle!=e.strokeStyle&&(s.strokeStyle=i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,l.CANVAS_LINE_DASH&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},_.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:r.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=s&&(i.textAlign=e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})},_.prototype.setFillStrokeStyle=function(t,i){if(t){var s=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(s||r.defaultFillStyle)}}else this.fillState_=null;if(i){var a=i.getColor(),o=i.getLineCap(),l=i.getLineDash(),n=i.getLineDashOffset(),h=i.getLineJoin(),_=i.getWidth(),f=i.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:r.defaultLineCap,lineDash:l||r.defaultLineDash,lineDashOffset:n||r.defaultLineDashOffset,lineJoin:void 0!==h?h:r.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==_?_:r.defaultLineWidth),miterLimit:void 0!==f?f:r.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(a||r.defaultStrokeStyle)}}else this.strokeState_=null},_.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),s=t.getOrigin(),a=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=a[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=a[0]}else this.image_=null},_.prototype.setTextStyle=function(t){if(t){var i=t.getFill();if(i){var s=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(s||r.defaultFillStyle)}}else this.textFillState_=null;var a=t.getStroke();if(a){var o=a.getColor(),l=a.getLineCap(),n=a.getLineDash(),h=a.getLineDashOffset(),_=a.getLineJoin(),f=a.getWidth(),g=a.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:r.defaultLineCap,lineDash:n||r.defaultLineDash,lineDashOffset:h||r.defaultLineDashOffset,lineJoin:void 0!==_?_:r.defaultLineJoin,lineWidth:void 0!==f?f:r.defaultLineWidth,miterLimit:void 0!==g?g:r.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(o||r.defaultStrokeStyle)}}else this.textStrokeState_=null;var S=t.getFont(),x=t.getOffsetX(),d=t.getOffsetY(),m=t.getRotateWithView(),c=t.getRotation(),p=t.getScale(),u=t.getText(),y=t.getTextAlign(),k=t.getTextBaseline();this.textState_={font:void 0!==S?S:r.defaultFont,textAlign:void 0!==y?y:r.defaultTextAlign,textBaseline:void 0!==k?k:r.defaultTextBaseline},this.text_=void 0!==u?u:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0!==c?c:0,this.textScale_=this.pixelRatio_*(void 0!==p?p:1)}else this.text_=""},_}(n.default),g=f;exports.default=g;
},{"../../array.js":"luEr","../../colorlike.js":"V5+X","../../extent.js":"QDir","../../geom/GeometryType.js":"lmV0","../../geom/SimpleGeometry.js":"pnrv","../../geom/flat/transform.js":"LGwr","../../has.js":"f3Nv","../VectorContext.js":"4LQ/","../canvas.js":"iAG7","../../transform.js":"P4eA"}],"6V0o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js"),t=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function i(t,i,c){return i+":"+t+":"+(c?(0,e.asString)(c):"null")}t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e=0;for(var t in this.cache_){var i=this.cache_[t];0!=(3&e++)||i.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}},t.prototype.get=function(e,t,c){var h=i(e,t,c);return h in this.cache_?this.cache_[h]:null},t.prototype.set=function(e,t,c,h){var r=i(e,t,c);this.cache_[r]=h,++this.cacheSize_},t.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()};var c=t;exports.default=c;var h=new t;exports.shared=h;
},{"../color.js":"eucy"}],"8oIh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sortByZIndex=l,exports.default=void 0;var e=require("../util.js"),r=d(require("../Disposable.js")),t=require("../events.js"),n=d(require("../events/EventType.js")),o=require("../extent.js"),s=require("../functions.js"),a=require("../layer/Layer.js"),i=require("../style/IconImageCache.js"),u=require("../transform.js");function d(e){return e&&e.__esModule?e:{default:e}}var y=function(r){function i(e){r.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i.prototype.dispatchRenderEvent=function(r,t){(0,e.abstract)()},i.prototype.registerLayerRenderers=function(e){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,e)},i.prototype.calculateMatrices2D=function(e){var r=e.viewState,t=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;(0,u.compose)(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),(0,u.invert)((0,u.setFromArray)(n,t))},i.prototype.removeLayerRenderers=function(){for(var e in this.layerRenderers_)this.removeLayerRendererByKey_(e).dispose()},i.prototype.forEachFeatureAtCoordinate=function(r,t,n,s,i,u,d){var y,p=t.viewState,l=p.resolution;function c(r,n){var o=t.layerStates[(0,e.getUid)(n)].managed;if(!((0,e.getUid)(r)in t.skippedFeatureUids)||o)return s.call(i,r,o?n:null)}var h=p.projection,f=r;if(h.canWrapX()){var R=h.getExtent(),_=(0,o.getWidth)(R),v=r[0];if(v<R[0]||v>R[2])f=[v+_*Math.ceil((R[0]-v)/_),r[1]]}var g,L=t.layerStatesArray;for(g=L.length-1;g>=0;--g){var m=L[g],C=m.layer;if((0,a.visibleAtResolution)(m,l)&&u.call(d,C)){var x=this.getLayerRenderer(C),j=C.getSource();if(j&&(y=x.forEachFeatureAtCoordinate(j.getWrapX()?f:r,t,n,c)),y)return y}}},i.prototype.forEachLayerAtPixel=function(r,t,n,o,s,a,i){return(0,e.abstract)()},i.prototype.hasFeatureAtCoordinate=function(e,r,t,n,o){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,s.TRUE,this,n,o)},i.prototype.getLayerRenderer=function(r){var o=(0,e.getUid)(r);if(o in this.layerRenderers_)return this.layerRenderers_[o];for(var s,a=0,i=this.layerRendererConstructors_.length;a<i;++a){var u=this.layerRendererConstructors_[a];if(u.handles(r)){s=u.create(this,r);break}}if(!s)throw new Error("Unable to create renderer for layer: "+r.getType());return this.layerRenderers_[o]=s,this.layerRendererListeners_[o]=(0,t.listen)(s,n.default.CHANGE,this.handleLayerRendererChange_,this),s},i.prototype.getLayerRendererByKey=function(e){return this.layerRenderers_[e]},i.prototype.getLayerRenderers=function(){return this.layerRenderers_},i.prototype.getMap=function(){return this.map_},i.prototype.handleLayerRendererChange_=function(){this.map_.render()},i.prototype.removeLayerRendererByKey_=function(e){var r=this.layerRenderers_[e];return delete this.layerRenderers_[e],(0,t.unlistenByKey)(this.layerRendererListeners_[e]),delete this.layerRendererListeners_[e],r},i.prototype.removeUnusedLayerRenderers_=function(e,r){for(var t in this.layerRenderers_)r&&t in r.layerStates||this.removeLayerRendererByKey_(t).dispose()},i.prototype.renderFrame=function(r){(0,e.abstract)()},i.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(p)},i.prototype.scheduleRemoveUnusedLayerRenderers=function(e){for(var r in this.layerRenderers_)if(!(r in e.layerStates))return void e.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},i}(r.default);function p(e,r){i.shared.expire()}function l(e,r){return e.zIndex-r.zIndex}var c=y;exports.default=c;
},{"../util.js":"KniQ","../Disposable.js":"DDda","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../functions.js":"RgA2","../layer/Layer.js":"GCgv","../style/IconImageCache.js":"6V0o","../transform.js":"P4eA"}],"vJhp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.layerRendererConstructors=void 0;var e=require("../../transform.js"),t=require("../../array.js"),r=require("../../css.js"),a=require("../../dom.js"),s=require("../../layer/Layer.js"),i=p(require("../../render/Event.js")),n=p(require("../../render/EventType.js")),o=require("../../render/canvas.js"),c=p(require("../../render/canvas/Immediate.js")),l=d(require("../Map.js")),u=p(require("../../source/State.js"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){if(e&&e.__esModule)return e;var t=h();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}}return r.default=e,t&&t.set(e,r),r}function p(e){return e&&e.__esModule?e:{default:e}}var v=[];exports.layerRendererConstructors=v;var f=function(h){function d(t){h.call(this,t);var s=t.getViewport();this.context_=(0,a.createCanvasContext2D)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=r.CLASS_UNSELECTABLE,s.insertBefore(this.canvas_,s.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=(0,e.create)()}return h&&(d.__proto__=h),d.prototype=Object.create(h&&h.prototype),d.prototype.constructor=d,d.prototype.dispatchRenderEvent=function(e,t){var r=this.getMap(),a=this.context_;if(r.hasListener(e)){var s=t.extent,n=t.pixelRatio,o=t.viewState.rotation,l=this.getTransform(t),u=new c.default(a,n,s,l,o),h=new i.default(e,u,t,a,null);r.dispatchEvent(h)}},d.prototype.getTransform=function(t){var r=t.viewState,a=this.canvas_.width/2,s=this.canvas_.height/2,i=t.pixelRatio/r.resolution,n=-i,o=-r.rotation,c=-r.center[0],l=-r.center[1];return(0,e.compose)(this.transform_,a,s,i,n,o,c,l)},d.prototype.renderFrame=function(e){if(e){var r=this.context_,a=e.pixelRatio,i=Math.round(e.size[0]*a),c=Math.round(e.size[1]*a);this.canvas_.width!=i||this.canvas_.height!=c?(this.canvas_.width=i,this.canvas_.height=c):r.clearRect(0,0,i,c);var h=e.viewState.rotation;this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var d=e.layerStatesArray;(0,t.stableSort)(d,l.sortByZIndex),h&&(r.save(),(0,o.rotateAtOffset)(r,h,i/2,c/2));var p,v,f=e.viewState.resolution;for(p=0,v=d.length;p<v;++p){var y=d[p],_=y.layer,g=this.getLayerRenderer(_);(0,s.visibleAtResolution)(y,f)&&y.sourceState==u.default.READY&&(g.prepareFrame(e,y)&&g.composeFrame(e,y,r))}h&&r.restore(),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(e),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},d.prototype.forEachLayerAtPixel=function(t,r,a,i,n,o,c){var l,u,h=r.viewState.resolution,d=r.layerStatesArray,p=d.length,v=(0,e.apply)(r.pixelToCoordinateTransform,t.slice());for(u=p-1;u>=0;--u){var f=d[u],y=f.layer;if((0,s.visibleAtResolution)(f,h)&&o.call(c,y))if(l=this.getLayerRenderer(y).forEachLayerAtCoordinate(v,r,a,i,n))return l}},d.prototype.registerLayerRenderers=function(e){h.prototype.registerLayerRenderers.call(this,e);for(var r=0,a=e.length;r<a;++r){var s=e[r];(0,t.includes)(v,s)||v.push(s)}},d}(l.default),y=f;exports.default=y;
},{"../../transform.js":"P4eA","../../array.js":"luEr","../../css.js":"HgMV","../../dom.js":"Xno5","../../layer/Layer.js":"GCgv","../../render/Event.js":"E+B6","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../../render/canvas/Immediate.js":"fo6K","../Map.js":"8oIh","../../source/State.js":"iC8j"}],"fpOz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=u(require("../ImageState.js")),r=u(require("../Observable.js")),i=u(require("../TileState.js")),o=require("../events.js"),n=u(require("../events/EventType.js")),a=u(require("../source/State.js"));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(r){function u(e){r.call(this),this.layer_=e}return r&&(u.__proto__=r),u.prototype=Object.create(r&&r.prototype),u.prototype.constructor=u,u.prototype.createLoadedTileFinder=function(e,t,r){return function(i,o){return e.forEachLoadedTile(t,i,o,function(e){r[i]||(r[i]={}),r[i][e.tileCoord.toString()]=e})}},u.prototype.forEachFeatureAtCoordinate=function(e,t,r,i){},u.prototype.getLayer=function(){return this.layer_},u.prototype.handleImageChange_=function(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()},u.prototype.hasFeatureAtCoordinate=function(e,t){return!1},u.prototype.loadImage=function(e){var r=e.getState();return r!=t.default.LOADED&&r!=t.default.ERROR&&(0,o.listen)(e,n.default.CHANGE,this.handleImageChange_,this),r==t.default.IDLE&&(e.load(),r=e.getState()),r==t.default.LOADED},u.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==a.default.READY&&this.changed()},u.prototype.scheduleExpireCache=function(t,r){if(r.canExpireCache()){var i=function(t,r,i){var o=(0,e.getUid)(t);o in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[o])}.bind(null,r);t.postRenderFunctions.push(i)}},u.prototype.updateUsedTiles=function(t,r,i,o){var n=(0,e.getUid)(r),a=i.toString();n in t?a in t[n]?t[n][a].extend(o):t[n][a]=o:(t[n]={},t[n][a]=o)},u.prototype.manageTilePyramid=function(t,r,o,n,a,u,d,l,s,p){var c=(0,e.getUid)(r);c in t.wantedTiles||(t.wantedTiles[c]={});var f,g,y,h,v,T,E=t.wantedTiles[c],C=t.tileQueue;for(T=o.getMinZoom();T<=d;++T)for(g=o.getTileRangeForExtentAndZ(u,T,g),y=o.getResolution(T),h=g.minX;h<=g.maxX;++h)for(v=g.minY;v<=g.maxY;++v)d-T<=l?((f=r.getTile(T,h,v,n,a)).getState()==i.default.IDLE&&(E[f.getKey()]=!0,C.isKeyQueued(f.getKey())||C.enqueue([f,c,o.getTileCoordCenter(f.tileCoord),y])),void 0!==s&&s.call(p,f)):r.useTile(T,h,v,a)},u}(r.default),l=d;exports.default=l;
},{"../util.js":"KniQ","../ImageState.js":"u3k+","../Observable.js":"8IdS","../TileState.js":"Xz9x","../events.js":"55Uq","../events/EventType.js":"C8cu","../source/State.js":"iC8j"}],"+vPf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=require("../../extent.js"),o=require("../../functions.js"),r=u(require("../../render/Event.js")),i=u(require("../../render/EventType.js")),a=require("../../render/canvas.js"),n=u(require("../../render/canvas/Immediate.js")),s=u(require("../Layer.js")),p=require("../../transform.js");function u(e){return e&&e.__esModule?e:{default:e}}var f=function(s){function u(e){s.call(this,e),this.renderedResolution,this.transform_=(0,p.create)()}return s&&(u.__proto__=s),u.prototype=Object.create(s&&s.prototype),u.prototype.constructor=u,u.prototype.clip=function(e,o,r){var i=o.pixelRatio,n=o.size[0]*i,s=o.size[1]*i,u=o.viewState.rotation,f=(0,t.getTopLeft)(r),c=(0,t.getTopRight)(r),l=(0,t.getBottomRight)(r),d=(0,t.getBottomLeft)(r);(0,p.apply)(o.coordinateToPixelTransform,f),(0,p.apply)(o.coordinateToPixelTransform,c),(0,p.apply)(o.coordinateToPixelTransform,l),(0,p.apply)(o.coordinateToPixelTransform,d),e.save(),(0,a.rotateAtOffset)(e,-u,n/2,s/2),e.beginPath(),e.moveTo(f[0]*i,f[1]*i),e.lineTo(c[0]*i,c[1]*i),e.lineTo(l[0]*i,l[1]*i),e.lineTo(d[0]*i,d[1]*i),e.clip(),(0,a.rotateAtOffset)(e,u,n/2,s/2)},u.prototype.dispatchComposeEvent_=function(e,t,o,i){var s=this.getLayer();if(s.hasListener(e)){var p=o.size[0]*o.pixelRatio,u=o.size[1]*o.pixelRatio,f=o.viewState.rotation;(0,a.rotateAtOffset)(t,-f,p/2,u/2);var c=void 0!==i?i:this.getTransform(o,0),l=new n.default(t,o.pixelRatio,o.extent,c,o.viewState.rotation),d=new r.default(e,l,o,t,null);s.dispatchEvent(d),(0,a.rotateAtOffset)(t,f,p/2,u/2)}},u.prototype.forEachLayerAtCoordinate=function(e,t,r,i,a){return this.forEachFeatureAtCoordinate(e,t,r,o.TRUE)?i.call(a,this.getLayer(),null):void 0},u.prototype.postCompose=function(e,t,o,r){this.dispatchComposeEvent_(i.default.POSTCOMPOSE,e,t,r)},u.prototype.preCompose=function(e,t,o){this.dispatchComposeEvent_(i.default.PRECOMPOSE,e,t,o)},u.prototype.dispatchRenderEvent=function(e,t,o){this.dispatchComposeEvent_(i.default.RENDER,e,t,o)},u.prototype.getTransform=function(e,t){var o=e.viewState,r=e.pixelRatio,i=r*e.size[0]/2,a=r*e.size[1]/2,n=r/o.resolution,s=-n,u=-o.rotation,f=-o.center[0]+t,c=-o.center[1];return(0,p.compose)(this.transform_,i,a,n,s,u,f,c)},u.prototype.composeFrame=function(t,o,r){(0,e.abstract)()},u.prototype.prepareFrame=function(t,o){return(0,e.abstract)()},u}(s.default),c=f;exports.default=c;
},{"../../util.js":"KniQ","../../extent.js":"QDir","../../functions.js":"RgA2","../../render/Event.js":"E+B6","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../../render/canvas/Immediate.js":"fo6K","../Layer.js":"fpOz","../../transform.js":"P4eA"}],"F9m+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../util.js"),e=require("../../coordinate.js"),a=require("../../dom.js"),r=require("../../extent.js"),o=n(require("./Layer.js")),i=require("../../transform.js");function n(t){return t&&t.__esModule?t:{default:t}}var s=function(o){function n(t){o.call(this,t),this.coordinateToCanvasPixelTransform=(0,i.create)(),this.hitCanvasContext_=null}return o&&(n.__proto__=o),n.prototype=Object.create(o&&o.prototype),n.prototype.constructor=n,n.prototype.composeFrame=function(t,e,a){this.preCompose(a,t);var o=this.getImage();if(o){var i=e.extent,n=void 0!==i&&!(0,r.containsExtent)(i,t.extent)&&(0,r.intersects)(i,t.extent);n&&this.clip(a,t,i);var s=this.getImageTransform(),h=a.globalAlpha;a.globalAlpha=e.opacity;var u=s[4],c=s[5],l=o.width*s[0],p=o.height*s[3];l>=.5&&p>=.5&&a.drawImage(o,0,0,+o.width,+o.height,Math.round(u),Math.round(c),Math.round(l),Math.round(p)),a.globalAlpha=h,n&&a.restore()}this.postCompose(a,t,e)},n.prototype.getImage=function(){return(0,t.abstract)()},n.prototype.getImageTransform=function(){return(0,t.abstract)()},n.prototype.forEachLayerAtCoordinate=function(t,r,o,n,s){if(this.getImage()){var h=(0,i.apply)(this.coordinateToCanvasPixelTransform,t.slice());(0,e.scale)(h,r.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=(0,a.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),h[0],h[1],1,1,0,0,1,1);var u=this.hitCanvasContext_.getImageData(0,0,1,1).data;return u[3]>0?n.call(s,this.getLayer(),u):void 0}},n}(o.default),h=s;exports.default=h;
},{"../../util.js":"KniQ","../../coordinate.js":"nGsj","../../dom.js":"Xno5","../../extent.js":"QDir","./Layer.js":"+vPf","../../transform.js":"P4eA"}],"rz/N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../reproj/common.js"),t=d(require("../../ImageCanvas.js")),r=d(require("../../LayerType.js")),i=d(require("../../ViewHint.js")),o=require("../../array.js"),a=require("../../extent.js"),s=d(require("../../layer/VectorRenderType.js")),n=require("../../obj.js"),u=require("./Map.js"),p=d(require("./IntermediateCanvas.js")),c=require("../../transform.js");function d(e){return e&&e.__esModule?e:{default:e}}var l=function(s){function p(e){if(s.call(this,e),this.image_=null,this.imageTransform_=(0,c.create)(),this.skippedFeatures_=[],this.vectorRenderer_=null,e.getType()===r.default.VECTOR)for(var t=0,i=u.layerRendererConstructors.length;t<i;++t){var o=u.layerRendererConstructors[t];if(o!==p&&o.handles(e)){this.vectorRenderer_=new o(e);break}}}return s&&(p.__proto__=s),p.prototype=Object.create(s&&s.prototype),p.prototype.constructor=p,p.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),s.prototype.disposeInternal.call(this)},p.prototype.getImage=function(){return this.image_?this.image_.getImage():null},p.prototype.getImageTransform=function(){return this.imageTransform_},p.prototype.prepareFrame=function(r,s){var u,p=r.pixelRatio,d=r.size,l=r.viewState,f=l.center,g=l.resolution,h=this.getLayer().getSource(),m=r.viewHints,v=this.vectorRenderer_,_=r.extent;if(v||void 0===s.extent||(_=(0,a.getIntersection)(_,s.extent)),!m[i.default.ANIMATING]&&!m[i.default.INTERACTING]&&!(0,a.isEmpty)(_)){var y=l.projection;if(!e.ENABLE_RASTER_REPROJECTION){var R=h.getProjection();R&&(y=R)}var j=this.skippedFeatures_;if(v){var T=v.context,I=(0,n.assign)({},r,{size:[(0,a.getWidth)(_)/g,(0,a.getHeight)(_)/g],viewState:(0,n.assign)({},r.viewState,{rotation:0})}),E=Object.keys(I.skippedFeatureUids).sort();u=new t.default(_,g,p,T.canvas,function(e){!v.prepareFrame(I,s)||!v.replayGroupChanged&&(0,o.equals)(j,E)||(T.canvas.width=I.size[0]*p,T.canvas.height=I.size[1]*p,v.compose(T,I,s),j=E,e())})}else u=h.getImage(_,g,p,y);u&&this.loadImage(u)&&(this.image_=u,this.skippedFeatures_=j)}if(this.image_){var C=(u=this.image_).getExtent(),q=u.getResolution(),x=u.getPixelRatio(),A=p*q/(g*x),w=(0,c.compose)(this.imageTransform_,p*d[0]/2,p*d[1]/2,A,A,0,x*(C[0]-f[0])/q,x*(f[1]-C[3])/q);(0,c.compose)(this.coordinateToCanvasPixelTransform,p*d[0]/2-w[4],p*d[1]/2-w[5],p/g,-p/g,0,-f[0],-f[1]),this.renderedResolution=q*p/x}return!!this.image_},p.prototype.forEachFeatureAtCoordinate=function(e,t,r,i){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,i):s.prototype.forEachFeatureAtCoordinate.call(this,e,t,r,i)},p}(p.default);l.handles=function(e){return e.getType()===r.default.IMAGE||e.getType()===r.default.VECTOR&&e.getRenderMode()===s.default.IMAGE},l.create=function(e,t){return new l(t)};var f=l;exports.default=f;
},{"../../reproj/common.js":"7f+F","../../ImageCanvas.js":"K7j2","../../LayerType.js":"8+bQ","../../ViewHint.js":"cuLW","../../array.js":"luEr","../../extent.js":"QDir","../../layer/VectorRenderType.js":"oqAD","../../obj.js":"mH6q","./Map.js":"vJhp","./IntermediateCanvas.js":"F9m+","../../transform.js":"P4eA"}],"346s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=i,exports.default=void 0;var t=function(t,i,n,m){this.minX=t,this.maxX=i,this.minY=n,this.maxY=m};function i(i,n,m,e,s){return void 0!==s?(s.minX=i,s.maxX=n,s.minY=m,s.maxY=e,s):new t(i,n,m,e)}t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var n=t;exports.default=n;
},{}],"hkM/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=d(require("../../LayerType.js")),i=d(require("../../TileRange.js")),r=d(require("../../TileState.js")),n=d(require("../../ViewHint.js")),o=require("../../dom.js"),s=require("../../extent.js"),a=d(require("./IntermediateCanvas.js")),l=require("../../transform.js");function d(e){return e&&e.__esModule?e:{default:e}}var h=function(t){function a(e,r){t.call(this,e),this.context=r?null:(0,o.createCanvasContext2D)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,s.createEmpty)(),this.tmpTileRange_=new i.default(0,0,0,0),this.imageTransform_=(0,l.create)(),this.zDirection=0}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a.prototype.isDrawableTile_=function(e){var t=this.getLayer(),i=e.getState(),n=t.getUseInterimTilesOnError();return i==r.default.LOADED||i==r.default.EMPTY||i==r.default.ERROR&&!n},a.prototype.getTile=function(e,t,i,n,o){var s=this.getLayer(),a=s.getSource().getTile(e,t,i,n,o);return a.getState()==r.default.ERROR&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(r.default.LOADED)),this.isDrawableTile_(a)||(a=a.getInterimTile()),a},a.prototype.prepareFrame=function(t,i){var o=t.pixelRatio,a=t.size,d=t.viewState,h=d.projection,u=d.resolution,g=d.center,c=this.getLayer(),T=c.getSource(),p=T.getRevision(),f=T.getTileGridForProjection(h),m=f.getZForResolution(u,this.zDirection),v=f.getResolution(m),x=Math.round(u/v)||1,_=t.extent;if(void 0!==i.extent&&(_=(0,s.getIntersection)(_,i.extent)),(0,s.isEmpty)(_))return!1;var R=f.getTileRangeForExtentAndZ(_,m),E=f.getTileRangeExtent(m,R),y=T.getTilePixelRatio(o),w={};w[m]={};var I,j,C,D=this.createLoadedTileFinder(T,h,w),S=t.viewHints,O=S[n.default.ANIMATING]||S[n.default.INTERACTING],P=this.tmpExtent,q=this.tmpTileRange_;for(this.newTiles_=!1,j=R.minX;j<=R.maxX;++j)for(C=R.minY;C<=R.maxY;++C)if(!(Date.now()-t.time>16&&O)){if(I=this.getTile(m,j,C,o,h),this.isDrawableTile_(I)){var A=(0,e.getUid)(this);if(I.getState()==r.default.LOADED){w[m][I.tileCoord.toString()]=I;var L=I.inTransition(A);this.newTiles_||!L&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(A,t.time))continue}var b=f.getTileCoordChildTileRange(I.tileCoord,q,P),M=!1;b&&(M=D(m+1,b)),M||f.forEachTileCoordParentTileRange(I.tileCoord,D,null,q,P)}var F=v*o/y*x;if(!(this.renderedResolution&&Date.now()-t.time>16&&O)&&(this.newTiles_||!this.renderedExtent_||!(0,s.containsExtent)(this.renderedExtent_,_)||this.renderedRevision!=p||x!=this.oversampling_||!O&&F!=this.renderedResolution)){var z=this.context;if(z){var N=T.getTilePixelSize(m,o,h),U=Math.round(R.getWidth()*N[0]/x),G=Math.round(R.getHeight()*N[1]/x),H=z.canvas;H.width!=U||H.height!=G?(this.oversampling_=x,H.width=U,H.height=G):((this.renderedExtent_&&!(0,s.equals)(E,this.renderedExtent_)||this.renderedRevision!=p)&&z.clearRect(0,0,U,G),x=this.oversampling_)}this.renderedTiles.length=0;var Y,X,Z,k,V,W,B,J,K,Q,$=Object.keys(w).map(Number);for($.sort(function(e,t){return e===m?1:t===m?-1:e>t?1:e<t?-1:0}),k=0,V=$.length;k<V;++k)for(var ee in Z=$[k],X=T.getTilePixelSize(Z,o,h),Y=f.getResolution(Z)/v,B=y*T.getGutterForProjection(h),J=w[Z])I=J[ee],j=((W=f.getTileCoordExtent(I.getTileCoord(),P))[0]-E[0])/v*y/x,C=(E[3]-W[3])/v*y/x,K=X[0]*Y/x,Q=X[1]*Y/x,this.drawTileImage(I,t,i,j,C,K,Q,B,m===Z),this.renderedTiles.push(I);this.renderedRevision=p,this.renderedResolution=v*o/y*x,this.renderedExtent_=E}var te=this.renderedResolution/u,ie=(0,l.compose)(this.imageTransform_,o*a[0]/2,o*a[1]/2,te,te,0,(this.renderedExtent_[0]-g[0])/this.renderedResolution*o,(g[1]-this.renderedExtent_[3])/this.renderedResolution*o);return(0,l.compose)(this.coordinateToCanvasPixelTransform,o*a[0]/2-ie[4],o*a[1]/2-ie[5],o/u,-o/u,0,-g[0],-g[1]),this.updateUsedTiles(t.usedTiles,T,m,R),this.manageTilePyramid(t,T,f,o,h,_,m,c.getPreload()),this.scheduleExpireCache(t,T),this.renderedTiles.length>0},a.prototype.drawTileImage=function(t,i,r,n,o,s,a,l,d){var h=this.getTileImage(t);if(h){var u=(0,e.getUid)(this),g=d?t.getAlpha(u,i.time):1,c=this.getLayer().getSource();1!==g||c.getOpaque(i.viewState.projection)||this.context.clearRect(n,o,s,a);var T=g!==this.context.globalAlpha;T&&(this.context.save(),this.context.globalAlpha=g),this.context.drawImage(h,l,l,h.width-2*l,h.height-2*l,n,o,s,a),T&&this.context.restore(),1!==g?i.animate=!0:d&&t.endTransition(u)}},a.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},a.prototype.getImageTransform=function(){return this.imageTransform_},a.prototype.getTileImage=function(e){return e.getImage()},a}(a.default);h.handles=function(e){return e.getType()===t.default.TILE},h.create=function(e,t){return new h(t)},h.prototype.getLayer;var u=h;exports.default=u;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../TileRange.js":"346s","../../TileState.js":"Xz9x","../../ViewHint.js":"cuLW","../../dom.js":"Xno5","../../extent.js":"QDir","./IntermediateCanvas.js":"F9m+","../../transform.js":"P4eA"}],"TK0U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=function(){};e.prototype.getReplay=function(e,r){return(0,t.abstract)()},e.prototype.isEmpty=function(){return(0,t.abstract)()},e.prototype.addDeclutter=function(e){return(0,t.abstract)()};var r=e;exports.default=r;
},{"../util.js":"KniQ"}],"D882":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"JxN9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=a;var t=require("../../math.js");function a(a,r,h,e,M,o,s,n){for(var p,u,v,i=[],P=a[r]>a[h-e],f=M.length,l=a[r],I=a[r+1],w=a[r+=e],c=a[r+1],d=0,q=Math.sqrt(Math.pow(w-l,2)+Math.pow(c-I,2)),x="",b=0,j=0;j<f;++j){u=P?f-j-1:j;var O=M.charAt(u),_=o(x=P?O+x:x+O)-b;b+=_;for(var g=s+_/2;r<h-e&&d+q<g;)l=w,I=c,w=a[r+=e],c=a[r+1],d+=q,q=Math.sqrt(Math.pow(w-l,2)+Math.pow(c-I,2));var m=g-d,y=Math.atan2(c-I,w-l);if(P&&(y+=y>0?-Math.PI:Math.PI),void 0!==v){var A=y-v;if(A+=A>Math.PI?-2*Math.PI:A<-Math.PI?2*Math.PI:0,Math.abs(A)>n)return null}var T=m/q,k=(0,t.lerp)(l,w,T),z=(0,t.lerp)(I,c,T);v==y?(P&&(p[0]=k,p[1]=z,p[2]=_/2),p[4]=x):(b=_,p=[k,z,_/2,y,x=O],P?i.unshift(p):i.push(p),v=y),s+=_}return i}
},{"../../math.js":"B96G"}],"kTJv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"FzwX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TEXT_ALIGN=exports.ORDER=void 0;var e=t(require("./ReplayType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=[e.default.POLYGON,e.default.CIRCLE,e.default.LINE_STRING,e.default.IMAGE,e.default.TEXT,e.default.DEFAULT];exports.ORDER=r;var a={};exports.TEXT_ALIGN=a,a.left=0,a.end=0,a.center=.5,a.right=1,a.start=1,a.top=0,a.middle=.5,a.hanging=.2,a.alphabetic=.8,a.ideographic=.8,a.bottom=1;
},{"./ReplayType.js":"D882"}],"zweS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../util.js"),e=require("../../array.js"),i=require("../../colorlike.js"),r=require("../../extent.js"),n=g(require("../../extent/Relationship.js")),o=g(require("../../geom/GeometryType.js")),a=require("../../geom/flat/inflate.js"),s=require("../../geom/flat/length.js"),l=require("../../geom/flat/textpath.js"),h=require("../../geom/flat/transform.js"),u=require("../../has.js"),d=require("../../obj.js"),f=g(require("../VectorContext.js")),p=require("../canvas.js"),c=g(require("./Instruction.js")),y=require("../replay.js"),_=require("../../transform.js");function g(t){return t&&t.__esModule?t:{default:t}}var v=(0,r.createEmpty)(),m=(0,_.create)(),x=function(f){function g(t,e,i,r,n,o){f.call(this),this.declutterTree=o,this.tolerance=t,this.maxExtent=e,this.overlaps=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=(0,_.create)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return f&&(g.__proto__=f),g.prototype=Object.create(f&&f.prototype),g.prototype.constructor=g,g.prototype.replayTextBackground_=function(t,e,i,r,n,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},g.prototype.replayImage_=function(t,e,i,n,o,a,s,l,h,u,d,f,c,y,g,x,E,L){var T=E||L;e-=o*=c,i-=a*=c;var S,C,I,O,k=g+u>n.width?n.width-u:g,b=l+d>n.height?n.height-d:l,D=x[3]+k*c+x[1],G=x[0]+b*c+x[2],M=e-x[3],R=i-x[0];(T||0!==f)&&(S=[M,R],C=[M+D,R],I=[M+D,R+G],O=[M,R+G]);var N=null;if(0!==f){var F=e+o,j=i+a;N=(0,_.compose)(m,F,j,1,1,f,-F,-j),(0,r.createOrUpdateEmpty)(v),(0,r.extendCoordinate)(v,(0,_.apply)(m,S)),(0,r.extendCoordinate)(v,(0,_.apply)(m,C)),(0,r.extendCoordinate)(v,(0,_.apply)(m,I)),(0,r.extendCoordinate)(v,(0,_.apply)(m,O))}else(0,r.createOrUpdate)(M,R,M+D,R+G,v);var q=t.canvas,w=L?L[2]*c/2:0,P=v[0]-w<=q.width&&v[2]+w>=0&&v[1]-w<=q.height&&v[3]+w>=0;if(y&&(e=Math.round(e),i=Math.round(i)),s){if(!P&&1==s[4])return;(0,r.extend)(s,v);var W=P?[t,N?N.slice(0):null,h,n,u,d,k,b,e,i,c]:null;W&&T&&W.push(E,L,S,C,I,O),s.push(W)}else P&&(T&&this.replayTextBackground_(t,S,C,I,O,E,L),(0,p.drawImage)(t,N,h,n,u,d,k,b,e,i,c))},g.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},g.prototype.appendFlatCoordinates=function(t,e,i,o,a,s){var l=this.coordinates.length,h=this.getBufferedMaxExtent();s&&(e+=o);var u,d,f,p=[t[e],t[e+1]],c=[NaN,NaN],y=!0;for(u=e+o;u<i;u+=o)c[0]=t[u],c[1]=t[u+1],(f=(0,r.coordinateRelationship)(h,c))!==d?(y&&(this.coordinates[l++]=p[0],this.coordinates[l++]=p[1]),this.coordinates[l++]=c[0],this.coordinates[l++]=c[1],y=!1):f===n.default.INTERSECTING?(this.coordinates[l++]=c[0],this.coordinates[l++]=c[1],y=!1):y=!0,p[0]=c[0],p[1]=c[1],d=f;return(a&&y||u===e+o)&&(this.coordinates[l++]=p[0],this.coordinates[l++]=p[1]),l},g.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,a=i.length;o<a;++o){var s=i[o],l=this.appendFlatCoordinates(t,e,s,r,!1,!1);n.push(l),e=s}return e},g.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,s,l,h,u=t.getType(),d=t.getStride(),f=this.coordinates.length;if(u==o.default.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),l=[];var p=t.getEndss();h=0;for(var y=0,_=p.length;y<_;++y){var g=[];h=this.drawCustomCoordinates_(r,h,p[y],d,g),l.push(g)}this.instructions.push([c.default.CUSTOM,f,l,t,i,a.inflateMultiCoordinatesArray])}else u==o.default.POLYGON||u==o.default.MULTI_LINE_STRING?(s=[],r=u==o.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(r,0,t.getEnds(),d,s),this.instructions.push([c.default.CUSTOM,f,s,t,i,a.inflateCoordinatesArray])):u==o.default.LINE_STRING||u==o.default.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,d,!1,!1),this.instructions.push([c.default.CUSTOM,f,n,t,i,a.inflateCoordinates])):u==o.default.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([c.default.CUSTOM,f,n,t,i]));this.endGeometry(t,e)},g.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[c.default.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[c.default.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},g.prototype.finish=function(){},g.prototype.fill_=function(t){if(this.alignFill_){var e=(0,_.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,p.resetTransform)},g.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],u.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},g.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(n)){this.declutterTree.insert(n);for(var o=5,a=t.length;o<a;++o){var s=t[o];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),p.drawImage.apply(void 0,s))}}t.length=5,(0,r.createOrUpdateEmpty)(t)}}},g.prototype.replay_=function(i,n,o,a,u,f,g){var v;this.pixelCoordinates_&&(0,e.equals)(n,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=(0,h.transform2D)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),(0,_.setFromArray)(this.renderedTransform_,n));for(var m,x,E,L,T,S,C,I,O,k,b,D,G=!(0,d.isEmpty)(o),M=0,R=a.length,N=0,F=0,j=0,q=null,w=null,P=this.coordinateCache_,W=this.viewRotation_,Y={context:i,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:W},A=this.instructions!=a||this.overlaps?0:200;M<R;){var U=a[M];switch(U[0]){case c.default.BEGIN_GEOMETRY:k=U[1],G&&o[(0,t.getUid)(k)]||!k.getGeometry()?M=U[2]:void 0===g||(0,r.intersects)(g,k.getGeometry().getExtent())?++M:M=U[2]+1;break;case c.default.BEGIN_PATH:F>A&&(this.fill_(i),F=0),j>A&&(i.stroke(),j=0),F||j||(i.beginPath(),L=T=NaN),++M;break;case c.default.CIRCLE:var B=v[N=U[1]],J=v[N+1],H=v[N+2]-B,K=v[N+3]-J,V=Math.sqrt(H*H+K*K);i.moveTo(B+V,J),i.arc(B,J,V,0,2*Math.PI,!0),++M;break;case c.default.CLOSE_PATH:i.closePath(),++M;break;case c.default.CUSTOM:N=U[1],m=U[2];var X=U[3],z=U[4],Q=6==U.length?U[5]:void 0;Y.geometry=X,Y.feature=k,M in P||(P[M]=[]);var Z=P[M];Q?Q(v,N,m,2,Z):(Z[0]=v[N],Z[1]=v[N+1],Z.length=2),z(Z,Y),++M;break;case c.default.DRAW_IMAGE:N=U[1],m=U[2],O=U[3],x=U[4],E=U[5],I=f?null:U[6];var $=U[7],tt=U[8],et=U[9],it=U[10],rt=U[11],nt=U[12],ot=U[13],at=U[14],st=void 0,lt=void 0,ht=void 0;for(U.length>16?(st=U[15],lt=U[16],ht=U[17]):(st=p.defaultPadding,lt=ht=!1),rt&&(nt+=W);N<m;N+=2)this.replayImage_(i,v[N],v[N+1],O,x,E,I,$,tt,et,it,nt,ot,u,at,st,lt?q:null,ht?w:null);this.renderDeclutter_(I,k),++M;break;case c.default.DRAW_CHARS:var ut=U[1],dt=U[2],ft=U[3];I=f?null:U[4];var pt=U[5],ct=U[6],yt=U[7],_t=U[8],gt=U[9],vt=U[10],mt=U[11],xt=U[12],Et=U[13],Lt=U[14],Tt=(0,s.lineStringLength)(v,ut,dt,2),St=_t(xt);if(pt||St<=Tt){var Ct=this.textStates[Et].textAlign,It=(Tt-St)*y.TEXT_ALIGN[Ct],Ot=(0,l.drawTextOnPath)(v,ut,dt,2,xt,_t,It,yt);if(Ot){var kt=void 0,bt=void 0,Dt=void 0,Gt=void 0,Mt=void 0;if(vt)for(kt=0,bt=Ot.length;kt<bt;++kt)Dt=(Mt=Ot[kt])[4],Gt=this.getImage(Dt,Et,"",vt),x=Mt[2]+mt,E=ft*Gt.height+2*(.5-ft)*mt-gt,this.replayImage_(i,Mt[0],Mt[1],Gt,x,E,I,Gt.height,1,0,0,Mt[3],Lt,!1,Gt.width,p.defaultPadding,null,null);if(ct)for(kt=0,bt=Ot.length;kt<bt;++kt)Dt=(Mt=Ot[kt])[4],Gt=this.getImage(Dt,Et,ct,""),x=Mt[2],E=ft*Gt.height-gt,this.replayImage_(i,Mt[0],Mt[1],Gt,x,E,I,Gt.height,1,0,0,Mt[3],Lt,!1,Gt.width,p.defaultPadding,null,null)}}this.renderDeclutter_(I,k),++M;break;case c.default.END_GEOMETRY:if(void 0!==f){var Rt=f(k=U[1]);if(Rt)return Rt}++M;break;case c.default.FILL:A?F++:this.fill_(i),++M;break;case c.default.MOVE_TO_LINE_TO:for(N=U[1],m=U[2],b=v[N],C=(D=v[N+1])+.5|0,(S=b+.5|0)===L&&C===T||(i.moveTo(b,D),L=S,T=C),N+=2;N<m;N+=2)S=(b=v[N])+.5|0,C=(D=v[N+1])+.5|0,N!=m-2&&S===L&&C===T||(i.lineTo(b,D),L=S,T=C);++M;break;case c.default.SET_FILL_STYLE:q=U,this.alignFill_=U[2],F&&(this.fill_(i),F=0,j&&(i.stroke(),j=0)),i.fillStyle=U[1],++M;break;case c.default.SET_STROKE_STYLE:w=U,j&&(i.stroke(),j=0),this.setStrokeStyle_(i,U),++M;break;case c.default.STROKE:A?j++:i.stroke(),++M;break;default:++M}}F&&this.fill_(i),j&&i.stroke()},g.prototype.replay=function(t,e,i,r,n){this.viewRotation_=i,this.replay_(t,e,r,this.instructions,n,void 0,void 0)},g.prototype.replayHitDetection=function(t,e,i,r,n,o){return this.viewRotation_=i,this.replay_(t,e,r,this.hitDetectionInstructions,!0,n,o)},g.prototype.reverseHitDetectionInstructions=function(){var t,i=this.hitDetectionInstructions;i.reverse();var r,n,o=i.length,a=-1;for(t=0;t<o;++t)(n=(r=i[t])[0])==c.default.END_GEOMETRY?a=t:n==c.default.BEGIN_GEOMETRY&&(r[2]=t,(0,e.reverseSubArray)(this.hitDetectionInstructions,a,t),a=-1)},g.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=(0,i.asColorLike)(n||p.defaultFillStyle)}else r.fillStyle=void 0;if(e){var o=e.getColor();r.strokeStyle=(0,i.asColorLike)(o||p.defaultStrokeStyle);var a=e.getLineCap();r.lineCap=void 0!==a?a:p.defaultLineCap;var s=e.getLineDash();r.lineDash=s?s.slice():p.defaultLineDash;var l=e.getLineDashOffset();r.lineDashOffset=l||p.defaultLineDashOffset;var h=e.getLineJoin();r.lineJoin=void 0!==h?h:p.defaultLineJoin;var u=e.getWidth();r.lineWidth=void 0!==u?u:p.defaultLineWidth;var d=e.getMiterLimit();r.miterLimit=void 0!==d?d:p.defaultMiterLimit,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},g.prototype.createFill=function(t,e){var i=t.fillStyle,r=[c.default.SET_FILL_STYLE,i];return"string"!=typeof i&&r.push(!0),r},g.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},g.prototype.createStroke=function(t){return[c.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},g.prototype.updateFillStyle=function(t,e,i){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=r)},g.prototype.updateStrokeStyle=function(t,i){var r=t.strokeStyle,n=t.lineCap,o=t.lineDash,a=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||o!=t.currentLineDash&&!(0,e.equals)(t.currentLineDash,o)||t.currentLineDashOffset!=a||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(void 0!==r&&i.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=a,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=h)},g.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[c.default.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},g.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,r.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,r.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},g}(f.default),E=x;exports.default=E;
},{"../../util.js":"KniQ","../../array.js":"luEr","../../colorlike.js":"V5+X","../../extent.js":"QDir","../../extent/Relationship.js":"bUAS","../../geom/GeometryType.js":"lmV0","../../geom/flat/inflate.js":"znXl","../../geom/flat/length.js":"ZZrx","../../geom/flat/textpath.js":"JxN9","../../geom/flat/transform.js":"LGwr","../../has.js":"f3Nv","../../obj.js":"mH6q","../VectorContext.js":"4LQ/","../canvas.js":"iAG7","./Instruction.js":"kTJv","../replay.js":"FzwX","../../transform.js":"P4eA"}],"+3Nw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=h(require("./Instruction.js")),i=h(require("./Replay.js"));function h(t){return t&&t.__esModule?t:{default:t}}var e=function(i){function h(t,h,e,o,s,r){i.call(this,t,h,e,o,s,r),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return i&&(h.__proto__=i),h.prototype=Object.create(i&&i.prototype),h.prototype.constructor=h,h.prototype.drawCoordinates_=function(t,i,h,e){return this.appendFlatCoordinates(t,i,h,e,!1,!1)},h.prototype.drawPoint=function(i,h){if(this.image_){this.beginGeometry(i,h);var e=i.getFlatCoordinates(),o=i.getStride(),s=this.coordinates.length,r=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([t.default.DRAW_IMAGE,s,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,s,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i,h)}},h.prototype.drawMultiPoint=function(i,h){if(this.image_){this.beginGeometry(i,h);var e=i.getFlatCoordinates(),o=i.getStride(),s=this.coordinates.length,r=this.drawCoordinates_(e,0,e.length,o);this.instructions.push([t.default.DRAW_IMAGE,s,r,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,s,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(i,h)}},h.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},h.prototype.setImageStyle=function(t,i){var h=t.getAnchor(),e=t.getSize(),o=t.getHitDetectionImage(1),s=t.getImage(1),r=t.getOrigin();this.anchorX_=h[0],this.anchorY_=h[1],this.declutterGroup_=i,this.hitDetectionImage_=o,this.image_=s,this.height_=e[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=e[0]},h}(i.default),o=e;exports.default=o;
},{"./Instruction.js":"kTJv","./Replay.js":"zweS"}],"Z7Pq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Instruction.js")),e=i(require("./Replay.js"));function i(t){return t&&t.__esModule?t:{default:t}}function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;var e=r();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=n?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=t[o]}}return i.default=t,e&&e.set(t,i),i}var o=function(e){function i(t,i,r,n,o,s){e.call(this,t,i,r,n,o,s)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.drawFlatCoordinates_=function(e,i,r,n){var o=this.coordinates.length,s=this.appendFlatCoordinates(e,i,r,n,!1,!1),a=[t.default.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},i.prototype.drawLineString=function(e,i){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],t.beginPathInstruction);var s=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(s,0,s.length,a),this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(e,i)}},i.prototype.drawMultiLineString=function(e,i){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,i),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],t.beginPathInstruction);for(var s=e.getEnds(),a=e.getFlatCoordinates(),u=e.getStride(),l=0,h=0,p=s.length;h<p;++h)l=this.drawFlatCoordinates_(a,l,s[h],u);this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(e,i)}},i.prototype.finish=function(){var e=this.state;null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(t.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null},i.prototype.applyStroke=function(i){null!=i.lastStroke&&i.lastStroke!=this.coordinates.length&&(this.instructions.push(t.strokeInstruction),i.lastStroke=this.coordinates.length),i.lastStroke=0,e.prototype.applyStroke.call(this,i),this.instructions.push(t.beginPathInstruction)},i}(e.default),s=o;exports.default=s;
},{"./Instruction.js":"kTJv","./Replay.js":"zweS"}],"s4Hb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../color.js"),e=require("../../geom/flat/simplify.js"),i=require("../canvas.js"),s=l(require("./Instruction.js")),n=o(require("./Replay.js"));function o(t){return t&&t.__esModule?t:{default:t}}function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function l(t){if(t&&t.__esModule)return t;var e=r();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=s?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}}return i.default=t,e&&e.set(t,i),i}var u=function(n){function o(t,e,i,s,o,r){n.call(this,t,e,i,s,o,r)}return n&&(o.__proto__=n),o.prototype=Object.create(n&&n.prototype),o.prototype.constructor=o,o.prototype.drawFlatCoordinatess_=function(t,e,i,n){var o=this.state,r=void 0!==o.fillStyle,l=null!=o.strokeStyle,u=i.length;this.instructions.push(s.beginPathInstruction),this.hitDetectionInstructions.push(s.beginPathInstruction);for(var h=0;h<u;++h){var a=i[h],c=this.coordinates.length,d=this.appendFlatCoordinates(t,e,a,n,!0,!l),p=[s.default.MOVE_TO_LINE_TO,c,d];this.instructions.push(p),this.hitDetectionInstructions.push(p),l&&(this.instructions.push(s.closePathInstruction),this.hitDetectionInstructions.push(s.closePathInstruction)),e=a}return r&&(this.instructions.push(s.fillInstruction),this.hitDetectionInstructions.push(s.fillInstruction)),l&&(this.instructions.push(s.strokeInstruction),this.hitDetectionInstructions.push(s.strokeInstruction)),e},o.prototype.drawCircle=function(e,n){var o=this.state,r=o.fillStyle,l=o.strokeStyle;if(void 0!==r||void 0!==l){this.setFillStrokeStyles_(e),this.beginGeometry(e,n),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([s.default.SET_FILL_STYLE,(0,t.asString)(i.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([s.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var u=e.getFlatCoordinates(),h=e.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(u,0,u.length,h,!1,!1);var c=[s.default.CIRCLE,a];this.instructions.push(s.beginPathInstruction,c),this.hitDetectionInstructions.push(s.beginPathInstruction,c),this.hitDetectionInstructions.push(s.fillInstruction),void 0!==o.fillStyle&&this.instructions.push(s.fillInstruction),void 0!==o.strokeStyle&&(this.instructions.push(s.strokeInstruction),this.hitDetectionInstructions.push(s.strokeInstruction)),this.endGeometry(e,n)}},o.prototype.drawPolygon=function(e,n){var o=this.state,r=o.fillStyle,l=o.strokeStyle;if(void 0!==r||void 0!==l){this.setFillStrokeStyles_(e),this.beginGeometry(e,n),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([s.default.SET_FILL_STYLE,(0,t.asString)(i.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([s.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var u=e.getEnds(),h=e.getOrientedFlatCoordinates(),a=e.getStride();this.drawFlatCoordinatess_(h,0,u,a),this.endGeometry(e,n)}},o.prototype.drawMultiPolygon=function(e,n){var o=this.state,r=o.fillStyle,l=o.strokeStyle;if(void 0!==r||void 0!==l){this.setFillStrokeStyles_(e),this.beginGeometry(e,n),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([s.default.SET_FILL_STYLE,(0,t.asString)(i.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([s.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);for(var u=e.getEndss(),h=e.getOrientedFlatCoordinates(),a=e.getStride(),c=0,d=0,p=u.length;d<p;++d)c=this.drawFlatCoordinatess_(h,c,u[d],a);this.endGeometry(e,n)}},o.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var i=this.coordinates,s=0,n=i.length;s<n;++s)i[s]=(0,e.snap)(i[s],t)},o.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},o}(n.default),h=u;exports.default=h;
},{"../../color.js":"eucy","../../geom/flat/simplify.js":"IEpt","../canvas.js":"iAG7","./Instruction.js":"kTJv","./Replay.js":"zweS"}],"96hC":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"AXKs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"0Bp2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidths=x,exports.default=void 0;var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../dom.js"),s=require("../../extent.js"),l=require("../../geom/flat/straightchunk.js"),a=d(require("../../geom/GeometryType.js")),n=require("../../has.js"),r=require("../canvas.js"),o=d(require("./Instruction.js")),h=d(require("./Replay.js")),f=require("../replay.js"),u=d(require("../../style/TextPlacement.js"));function d(t){return t&&t.__esModule?t:{default:t}}var g=function(h){function d(t,e,i,s,l,a){h.call(this,t,e,i,s,l,a),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},r.labelCache.prune()}return h&&(d.__proto__=h),d.prototype=Object.create(h&&h.prototype),d.prototype.constructor=d,d.prototype.drawText=function(t,e){var i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||n)){var o,h,f=this.coordinates.length,d=t.getType(),g=null,x=2,_=2;if(r.placement===u.default.LINE){if(!(0,s.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var c;if(g=t.getFlatCoordinates(),_=t.getStride(),d==a.default.LINE_STRING)c=[g.length];else if(d==a.default.MULTI_LINE_STRING)c=t.getEnds();else if(d==a.default.POLYGON)c=t.getEnds().slice(0,1);else if(d==a.default.MULTI_POLYGON){var S=t.getEndss();for(c=[],o=0,h=S.length;o<h;++o)c.push(S[o][0])}this.beginGeometry(t,e);for(var p,k=r.textAlign,y=0,v=0,m=c.length;v<m;++v){if(null==k){var L=(0,l.matchingChunk)(r.maxAngle,g,y,c[v],_);y=L[0],p=L[1]}else p=c[v];for(o=y;o<p;o+=_)this.coordinates.push(g[o],g[o+1]);x=this.coordinates.length,y=c[v],this.drawChars_(f,x,this.declutterGroup_),f=x}this.endGeometry(t,e)}else{var T=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),I=T.width/this.pixelRatio;switch(d){case a.default.POINT:case a.default.MULTI_POINT:x=(g=t.getFlatCoordinates()).length;break;case a.default.LINE_STRING:g=t.getFlatMidpoint();break;case a.default.CIRCLE:g=t.getCenter();break;case a.default.MULTI_LINE_STRING:x=(g=t.getFlatMidpoints()).length;break;case a.default.POLYGON:if(g=t.getFlatInteriorPoint(),!r.overflow&&g[2]/this.resolution<I)return;_=3;break;case a.default.MULTI_POLYGON:var A=t.getFlatInteriorPoints();for(g=[],o=0,h=A.length;o<h;o+=3)(r.overflow||A[o+2]/this.resolution>=I)&&g.push(A[o],A[o+1]);if(0==(x=g.length))return}x=this.appendFlatCoordinates(g,0,x,_,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(T,f,x),this.endGeometry(t,e)}}},d.prototype.getImage=function(t,e,s,l){var a,o=l+e+t+s+this.pixelRatio;if(!r.labelCache.containsKey(o)){var h=l?this.strokeStates[l]||this.textStrokeState_:null,u=s?this.fillStates[s]||this.textFillState_:null,d=this.textStates[e]||this.textState_,g=this.pixelRatio,_=d.scale*g,c=f.TEXT_ALIGN[d.textAlign||r.defaultTextAlign],S=l&&h.lineWidth?h.lineWidth:0,p=t.split("\n"),k=p.length,y=[],v=x(d.font,p,y),m=(0,r.measureTextHeight)(d.font),L=m*k,T=v+S,I=(0,i.createCanvasContext2D)(Math.ceil(T*_),Math.ceil((L+S)*_));a=I.canvas,r.labelCache.set(o,a),1!=_&&I.scale(_,_),I.font=d.font,l&&(I.strokeStyle=h.strokeStyle,I.lineWidth=S,I.lineCap=h.lineCap,I.lineJoin=h.lineJoin,I.miterLimit=h.miterLimit,n.CANVAS_LINE_DASH&&h.lineDash.length&&(I.setLineDash(h.lineDash),I.lineDashOffset=h.lineDashOffset)),s&&(I.fillStyle=u.fillStyle),I.textBaseline="middle",I.textAlign="center";var A,O=.5-c,C=c*a.width/_+O*S;if(l)for(A=0;A<k;++A)I.strokeText(p[A],C+O*y[A],.5*(S+m)+A*m);if(s)for(A=0;A<k;++A)I.fillText(p[A],C+O*y[A],.5*(S+m)+A*m)}return r.labelCache.get(o)},d.prototype.drawTextImage_=function(t,e,i){var s=this.textState_,l=this.textStrokeState_,a=this.pixelRatio,n=f.TEXT_ALIGN[s.textAlign||r.defaultTextAlign],h=f.TEXT_ALIGN[s.textBaseline],u=l&&l.lineWidth?l.lineWidth:0,d=n*t.width/a+2*(.5-n)*u,g=h*t.height/a+2*(.5-h)*u;this.instructions.push([o.default.DRAW_IMAGE,e,i,t,(d-this.textOffsetX_)*a,(g-this.textOffsetY_)*a,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,s.padding==r.defaultPadding?r.defaultPadding:s.padding.map(function(t){return t*a}),!!s.backgroundFill,!!s.backgroundStroke]),this.hitDetectionInstructions.push([o.default.DRAW_IMAGE,e,i,t,(d-this.textOffsetX_)*a,(g-this.textOffsetY_)*a,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/a,t.width,s.padding,!!s.backgroundFill,!!s.backgroundStroke])},d.prototype.drawChars_=function(t,e,i){var s=this.textStrokeState_,l=this.textState_,a=this.textFillState_,n=this.strokeKey_;s&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:s.strokeStyle,lineCap:s.lineCap,lineDashOffset:s.lineDashOffset,lineWidth:s.lineWidth,lineJoin:s.lineJoin,miterLimit:s.miterLimit,lineDash:s.lineDash}));var h=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:l.font,textAlign:l.textAlign||r.defaultTextAlign,scale:l.scale});var u=this.fillKey_;a&&(u in this.fillStates||(this.fillStates[u]={fillStyle:a.fillStyle}));var d=this.pixelRatio,g=f.TEXT_ALIGN[l.textBaseline],x=this.textOffsetY_*d,_=this.text_,c=l.font,S=l.scale,p=s?s.lineWidth*S/2:0,k=this.widths_[c];k||(this.widths_[c]=k={}),this.instructions.push([o.default.DRAW_CHARS,t,e,g,i,l.overflow,u,l.maxAngle,function(t){var e=k[t];return e||(e=k[t]=(0,r.measureTextWidth)(c,t)),e*S*d},x,n,p*d,_,h,1]),this.hitDetectionInstructions.push([o.default.DRAW_CHARS,t,e,g,i,l.overflow,u,l.maxAngle,function(t){var e=k[t];return e||(e=k[t]=(0,r.measureTextWidth)(c,t)),e*S},x,n,p,_,h,1/d])},d.prototype.setTextStyle=function(i,s){var l,a,n;if(i){this.declutterGroup_=s;var o=i.getFill();o?((a=this.textFillState_)||(a=this.textFillState_={}),a.fillStyle=(0,e.asColorLike)(o.getColor()||r.defaultFillStyle)):a=this.textFillState_=null;var h=i.getStroke();if(h){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var f=h.getLineDash(),u=h.getLineDashOffset(),d=h.getWidth(),g=h.getMiterLimit();n.lineCap=h.getLineCap()||r.defaultLineCap,n.lineDash=f?f.slice():r.defaultLineDash,n.lineDashOffset=void 0===u?r.defaultLineDashOffset:u,n.lineJoin=h.getLineJoin()||r.defaultLineJoin,n.lineWidth=void 0===d?r.defaultLineWidth:d,n.miterLimit=void 0===g?r.defaultMiterLimit:g,n.strokeStyle=(0,e.asColorLike)(h.getColor()||r.defaultStrokeStyle)}else n=this.textStrokeState_=null;l=this.textState_;var x=i.getFont()||r.defaultFont;(0,r.checkFont)(x);var _=i.getScale();l.overflow=i.getOverflow(),l.font=x,l.maxAngle=i.getMaxAngle(),l.placement=i.getPlacement(),l.textAlign=i.getTextAlign(),l.textBaseline=i.getTextBaseline()||r.defaultTextBaseline,l.backgroundFill=i.getBackgroundFill(),l.backgroundStroke=i.getBackgroundStroke(),l.padding=i.getPadding()||r.defaultPadding,l.scale=void 0===_?1:_;var c=i.getOffsetX(),S=i.getOffsetY(),p=i.getRotateWithView(),k=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=void 0===c?0:c,this.textOffsetY_=void 0===S?0:S,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===k?0:k,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,t.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?"),this.fillKey_=a?"string"==typeof a.fillStyle?a.fillStyle:"|"+(0,t.getUid)(a.fillStyle):""}else this.text_=""},d}(h.default);function x(t,e,i){for(var s=e.length,l=0,a=0;a<s;++a){var n=(0,r.measureTextWidth)(t,e[a]);l=Math.max(l,n),i.push(n)}return l}var _=g;exports.default=_;
},{"../../util.js":"KniQ","../../colorlike.js":"V5+X","../../dom.js":"Xno5","../../extent.js":"QDir","../../geom/flat/straightchunk.js":"96hC","../../geom/GeometryType.js":"lmV0","../../has.js":"f3Nv","../canvas.js":"iAG7","./Instruction.js":"kTJv","./Replay.js":"zweS","../replay.js":"FzwX","../../style/TextPlacement.js":"AXKs"}],"TGed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=m,exports.replayDeclutter=g,exports.default=void 0;var e=require("../../array.js"),t=require("../../dom.js"),r=require("../../extent.js"),i=require("../../geom/flat/transform.js"),o=require("../../obj.js"),a=y(require("../ReplayGroup.js")),n=y(require("../ReplayType.js")),s=y(require("./Replay.js")),l=y(require("./ImageReplay.js")),u=y(require("./LineStringReplay.js")),p=y(require("./PolygonReplay.js")),f=y(require("./TextReplay.js")),c=require("../replay.js"),h=require("../../transform.js");function y(e){return e&&e.__esModule?e:{default:e}}var d={Circle:p.default,Default:s.default,Image:l.default,LineString:u.default,Polygon:p.default,Text:f.default},v=function(a){function s(e,r,i,o,n,s,l){a.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=r,this.overlaps_=n,this.pixelRatio_=o,this.resolution_=i,this.renderBuffer_=l,this.replaysByZIndex_={},this.hitDetectionContext_=(0,t.createCanvasContext2D)(1,1),this.hitDetectionTransform_=(0,h.create)()}return a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s,s.prototype.addDeclutter=function(e){var t=null;return this.declutterTree_&&(e?(t=this.declutterGroup_)[4]++:(t=this.declutterGroup_=(0,r.createEmpty)()).push(1)),t},s.prototype.clip=function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()},s.prototype.hasReplays=function(e){for(var t in this.replaysByZIndex_)for(var r=this.replaysByZIndex_[t],i=0,o=e.length;i<o;++i)if(e[i]in r)return!0;return!1},s.prototype.finish=function(){for(var e in this.replaysByZIndex_){var t=this.replaysByZIndex_[e];for(var r in t)t[r].finish()}},s.prototype.forEachFeatureAtCoordinate=function(t,i,o,a,s,l,u){var p,f=2*(a=Math.round(a))+1,y=(0,h.compose)(this.hitDetectionTransform_,a+.5,a+.5,1/i,-1/i,-o,-t[0],-t[1]),d=this.hitDetectionContext_;d.canvas.width!==f||d.canvas.height!==f?(d.canvas.width=f,d.canvas.height=f):d.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(p=(0,r.createEmpty)(),(0,r.extendCoordinate)(p,t),(0,r.buffer)(p,i*(this.renderBuffer_+a),p));var v,_,x=m(a);function g(e){for(var t=d.getImageData(0,0,f,f).data,r=0;r<f;r++)for(var i=0;i<f;i++)if(x[r][i]&&t[4*(i*f+r)+3]>0){var o=void 0;return(!v||_!=n.default.IMAGE&&_!=n.default.TEXT||-1!==v.indexOf(e))&&(o=l(e)),o||void d.clearRect(0,0,f,f)}}this.declutterTree_&&(v=this.declutterTree_.all().map(function(e){return e.value}));var j,R,T,I,E,B=Object.keys(this.replaysByZIndex_).map(Number);for(B.sort(e.numberSafeCompareFunction),j=B.length-1;j>=0;--j){var C=B[j].toString();for(T=this.replaysByZIndex_[C],R=c.ORDER.length-1;R>=0;--R)if(void 0!==(I=T[_=c.ORDER[R]]))if(!u||_!=n.default.IMAGE&&_!=n.default.TEXT){if(E=I.replayHitDetection(d,y,o,s,g,p))return E}else{var b=u[C];b?b.push(I,y.slice(0)):u[C]=[I,y.slice(0)]}}},s.prototype.getClipCoords=function(e){var t=this.maxExtent_,r=t[0],o=t[1],a=t[2],n=t[3],s=[r,o,r,n,a,n,a,o];return(0,i.transform2D)(s,0,8,2,e,s),s},s.prototype.getReplay=function(e,t){var r=void 0!==e?e.toString():"0",i=this.replaysByZIndex_[r];void 0===i&&(i={},this.replaysByZIndex_[r]=i);var o=i[t];void 0===o&&(o=new(0,d[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),i[t]=o);return o},s.prototype.getReplays=function(){return this.replaysByZIndex_},s.prototype.isEmpty=function(){return(0,o.isEmpty)(this.replaysByZIndex_)},s.prototype.replay=function(t,r,i,o,a,s,l){var u=Object.keys(this.replaysByZIndex_).map(Number);u.sort(e.numberSafeCompareFunction),t.save(),this.clip(t,r);var p,f,h,y,d,v,_=s||c.ORDER;for(p=0,f=u.length;p<f;++p){var x=u[p].toString();for(d=this.replaysByZIndex_[x],h=0,y=_.length;h<y;++h){var m=_[h];if(v=d[m],void 0!==v)if(!l||m!=n.default.IMAGE&&m!=n.default.TEXT)v.replay(t,r,i,o,a);else{var g=l[x];g?g.push(v,r.slice(0)):l[x]=[v,r.slice(0)]}}}t.restore()},s}(a.default),_={0:[[!0]]};function x(e,t,r){var i,o=Math.floor(e.length/2);if(t>=o)for(i=o;i<t;i++)e[i][r]=!0;else if(t<o)for(i=t+1;i<o;i++)e[i][r]=!0}function m(e){if(void 0!==_[e])return _[e];for(var t=2*e+1,r=new Array(t),i=0;i<t;i++)r[i]=new Array(t);for(var o=e,a=0,n=0;o>=a;)x(r,e+o,e+a),x(r,e+a,e+o),x(r,e-a,e+o),x(r,e-o,e+a),x(r,e-o,e-a),x(r,e-a,e-o),x(r,e+a,e-o),x(r,e+o,e-a),2*((n+=1+2*++a)-o)+1>0&&(n+=1-2*(o-=1));return _[e]=r,r}function g(t,r,i,o){for(var a=Object.keys(t).map(Number).sort(e.numberSafeCompareFunction),n={},s=0,l=a.length;s<l;++s)for(var u=t[a[s].toString()],p=0,f=u.length;p<f;){var c=u[p++],h=u[p++];c.replay(r,h,i,n,o)}}var j=v;exports.default=j;
},{"../../array.js":"luEr","../../dom.js":"Xno5","../../extent.js":"QDir","../../geom/flat/transform.js":"LGwr","../../obj.js":"mH6q","../ReplayGroup.js":"TK0U","../ReplayType.js":"D882","./Replay.js":"zweS","./ImageReplay.js":"+3Nw","./LineStringReplay.js":"Z7Pq","./PolygonReplay.js":"s4Hb","./TextReplay.js":"0Bp2","../replay.js":"FzwX","../../transform.js":"P4eA"}],"UCah":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=d,exports.getSquaredTolerance=i,exports.getTolerance=u,exports.renderFeature=o;var e=require("../util.js"),t=l(require("../ImageState.js")),r=l(require("../geom/GeometryType.js")),a=l(require("../render/ReplayType.js"));function l(e){return e&&e.__esModule?e:{default:e}}var g=.5,n={Point:s,LineString:v,Polygon:p,MultiPoint:c,MultiLineString:I,MultiPolygon:S,GeometryCollection:x,Circle:f};function d(t,r){return parseInt((0,e.getUid)(t),10)-parseInt((0,e.getUid)(r),10)}function i(e,t){var r=u(e,t);return r*r}function u(e,t){return g*e/t}function f(e,t,r,l){var g=r.getFill(),n=r.getStroke();if(g||n){var d=e.getReplay(r.getZIndex(),a.default.CIRCLE);d.setFillStrokeStyle(g,n),d.drawCircle(t,l)}var i=r.getText();if(i){var u=e.getReplay(r.getZIndex(),a.default.TEXT);u.setTextStyle(i,e.addDeclutter(!1)),u.drawText(t,l)}}function o(e,r,a,l,g,n){var d=!1,i=a.getImage();if(i){var u=i.getImageState();u==t.default.LOADED||u==t.default.ERROR?i.unlistenImageChange(g,n):(u==t.default.IDLE&&i.load(),u=i.getImageState(),i.listenImageChange(g,n),d=!0)}return T(e,r,a,l),d}function T(e,t,r,a){var l=r.getGeometryFunction()(t);if(l){var g=l.getSimplifiedGeometry(a);if(r.getRenderer())y(e,g,r,t);else(0,n[g.getType()])(e,g,r,t)}}function y(e,t,l,g){if(t.getType()!=r.default.GEOMETRY_COLLECTION)e.getReplay(l.getZIndex(),a.default.DEFAULT).drawCustom(t,g,l.getRenderer());else for(var n=t.getGeometries(),d=0,i=n.length;d<i;++d)y(e,n[d],l,g)}function x(e,t,r,a){var l,g,d=t.getGeometriesArray();for(l=0,g=d.length;l<g;++l){(0,n[d[l].getType()])(e,d[l],r,a)}}function v(e,t,r,l){var g=r.getStroke();if(g){var n=e.getReplay(r.getZIndex(),a.default.LINE_STRING);n.setFillStrokeStyle(null,g),n.drawLineString(t,l)}var d=r.getText();if(d){var i=e.getReplay(r.getZIndex(),a.default.TEXT);i.setTextStyle(d,e.addDeclutter(!1)),i.drawText(t,l)}}function I(e,t,r,l){var g=r.getStroke();if(g){var n=e.getReplay(r.getZIndex(),a.default.LINE_STRING);n.setFillStrokeStyle(null,g),n.drawMultiLineString(t,l)}var d=r.getText();if(d){var i=e.getReplay(r.getZIndex(),a.default.TEXT);i.setTextStyle(d,e.addDeclutter(!1)),i.drawText(t,l)}}function S(e,t,r,l){var g=r.getFill(),n=r.getStroke();if(n||g){var d=e.getReplay(r.getZIndex(),a.default.POLYGON);d.setFillStrokeStyle(g,n),d.drawMultiPolygon(t,l)}var i=r.getText();if(i){var u=e.getReplay(r.getZIndex(),a.default.TEXT);u.setTextStyle(i,e.addDeclutter(!1)),u.drawText(t,l)}}function s(e,r,l,g){var n=l.getImage();if(n){if(n.getImageState()!=t.default.LOADED)return;var d=e.getReplay(l.getZIndex(),a.default.IMAGE);d.setImageStyle(n,e.addDeclutter(!1)),d.drawPoint(r,g)}var i=l.getText();if(i){var u=e.getReplay(l.getZIndex(),a.default.TEXT);u.setTextStyle(i,e.addDeclutter(!!n)),u.drawText(r,g)}}function c(e,r,l,g){var n=l.getImage();if(n){if(n.getImageState()!=t.default.LOADED)return;var d=e.getReplay(l.getZIndex(),a.default.IMAGE);d.setImageStyle(n,e.addDeclutter(!1)),d.drawMultiPoint(r,g)}var i=l.getText();if(i){var u=e.getReplay(l.getZIndex(),a.default.TEXT);u.setTextStyle(i,e.addDeclutter(!!n)),u.drawText(r,g)}}function p(e,t,r,l){var g=r.getFill(),n=r.getStroke();if(g||n){var d=e.getReplay(r.getZIndex(),a.default.POLYGON);d.setFillStrokeStyle(g,n),d.drawPolygon(t,l)}var i=r.getText();if(i){var u=e.getReplay(r.getZIndex(),a.default.TEXT);u.setTextStyle(i,e.addDeclutter(!1)),u.drawText(t,l)}}
},{"../util.js":"KniQ","../ImageState.js":"u3k+","../geom/GeometryType.js":"lmV0","../render/ReplayType.js":"D882"}],"F2e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=c(require("../../LayerType.js")),r=c(require("../../ViewHint.js")),a=require("../../dom.js"),i=require("../../events.js"),n=c(require("../../events/EventType.js")),o=c(require("rbush")),s=require("../../extent.js"),l=c(require("../../render/EventType.js")),d=require("../../render/canvas.js"),h=c(require("../../render/canvas/ReplayGroup.js")),u=c(require("./Layer.js")),p=require("../vector.js");function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function u(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?(0,o.default)(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,s.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=(0,a.createCanvasContext2D)(),(0,i.listen)(d.labelCache,n.default.CLEAR,this.handleFontsChanged_,this)}return t&&(u.__proto__=t),u.prototype=Object.create(t&&t.prototype),u.prototype.constructor=u,u.prototype.disposeInternal=function(){(0,i.unlisten)(d.labelCache,n.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},u.prototype.compose=function(e,t,a){var i=t.extent,n=t.pixelRatio,o=a.managed?t.skippedFeatureUids:{},h=t.viewState,u=h.projection,p=h.rotation,c=u.getExtent(),f=this.getLayer().getSource(),g=this.getTransform(t,0),v=a.extent,y=void 0!==v;y&&this.clip(e,t,v);var _=this.replayGroup_;if(_&&!_.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var x,E=this.getLayer(),R=0,m=0,A=1!==a.opacity,C=E.hasListener(l.default.RENDER);if(A||C){var T=e.canvas.width,I=e.canvas.height;if(p){var j=Math.round(Math.sqrt(T*T+I*I));R=(j-T)/2,m=(j-I)/2,T=I=j}this.context.canvas.width=T,this.context.canvas.height=I,x=this.context}else x=e;var F=x.globalAlpha;A||(x.globalAlpha=a.opacity),x!=e&&x.translate(R,m);var q=t.viewHints,b=!(q[r.default.ANIMATING]||q[r.default.INTERACTING]),G=t.size[0]*n,w=t.size[1]*n;if((0,d.rotateAtOffset)(x,-p,G/2,w/2),_.replay(x,g,p,o,b),f.getWrapX()&&u.canWrapX()&&!(0,s.containsExtent)(c,i)){for(var S,N=i[0],O=(0,s.getWidth)(c),L=0;N<c[0];)S=O*--L,g=this.getTransform(t,S),_.replay(x,g,p,o,b),N+=O;for(L=0,N=i[2];N>c[2];)S=O*++L,g=this.getTransform(t,S),_.replay(x,g,p,o,b),N-=O}if((0,d.rotateAtOffset)(x,p,G/2,w/2),C&&this.dispatchRenderEvent(x,t,g),x!=e){if(A){var W=e.globalAlpha;e.globalAlpha=a.opacity,e.drawImage(x.canvas,-R,-m),e.globalAlpha=W}else e.drawImage(x.canvas,-R,-m);x.translate(-R,-m)}A||(x.globalAlpha=F)}y&&e.restore()},u.prototype.composeFrame=function(e,t,r){var a=this.getTransform(e,0);this.preCompose(r,e,a),this.compose(r,e,t),this.postCompose(r,e,t,a)},u.prototype.forEachFeatureAtCoordinate=function(t,r,a,i,n){if(this.replayGroup_){var o=r.viewState.resolution,s=r.viewState.rotation,l=this.getLayer(),d={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,a,{},function(t){var r=(0,e.getUid)(t);if(!(r in d))return d[r]=!0,i.call(n,t,l)},null)}},u.prototype.handleFontsChanged_=function(e){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},u.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},u.prototype.prepareFrame=function(e,t){var a=this.getLayer(),i=a.getSource(),n=e.viewHints[r.default.ANIMATING],o=e.viewHints[r.default.INTERACTING],l=a.getUpdateWhileAnimating(),d=a.getUpdateWhileInteracting();if(!this.dirty_&&!l&&n||!d&&o)return!0;var u=e.extent,c=e.viewState,f=c.projection,g=c.resolution,v=e.pixelRatio,y=a.getRevision(),_=a.getRenderBuffer(),x=a.getRenderOrder();void 0===x&&(x=p.defaultOrder);var E=(0,s.buffer)(u,_*g),R=c.projection.getExtent();if(i.getWrapX()&&c.projection.canWrapX()&&!(0,s.containsExtent)(R,e.extent)){var m=(0,s.getWidth)(R),A=Math.max((0,s.getWidth)(E)/2,m);E[0]=R[0]-A,E[2]=R[2]+A}if(!this.dirty_&&this.renderedResolution_==g&&this.renderedRevision_==y&&this.renderedRenderOrder_==x&&(0,s.containsExtent)(this.renderedExtent_,E))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var C=new h.default((0,p.getTolerance)(g,v),E,g,v,i.getOverlaps(),this.declutterTree_,a.getRenderBuffer());i.loadFeatures(E,g,f);var T=function(e){var t,r=e.getStyleFunction()||a.getStyleFunction();if(r&&(t=r(e,g)),t){var i=this.renderFeature(e,g,v,t,C);this.dirty_=this.dirty_||i}}.bind(this);if(x){var I=[];i.forEachFeatureInExtent(E,function(e){I.push(e)}),I.sort(x);for(var j=0,F=I.length;j<F;++j)T(I[j])}else i.forEachFeatureInExtent(E,T);return C.finish(),this.renderedResolution_=g,this.renderedRevision_=y,this.renderedRenderOrder_=x,this.renderedExtent_=E,this.replayGroup_=C,this.replayGroupChanged=!0,!0},u.prototype.renderFeature=function(e,t,r,a,i){if(!a)return!1;var n=!1;if(Array.isArray(a))for(var o=0,s=a.length;o<s;++o)n=(0,p.renderFeature)(i,e,a[o],(0,p.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this)||n;else n=(0,p.renderFeature)(i,e,a,(0,p.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this);return n},u}(u.default);f.handles=function(e){return e.getType()===t.default.VECTOR},f.create=function(e,t){return new f(t)};var g=f;exports.default=g;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../ViewHint.js":"cuLW","../../dom.js":"Xno5","../../events.js":"55Uq","../../events/EventType.js":"C8cu","rbush":"y0Xa","../../extent.js":"QDir","../../render/EventType.js":"z39m","../../render/canvas.js":"iAG7","../../render/canvas/ReplayGroup.js":"TGed","./Layer.js":"+vPf","../vector.js":"UCah"}],"Q2C4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"};exports.default=e;
},{}],"UST7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=C(require("../../LayerType.js")),r=C(require("../../TileState.js")),i=C(require("../../ViewHint.js")),o=require("../../dom.js"),n=require("../../events.js"),a=C(require("../../events/EventType.js")),l=C(require("rbush")),s=require("../../extent.js"),d=C(require("../../layer/VectorTileRenderType.js")),u=require("../../proj.js"),p=C(require("../../proj/Units.js")),f=C(require("../../render/ReplayType.js")),g=require("../../render/canvas.js"),h=E(require("../../render/canvas/ReplayGroup.js")),c=require("../../render/replay.js"),y=C(require("./TileLayer.js")),v=require("../vector.js"),T=require("../../transform.js");function R(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return R=function(){return e},e}function E(e){if(e&&e.__esModule)return e;var t=R();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=i?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o]}}return r.default=e,t&&t.set(e,r),r}function C(e){return e&&e.__esModule?e:{default:e}}var _={image:[f.default.POLYGON,f.default.CIRCLE,f.default.LINE_STRING,f.default.IMAGE,f.default.TEXT],hybrid:[f.default.POLYGON,f.default.LINE_STRING]},j={image:[f.default.DEFAULT],hybrid:[f.default.IMAGE,f.default.TEXT,f.default.DEFAULT],vector:c.ORDER},m=function(t){function f(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?(0,l.default)(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=(0,T.create)();var r=e.getRenderMode();this.zDirection=r===d.default.VECTOR?1:0,r!==d.default.VECTOR&&(this.context=(0,o.createCanvasContext2D)()),(0,n.listen)(g.labelCache,a.default.CLEAR,this.handleFontsChanged_,this)}return t&&(f.__proto__=t),f.prototype=Object.create(t&&t.prototype),f.prototype.constructor=f,f.prototype.disposeInternal=function(){(0,n.unlisten)(g.labelCache,a.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},f.prototype.getTile=function(e,i,o,n,a){var l=t.prototype.getTile.call(this,e,i,o,n,a);return l.getState()===r.default.LOADED&&(this.createReplayGroup_(l,n,a),this.context&&this.renderTileImage_(l,n,a)),l},f.prototype.getTileImage=function(e){var t=this.getLayer();return e.getImage(t)},f.prototype.prepareFrame=function(e,r){var i=this.getLayer().getRevision();return this.renderedLayerRevision_!=i&&(this.renderedTiles.length=0),this.renderedLayerRevision_=i,t.prototype.prepareFrame.call(this,e,r)},f.prototype.createReplayGroup_=function(e,t,i){var o=this,n=this.getLayer(),a=n.getRevision(),l=n.getRenderOrder()||null,d=e.getReplayState(n);if(d.dirty||d.renderedRevision!=a||d.renderedRenderOrder!=l){for(var f=n.getSource(),g=f.getTileGrid(),c=f.getTileGridForProjection(i).getResolution(e.tileCoord[0]),y=e.extent,T=function(a,T){var R=e.getTile(e.tileKeys[a]);if(R.getState()==r.default.LOADED){var E=R.tileCoord,C=g.getTileCoordExtent(E),_=(0,s.getIntersection)(y,C),j=(0,s.equals)(C,_)?null:(0,s.buffer)(_,n.getRenderBuffer()*c,o.tmpExtent),m=R.getProjection(),L=!1;(0,u.equivalent)(i,m)||(L=!0,R.setProjection(i)),d.dirty=!1;var S=new h.default(0,_,c,t,f.getOverlaps(),o.declutterTree_,n.getRenderBuffer()),O=(0,v.getSquaredTolerance)(c,t),x=function(e){var t,r=e.getStyleFunction()||n.getStyleFunction();if(r&&(t=r(e,c)),t){var i=this.renderFeature(e,O,t,S);this.dirty_=this.dirty_||i,d.dirty=d.dirty||i}},I=R.getFeatures();l&&l!==d.renderedRenderOrder&&I.sort(l);for(var A=0,G=I.length;A<G;++A){var q=I[A];L&&(m.getUnits()==p.default.TILE_PIXELS&&(m.setWorldExtent(C),m.setExtent(R.getExtent())),q.getGeometry().transform(m,i)),j&&!(0,s.intersects)(j,q.getGeometry().getExtent())||x.call(o,q)}S.finish(),R.setReplayGroup(n,e.tileCoord.toString(),S)}},R=0,E=e.tileKeys.length;R<E;++R)T(R);d.renderedRevision=a,d.renderedRenderOrder=l}},f.prototype.forEachFeatureAtCoordinate=function(t,i,o,n,a){var l=i.viewState.resolution,d=i.viewState.rotation;o=null==o?0:o;var u,p,f,g,h=this.getLayer(),c={},y=this.renderedTiles;for(f=0,g=y.length;f<g;++f){var v=y[f];if(u=(0,s.buffer)(v.extent,o*l,u),(0,s.containsCoordinate)(u,t))for(var T=0,R=v.tileKeys.length;T<R;++T){var E=v.getTile(v.tileKeys[T]);if(E.getState()==r.default.LOADED){var C=E.getReplayGroup(h,v.tileCoord.toString());p=p||C.forEachFeatureAtCoordinate(t,l,d,o,{},function(t){var r=(0,e.getUid)(t);if(!(r in c))return c[r]=!0,n.call(a,t,h)},null)}}}return p},f.prototype.getReplayTransform_=function(e,t){var r=this.getLayer().getSource().getTileGrid(),i=e.tileCoord,o=r.getResolution(i[0]),n=t.viewState,a=t.pixelRatio,l=n.resolution/a,d=r.getTileCoordExtent(i,this.tmpExtent),u=n.center,p=(0,s.getTopLeft)(d),f=t.size,g=Math.round(a*f[0]/2),h=Math.round(a*f[1]/2);return(0,T.compose)(this.tmpTransform_,g,h,o/l,o/l,n.rotation,(p[0]-u[0])/o,(u[1]-p[1])/o)},f.prototype.handleFontsChanged_=function(e){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},f.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},f.prototype.postCompose=function(e,o,n){var a=this.getLayer(),l=a.getRenderMode();if(l!=d.default.IMAGE){var s,u,p=a.getDeclutter()?{}:null,f=a.getSource(),c=j[l],y=o.pixelRatio,v=o.viewState.rotation,T=o.size;v&&(s=Math.round(y*T[0]/2),u=Math.round(y*T[1]/2),(0,g.rotateAtOffset)(e,-v,s,u)),p&&this.declutterTree_.clear();for(var R=o.viewHints,E=!(R[i.default.ANIMATING]||R[i.default.INTERACTING]),C=this.renderedTiles,_=f.getTileGridForProjection(o.viewState.projection),m=[],L=[],S=C.length-1;S>=0;--S){var O=C[S];if(O.getState()!=r.default.ABORT)for(var x=O.tileCoord,I=_.getTileCoordExtent(x,this.tmpExtent)[0]-O.extent[0],A=void 0,G=0,q=O.tileKeys.length;G<q;++G){var D=O.getTile(O.tileKeys[G]);if(D.getState()==r.default.LOADED){var F=D.getReplayGroup(a,x.toString());if(F&&F.hasReplays(c)){A||(A=this.getTransform(o,I));var b=D.tileCoord[0],M=F.getClipCoords(A);e.save(),e.globalAlpha=n.opacity;for(var P=0,w=m.length;P<w;++P){var N=m[P];b<L[P]&&(e.beginPath(),e.moveTo(M[0],M[1]),e.lineTo(M[2],M[3]),e.lineTo(M[4],M[5]),e.lineTo(M[6],M[7]),e.moveTo(N[6],N[7]),e.lineTo(N[4],N[5]),e.lineTo(N[2],N[3]),e.lineTo(N[0],N[1]),e.clip())}F.replay(e,A,v,{},E,c,p),e.restore(),m.push(M),L.push(b)}}}}p&&(0,h.replayDeclutter)(p,e,v,E),v&&(0,g.rotateAtOffset)(e,v,s,u)}t.prototype.postCompose.call(this,e,o,n)},f.prototype.renderFeature=function(e,t,r,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var n=0,a=r.length;n<a;++n)o=(0,v.renderFeature)(i,e,r[n],t,this.handleStyleImageChange_,this)||o;else o=(0,v.renderFeature)(i,e,r,t,this.handleStyleImageChange_,this);return o},f.prototype.renderTileImage_=function(e,t,i){var o=this.getLayer(),n=e.getReplayState(o),a=o.getRevision(),l=_[o.getRenderMode()];if(l&&n.renderedTileRevision!==a){n.renderedTileRevision=a;var s=e.wrappedTileCoord,d=s[0],u=o.getSource(),p=u.getTileGridForProjection(i),f=p.getResolution(d),g=e.getContext(o),h=u.getTilePixelSize(d,t,i);g.canvas.width=h[0],g.canvas.height=h[1];for(var c=p.getTileCoordExtent(s,this.tmpExtent),y=0,v=e.tileKeys.length;y<v;++y){var R=e.getTile(e.tileKeys[y]);if(R.getState()==r.default.LOADED){var E=t/f,C=(0,T.reset)(this.tmpTransform_);(0,T.scale)(C,E,-E),(0,T.translate)(C,-c[0],-c[3]),R.getReplayGroup(o,e.tileCoord.toString()).replay(g,C,0,{},!0,l)}}}},f}(y.default);m.handles=function(e){return e.getType()===t.default.VECTOR_TILE},m.create=function(e,t){return new m(t)};var L=m;exports.default=L;
},{"../../util.js":"KniQ","../../LayerType.js":"8+bQ","../../TileState.js":"Xz9x","../../ViewHint.js":"cuLW","../../dom.js":"Xno5","../../events.js":"55Uq","../../events/EventType.js":"C8cu","rbush":"y0Xa","../../extent.js":"QDir","../../layer/VectorTileRenderType.js":"Q2C4","../../proj.js":"Diht","../../proj/Units.js":"yZx6","../../render/ReplayType.js":"D882","../../render/canvas.js":"iAG7","../../render/canvas/ReplayGroup.js":"TGed","../../render/replay.js":"FzwX","./TileLayer.js":"hkM/","../vector.js":"UCah","../../transform.js":"P4eA"}],"8kYy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("./PluggableMap.js")),r=require("./control/util.js"),t=require("./interaction.js"),a=require("./obj.js"),n=c(require("./renderer/canvas/ImageLayer.js")),o=c(require("./renderer/canvas/Map.js")),s=c(require("./renderer/canvas/TileLayer.js")),u=c(require("./renderer/canvas/VectorLayer.js")),i=c(require("./renderer/canvas/VectorTileLayer.js"));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function c(n){(n=(0,a.assign)({},n)).controls||(n.controls=(0,r.defaults)()),n.interactions||(n.interactions=(0,t.defaults)()),e.call(this,n)}return e&&(c.__proto__=e),c.prototype=Object.create(e&&e.prototype),c.prototype.constructor=c,c.prototype.createRenderer=function(){var e=new o.default(this);return e.registerLayerRenderers([n.default,s.default,u.default,i.default]),e},c}(e.default),d=l;exports.default=d;
},{"./PluggableMap.js":"kRwz","./control/util.js":"uzb+","./interaction.js":"aMDX","./obj.js":"mH6q","./renderer/canvas/ImageLayer.js":"rz/N","./renderer/canvas/Map.js":"vJhp","./renderer/canvas/TileLayer.js":"hkM/","./renderer/canvas/VectorLayer.js":"F2e3","./renderer/canvas/VectorTileLayer.js":"UST7"}],"2faT":[function(require,module,exports) {
"use strict";function e(e,t,r,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function t(e,t,r){return e+"/"+t+"/"+r}function r(e){return t(e[0],e[1],e[2])}function n(e){return e.split("/").map(Number)}function o(e){return(e[1]<<e[0])+e[2]}function u(e){var t,r,n=e[0],o=new Array(n),u=1<<n-1;for(t=0;t<n;++t)r=48,e[1]&u&&(r+=1),e[2]&u&&(r+=2),o[t]=String.fromCharCode(r),u>>=1;return o.join("")}function i(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var u,i=t.getExtent();return!(u=i?t.getTileRangeForExtentAndZ(i,r):t.getFullTileRange(r))||u.containsXY(n,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=e,exports.getKeyZXY=t,exports.getKey=r,exports.fromKey=n,exports.hash=o,exports.quadKey=u,exports.withinExtentAndZ=i;
},{}],"p1v/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.nullTileUrlFunction=u,exports.expandUrl=i;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(i,c,l){return i?e.replace(n,i[0].toString()).replace(o,i[1].toString()).replace(a,function(){return(-i[2]-1).toString()}).replace(u,function(){var e=i[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()+i[2]).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),u=0;u<t;++u)o[u]=n(r[u],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var u=(0,t.hash)(n),i=(0,e.modulo)(u,r.length);return r[i](n,o,a)}}}function u(r,e,t){}function i(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n,o=t[1].charCodeAt(0),a=t[2].charCodeAt(0);for(n=o;n<=a;++n)e.push(r.replace(t[0],String.fromCharCode(n)));return e}if(t=t=/\{(\d+)-(\d+)\}/.exec(r)){for(var u=parseInt(t[2],10),i=parseInt(t[1],10);i<=u;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}
},{"./asserts.js":"fLG6","./math.js":"B96G","./tilecoord.js":"2faT"}],"SU9K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jsonp=t;var e=require("./util.js");function t(t,n,o,i){var c=document.createElement("script"),r="olc_"+(0,e.getUid)(n);function a(){delete window[r],c.parentNode.removeChild(c)}c.async=!0,c.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+r;var d=setTimeout(function(){a(),o&&o()},1e4);window[r]=function(e){clearTimeout(d),a(),n(e)},document.getElementsByTagName("head")[0].appendChild(c)}
},{"./util.js":"KniQ"}],"IWZI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./TileState.js")),i=require("./easing.js"),e=n(require("./events/Target.js")),r=n(require("./events/EventType.js"));function n(t){return t&&t.__esModule?t:{default:t}}var o=function(e){function n(t,i,r){e.call(this);var n=r||{};this.tileCoord=t,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.changed=function(){this.dispatchEvent(r.default.CHANGE)},n.prototype.getKey=function(){return this.key+"/"+this.tileCoord},n.prototype.getInterimTile=function(){if(!this.interimTile)return this;var i=this.interimTile;do{if(i.getState()==t.default.LOADED)return i;i=i.interimTile}while(i);return this},n.prototype.refreshInterimChain=function(){if(this.interimTile){var i=this.interimTile,e=this;do{if(i.getState()==t.default.LOADED){i.interimTile=null;break}i.getState()==t.default.LOADING?e=i:i.getState()==t.default.IDLE?e.interimTile=i.interimTile:e=i,i=e.interimTile}while(i)}},n.prototype.getTileCoord=function(){return this.tileCoord},n.prototype.getState=function(){return this.state},n.prototype.setState=function(t){this.state=t,this.changed()},n.prototype.load=function(){},n.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:(0,i.easeIn)(n/this.transition_)},n.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},n.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},n}(e.default),s=o;exports.default=s;
},{"./TileState.js":"Xz9x","./easing.js":"IeCz","./events/Target.js":"8CR4","./events/EventType.js":"C8cu"}],"T/Os":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./Tile.js")),e=n(require("./TileState.js")),i=require("./dom.js"),s=require("./events.js"),a=n(require("./events/EventType.js"));function n(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function i(e,i,s,a,n,r){t.call(this,e,i,r),this.crossOrigin_=a,this.src_=s,this.image_=new Image,null!==a&&(this.image_.crossOrigin=a),this.imageListenerKeys_=null,this.tileLoadFunction_=n}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.disposeInternal=function(){this.state==e.default.LOADING&&(this.unlistenImage_(),this.image_=o()),this.interimTile&&this.interimTile.dispose(),this.state=e.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},i.prototype.getImage=function(){return this.image_},i.prototype.getKey=function(){return this.src_},i.prototype.handleImageError_=function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=o(),this.changed()},i.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()},i.prototype.load=function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.imageListenerKeys_=[(0,s.listenOnce)(this.image_,a.default.ERROR,this.handleImageError_,this),(0,s.listenOnce)(this.image_,a.default.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},i.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.unlistenByKey),this.imageListenerKeys_=null},i}(t.default);function o(){var t=(0,i.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var h=r;exports.default=h;
},{"./Tile.js":"IWZI","./TileState.js":"Xz9x","./dom.js":"Xno5","./events.js":"55Uq","./events/EventType.js":"C8cu"}],"YFDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./structs/LRUCache.js")),t=require("./tilecoord.js");function o(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function o(t){e.call(this,t)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.expireCache=function(e){for(;this.canExpireCache();){var t=this.peekLast(),o=t.tileCoord[0].toString();if(o in e&&e[o].contains(t.tileCoord))break;this.pop().dispose()}},o.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var e=this.peekFirstKey(),o=(0,t.fromKey)(e)[0];this.forEach(function(e){e.tileCoord[0]!==o&&(this.remove((0,t.getKey)(e.tileCoord)),e.dispose())},this)}},o}(e.default),i=r;exports.default=i;
},{"./structs/LRUCache.js":"oMDz","./tilecoord.js":"2faT"}],"U255":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceResolution=n,exports.render=i;var e=require("./dom.js"),t=require("./extent.js"),r=require("./math.js"),a=require("./proj.js");function n(e,r,n,o){var i=(0,a.transform)(n,r,e),s=(0,a.getPointResolution)(r,o,n),u=r.getMetersPerUnit();void 0!==u&&(s*=u);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var v=e.getExtent();if(!v||(0,t.containsCoordinate)(v,i)){var g=(0,a.getPointResolution)(e,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function o(e,t,r,a){var n=r-e,o=a-t,i=Math.sqrt(n*n+o*o);return[Math.round(r+n/i),Math.round(a+o/i)]}function i(a,n,i,s,u,c,v,g,h,l,d){var f=(0,e.createCanvasContext2D)(Math.round(i*a),Math.round(i*n));if(0===h.length)return f.canvas;f.scale(i,i);var m=(0,t.createEmpty)();h.forEach(function(e,r,a){(0,t.extend)(m,e.extent)});var x=(0,t.getWidth)(m),M=(0,t.getHeight)(m),T=(0,e.createCanvasContext2D)(Math.round(i*x/s),Math.round(i*M/s)),p=i/s;h.forEach(function(e,r,a){var n=e.extent[0]-m[0],o=-(e.extent[3]-m[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);T.drawImage(e.image,l,l,e.image.width-2*l,e.image.height-2*l,n*p,o*p,i*p,s*p)});var P=(0,t.getTopLeft)(v);return g.getTriangles().forEach(function(e,t,a){var n=e.source,u=e.target,v=n[0][0],g=n[0][1],h=n[1][0],l=n[1][1],d=n[2][0],x=n[2][1],M=(u[0][0]-P[0])/c,p=-(u[0][1]-P[1])/c,j=(u[1][0]-P[0])/c,E=-(u[1][1]-P[1])/c,q=(u[2][0]-P[0])/c,C=-(u[2][1]-P[1])/c,b=v,y=g;v=0,g=0;var k=[[h-=b,l-=y,0,0,j-M],[d-=b,x-=y,0,0,q-M],[0,0,h,l,E-p],[0,0,d,x,C-p]],w=(0,r.solveLinearSystem)(k);if(w){f.save(),f.beginPath();var R=(M+j+q)/3,S=(p+E+C)/3,W=o(R,S,M,p),D=o(R,S,j,E),H=o(R,S,q,C);f.moveTo(D[0],D[1]),f.lineTo(W[0],W[1]),f.lineTo(H[0],H[1]),f.clip(),f.transform(w[0],w[2],w[1],w[3],M,p),f.translate(m[0]-b,m[3]-y),f.scale(s/i,-s/i),f.drawImage(T.canvas,0,0),f.restore()}}),d&&(f.save(),f.strokeStyle="black",f.lineWidth=1,g.getTriangles().forEach(function(e,t,r){var a=e.target,n=(a[0][0]-P[0])/c,o=-(a[0][1]-P[1])/c,i=(a[1][0]-P[0])/c,s=-(a[1][1]-P[1])/c,u=(a[2][0]-P[0])/c,v=-(a[2][1]-P[1])/c;f.beginPath(),f.moveTo(i,s),f.lineTo(n,o),f.lineTo(u,v),f.closePath(),f.stroke()}),f.restore()),f.canvas}
},{"./dom.js":"Xno5","./extent.js":"QDir","./math.js":"B96G","./proj.js":"Diht"}],"BiRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),r=require("../math.js"),i=require("../proj.js"),e=10,s=.25,o=function(r,s,o,n,a){this.sourceProj_=r,this.targetProj_=s;var h={},u=(0,i.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return h[r]||(h[r]=u(t)),h[r]},this.maxSourceExtent_=n,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(n)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var d=(0,t.getTopLeft)(o),c=(0,t.getTopRight)(o),_=(0,t.getBottomRight)(o),l=(0,t.getBottomLeft)(o),f=this.transformInv_(d),g=this.transformInv_(c),W=this.transformInv_(_),v=this.transformInv_(l);if(this.addQuad_(d,c,_,l,f,g,W,v,e),this.wrapsXInSource_){var m=1/0;this.triangles_.forEach(function(t,r,i){m=Math.min(m,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-m>this.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-m>this.sourceWorldWidth_/2&&(r[0][0]-=this.sourceWorldWidth_),r[1][0]-m>this.sourceWorldWidth_/2&&(r[1][0]-=this.sourceWorldWidth_),r[2][0]-m>this.sourceWorldWidth_/2&&(r[2][0]-=this.sourceWorldWidth_);var i=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-i<this.sourceWorldWidth_/2&&(t.source=r)}}.bind(this))}h={}};o.prototype.addTriangle_=function(t,r,i,e,s,o){this.triangles_.push({source:[e,s,o],target:[t,r,i]})},o.prototype.addQuad_=function(i,e,o,n,a,h,u,d,c){var _=(0,t.boundingExtent)([a,h,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([i,e,o,n]);W=(0,t.getWidth)(v)/this.targetWorldWidth_>s||W}!g&&this.sourceProj_.isGlobal()&&l&&(W=l>s||W)}if(W||!this.maxSourceExtent_||(0,t.intersects)(_,this.maxSourceExtent_)){if(!(W||isFinite(a[0])&&isFinite(a[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1]))){if(!(c>0))return;W=!0}if(c>0){if(!W){var m,p=[(i[0]+o[0])/2,(i[1]+o[1])/2],x=this.transformInv_(p);if(g)m=((0,r.modulo)(a[0],f)+(0,r.modulo)(u[0],f))/2-(0,r.modulo)(x[0],f);else m=(a[0]+u[0])/2-x[0];var j=(a[1]+u[1])/2-x[1];W=m*m+j*j>this.errorThresholdSquared_}if(W){if(Math.abs(i[0]-o[0])<=Math.abs(i[1]-o[1])){var E=[(e[0]+o[0])/2,(e[1]+o[1])/2],I=this.transformInv_(E),P=[(n[0]+i[0])/2,(n[1]+i[1])/2],S=this.transformInv_(P);this.addQuad_(i,e,E,P,a,h,I,S,c-1),this.addQuad_(P,E,o,n,S,I,u,d,c-1)}else{var T=[(i[0]+e[0])/2,(i[1]+e[1])/2],b=this.transformInv_(T),F=[(o[0]+n[0])/2,(o[1]+n[1])/2],M=this.transformInv_(F);this.addQuad_(i,T,F,n,a,b,M,d,c-1),this.addQuad_(T,e,o,F,b,h,u,M,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(i,o,n,a,u,d),this.addTriangle_(i,e,o,a,h,u)}},o.prototype.calculateSourceExtent=function(){var r=(0,t.createEmpty)();return this.triangles_.forEach(function(i,e,s){var o=i.source;(0,t.extendCoordinate)(r,o[0]),(0,t.extendCoordinate)(r,o[1]),(0,t.extendCoordinate)(r,o[2])}),r},o.prototype.getTriangles=function(){return this.triangles_};var n=o;exports.default=n;
},{"../extent.js":"QDir","../math.js":"B96G","../proj.js":"Diht"}],"WlOd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=l(require("../Tile.js")),i=l(require("../TileState.js")),s=require("../events.js"),r=l(require("../events/EventType.js")),o=require("../extent.js"),a=require("../math.js"),n=require("../reproj.js"),u=l(require("./Triangulation.js"));function l(e){return e&&e.__esModule?e:{default:e}}var h=function(t){function l(s,r,l,h,c,d,_,f,g,p,T){t.call(this,c,i.default.IDLE),this.renderEdges_=void 0!==T&&T,this.pixelRatio_=_,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=r,this.targetTileGrid_=h,this.wrappedTileCoord_=d||c,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var E=h.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),x=v?(0,o.getIntersection)(E,v):E;if(0!==(0,o.getArea)(x)){var R=s.getExtent();R&&(y=y?(0,o.getIntersection)(y,R):R);var L=h.getResolution(this.wrappedTileCoord_[0]),j=(0,o.getCenter)(x),m=(0,n.calculateSourceResolution)(s,l,j,L);if(!isFinite(m)||m<=0)this.state=i.default.EMPTY;else{var D=void 0!==p?p:e.ERROR_THRESHOLD;if(this.triangulation_=new u.default(s,l,x,y,m*D),0!==this.triangulation_.getTriangles().length){this.sourceZ_=r.getZForResolution(m);var G=this.triangulation_.calculateSourceExtent();if(y&&(s.canWrapX()?(G[1]=(0,a.clamp)(G[1],y[1],y[3]),G[3]=(0,a.clamp)(G[3],y[1],y[3])):G=(0,o.getIntersection)(G,y)),(0,o.getArea)(G)){for(var I=r.getTileRangeForExtentAndZ(G,this.sourceZ_),O=I.minX;O<=I.maxX;O++)for(var S=I.minY;S<=I.maxY;S++){var C=g(this.sourceZ_,O,S,_);C&&this.sourceTiles_.push(C)}0===this.sourceTiles_.length&&(this.state=i.default.EMPTY)}else this.state=i.default.EMPTY}else this.state=i.default.EMPTY}}else this.state=i.default.EMPTY}return t&&(l.__proto__=t),l.prototype=Object.create(t&&t.prototype),l.prototype.constructor=l,l.prototype.disposeInternal=function(){this.state==i.default.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},l.prototype.getImage=function(){return this.canvas_},l.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,s,r){t&&t.getState()==i.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=i.default.ERROR;else{var t=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(t),r="number"==typeof s?s:s[0],o="number"==typeof s?s:s[1],a=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,n.render)(r,o,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=i.default.LOADED}this.changed()},l.prototype.load=function(){if(this.state==i.default.IDLE){this.state=i.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,o,a){var n=t.getState();if(n==i.default.IDLE||n==i.default.LOADING){e++;var u=(0,s.listen)(t,r.default.CHANGE,function(r){var o=t.getState();o!=i.default.LOADED&&o!=i.default.ERROR&&o!=i.default.EMPTY||((0,s.unlistenByKey)(u),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,s){e.getState()==i.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},l.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(s.unlistenByKey),this.sourcesListenerKeys_=null},l}(t.default),c=h;exports.default=c;
},{"./common.js":"7f+F","../Tile.js":"IWZI","../TileState.js":"Xz9x","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../math.js":"B96G","../reproj.js":"U255","./Triangulation.js":"BiRY"}],"5dp/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=require("../asserts.js"),i=a(require("../TileRange.js")),o=require("../array.js"),r=require("../extent.js"),n=require("../math.js"),s=require("../size.js"),l=require("../tilecoord.js");function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function a(t){if(t&&t.__esModule)return t;var e=h();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=o?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(i,r,n):i[r]=t[r]}}return i.default=t,e&&e.set(t,i),i}var u=[0,0,0],g=function(n){var s;if(this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,(0,e.assert)((0,o.isSorted)(this.resolutions_,function(t,e){return e-t},!0),17),!n.origins)for(var l=0,h=this.resolutions_.length-1;l<h;++l)if(s){if(this.resolutions_[l]/this.resolutions_[l+1]!==s){s=void 0;break}}else s=this.resolutions_[l]/this.resolutions_[l+1];this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,(0,e.assert)(this.origins_.length==this.resolutions_.length,20));var a=n.extent;void 0===a||this.origin_||this.origins_||(this.origin_=(0,r.getTopLeft)(a)),(0,e.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,(0,e.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:t.DEFAULT_TILE_SIZE,(0,e.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map(function(t,e){return new i.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):a&&this.calculateTileRanges_(a)};g.prototype.forEachTileCoord=function(t,e,i){for(var o=this.getTileRangeForExtentAndZ(t,e),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)i([e,r,s])},g.prototype.forEachTileCoordParentTileRange=function(t,e,o,r,n){var s,l,h,a=null,u=t[0]-1;for(2===this.zoomFactor_?(l=t[1],h=t[2]):a=this.getTileCoordExtent(t,n);u>=this.minZoom;){if(2===this.zoomFactor_?(l=Math.floor(l/2),h=Math.floor(h/2),s=(0,i.createOrUpdate)(l,l,h,h,r)):s=this.getTileRangeForExtentAndZ(a,u,r),e.call(o,u,s))return!0;--u}return!1},g.prototype.getExtent=function(){return this.extent_},g.prototype.getMaxZoom=function(){return this.maxZoom},g.prototype.getMinZoom=function(){return this.minZoom},g.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},g.prototype.getResolution=function(t){return this.resolutions_[t]},g.prototype.getResolutions=function(){return this.resolutions_},g.prototype.getTileCoordChildTileRange=function(t,e,o){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return(0,i.createOrUpdate)(r,r+1,n,n+1,e)}var s=this.getTileCoordExtent(t,o);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null},g.prototype.getTileRangeExtent=function(t,e,i){var o=this.getOrigin(t),n=this.getResolution(t),l=(0,s.toSize)(this.getTileSize(t),this.tmpSize_),h=o[0]+e.minX*l[0]*n,a=o[0]+(e.maxX+1)*l[0]*n,u=o[1]+e.minY*l[1]*n,g=o[1]+(e.maxY+1)*l[1]*n;return(0,r.createOrUpdate)(h,u,a,g,i)},g.prototype.getTileRangeForExtentAndZ=function(t,e,o){var r=u;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var n=r[1],s=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),(0,i.createOrUpdate)(n,r[1],s,r[2],o)},g.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=(0,s.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]+(t[2]+.5)*o[1]*i]},g.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),o=this.getResolution(t[0]),n=(0,s.toSize)(this.getTileSize(t[0]),this.tmpSize_),l=i[0]+t[1]*n[0]*o,h=i[1]+t[2]*n[1]*o,a=l+n[0]*o,u=h+n[1]*o;return(0,r.createOrUpdate)(l,h,a,u,e)},g.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},g.prototype.getTileCoordForXYAndResolution_=function(t,e,i,o,r){var n=this.getZForResolution(i),h=i/this.getResolution(n),a=this.getOrigin(n),u=(0,s.toSize)(this.getTileSize(n),this.tmpSize_),g=o?.5:0,p=o?0:.5,f=Math.floor((t-a[0])/i+g),_=Math.floor((e-a[1])/i+p),c=h*f/u[0],d=h*_/u[1];return o?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),(0,l.createOrUpdate)(n,c,d,r)},g.prototype.getTileCoordForXYAndZ_=function(t,e,i,o,r){var n=this.getOrigin(i),h=this.getResolution(i),a=(0,s.toSize)(this.getTileSize(i),this.tmpSize_),u=o?.5:0,g=o?0:.5,p=Math.floor((t-n[0])/h+u),f=Math.floor((e-n[1])/h+g),_=p/a[0],c=f/a[1];return o?(_=Math.ceil(_)-1,c=Math.ceil(c)-1):(_=Math.floor(_),c=Math.floor(c)),(0,l.createOrUpdate)(i,_,c,r)},g.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},g.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},g.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},g.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},g.prototype.getZForResolution=function(t,e){var i=(0,o.linearFindNearest)(this.resolutions_,t,e||0);return(0,n.clamp)(i,this.minZoom,this.maxZoom)},g.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i};var p=g;exports.default=p;
},{"./common.js":"mOEX","../asserts.js":"fLG6","../TileRange.js":"346s","../array.js":"luEr","../extent.js":"QDir","../math.js":"B96G","../size.js":"TAHd","../tilecoord.js":"2faT"}],"ExRx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getForProjection=s,exports.wrapX=d,exports.createForExtent=l,exports.createXYZ=c,exports.createForProjection=x,exports.extentFromProjection=g;var e=require("./tilegrid/common.js"),t=require("./size.js"),r=require("./extent.js"),i=a(require("./extent/Corner.js")),o=require("./proj.js"),n=a(require("./proj/Units.js")),u=a(require("./tilegrid/TileGrid.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.getDefaultTileGrid();return t||(t=x(e),e.setDefaultTileGrid(t)),t}function d(e,t,i){var o=t[0],n=e.getTileCoordCenter(t),u=g(i);if((0,r.containsCoordinate)(u,n))return t;var a=(0,r.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,o)}function l(e,t,o,n){var a=void 0!==n?n:i.default.TOP_LEFT,s=f(e,t,o);return new u.default({extent:e,origin:(0,r.getCorner)(e,a),resolutions:s,tileSize:o})}function c(e){var t=e||{},r=t.extent||(0,o.get)("EPSG:3857").getExtent(),i={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:f(r,t.maxZoom,t.tileSize)};return new u.default(i)}function f(i,o,n){for(var u=void 0!==o?o:e.DEFAULT_MAX_ZOOM,a=(0,r.getHeight)(i),s=(0,r.getWidth)(i),d=(0,t.toSize)(void 0!==n?n:e.DEFAULT_TILE_SIZE),l=Math.max(s/d[0],a/d[1]),c=u+1,f=new Array(c),x=0;x<c;++x)f[x]=l/Math.pow(2,x);return f}function x(e,t,r,i){return l(g(e),t,r,i)}function g(e){var t=(e=(0,o.get)(e)).getExtent();if(!t){var i=180*o.METERS_PER_UNIT[n.default.DEGREES]/e.getMetersPerUnit();t=(0,r.createOrUpdate)(-i,-i,i,i)}return t}
},{"./tilegrid/common.js":"mOEX","./size.js":"TAHd","./extent.js":"QDir","./extent/Corner.js":"urGY","./proj.js":"Diht","./proj/Units.js":"yZx6","./tilegrid/TileGrid.js":"5dp/"}],"JECm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var t=require("../util.js"),e=a(require("../TileCache.js")),i=a(require("../TileState.js")),r=a(require("../events/Event.js")),o=require("../proj.js"),n=require("../size.js"),u=a(require("./Source.js")),l=require("../tilecoord.js"),s=require("../tilegrid.js");function a(t){return t&&t.__esModule?t:{default:t}}var p=function(r){function u(t){r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new e.default(t.cacheSize),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition}}return r&&(u.__proto__=r),u.prototype=Object.create(r&&r.prototype),u.prototype.constructor=u,u.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},u.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},u.prototype.forEachLoadedTile=function(t,e,r,o){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var u,s,a,p=!0,c=r.minX;c<=r.maxX;++c)for(var h=r.minY;h<=r.maxY;++h)s=(0,l.getKeyZXY)(e,c,h),a=!1,n.containsKey(s)&&(a=(u=n.get(s)).getState()===i.default.LOADED)&&(a=!1!==o(u)),a||(p=!1);return p},u.prototype.getGutterForProjection=function(t){return 0},u.prototype.getKey=function(){return this.key_},u.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},u.prototype.getOpaque=function(t){return this.opaque_},u.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},u.prototype.getTile=function(e,i,r,o,n){return(0,t.abstract)()},u.prototype.getTileGrid=function(){return this.tileGrid},u.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:(0,s.getForProjection)(t)},u.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!(0,o.equivalent)(e,t)?null:this.tileCache},u.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},u.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),u=(0,n.toSize)(r.getTileSize(t),this.tmpSize);return 1==o?u:(0,n.scale)(u,o,this.tmpSize)},u.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,s.wrapX)(r,t,i)),(0,l.withinExtentAndZ)(t,r)?t:null},u.prototype.refresh=function(){this.tileCache.clear(),this.changed()},u.prototype.useTile=function(t,e,i,r){},u}(u.default),c=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.default);exports.TileSourceEvent=c;var h=p;exports.default=h;
},{"../util.js":"KniQ","../TileCache.js":"YFDe","../TileState.js":"Xz9x","../events/Event.js":"fKNg","../proj.js":"Diht","../size.js":"TAHd","./Source.js":"H38a","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"5KXh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"uv+9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=s(require("../TileState.js")),i=require("../tileurlfunction.js"),r=u(require("./Tile.js")),n=s(require("./TileEventType.js")),o=require("../tilecoord.js");function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function u(t){if(t&&t.__esModule)return t;var e=l();if(e&&e.has(t))return e.get(t);var i={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=r?Object.getOwnPropertyDescriptor(t,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=t[n]}}return i.default=t,e&&e.set(t,i),i}function s(t){return t&&t.__esModule?t:{default:t}}var a=function(l){function u(t){l.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,key:t.key,attributionsCollapsible:t.attributionsCollapsible}),this.generateTileUrlFunction_=!t.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=t.tileUrlFunction?t.tileUrlFunction.bind(this):i.nullTileUrlFunction,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return l&&(u.__proto__=l),u.prototype=Object.create(l&&l.prototype),u.prototype.constructor=u,u.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},u.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},u.prototype.getUrls=function(){return this.urls},u.prototype.handleTileChange=function(i){var o,l=i.target,u=(0,t.getUid)(l),s=l.getState();s==e.default.LOADING?(this.tileLoadingKeys_[u]=!0,o=n.default.TILELOADSTART):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],o=s==e.default.ERROR?n.default.TILELOADERROR:s==e.default.LOADED||s==e.default.ABORT?n.default.TILELOADEND:void 0),null!=o&&this.dispatchEvent(new r.TileSourceEvent(o,l))},u.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},u.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},u.prototype.setUrl=function(t){var e=this.urls=(0,i.expandUrl)(t);this.setUrls(e)},u.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,i.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)},u.prototype.useTile=function(t,e,i){var r=(0,o.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},u}(r.default),c=a;exports.default=c;
},{"../util.js":"KniQ","../TileState.js":"Xz9x","../tileurlfunction.js":"p1v/","./Tile.js":"JECm","./TileEventType.js":"5KXh","../tilecoord.js":"2faT"}],"6udA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../reproj/common.js"),t=require("../util.js"),i=p(require("../ImageTile.js")),r=p(require("../TileCache.js")),o=p(require("../TileState.js")),n=require("../events.js"),l=p(require("../events/EventType.js")),s=require("../proj.js"),c=p(require("../reproj/Tile.js")),a=p(require("./UrlTile.js")),h=require("../tilecoord.js"),u=require("../tilegrid.js");function p(e){return e&&e.__esModule?e:{default:e}}var d=function(a){function p(e){a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:E,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:i.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return a&&(p.__proto__=a),p.prototype=Object.create(a&&a.prototype),p.prototype.constructor=p,p.prototype.canExpireCache=function(){if(!e.ENABLE_RASTER_REPROJECTION)return a.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},p.prototype.expireCache=function(t,i){if(e.ENABLE_RASTER_REPROJECTION){var r=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[o];n.expireCache(n==r?i:{})}}else a.prototype.expireCache.call(this,t,i)},p.prototype.getGutterForProjection=function(t){return e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,s.equivalent)(this.getProjection(),t)?0:this.getGutter()},p.prototype.getGutter=function(){return 0},p.prototype.getOpaque=function(t){return!(e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,s.equivalent)(this.getProjection(),t))&&a.prototype.getOpaque.call(this,t)},p.prototype.getTileGridForProjection=function(i){if(!e.ENABLE_RASTER_REPROJECTION)return a.prototype.getTileGridForProjection.call(this,i);var r=this.getProjection();if(!this.tileGrid||r&&!(0,s.equivalent)(r,i)){var o=(0,t.getUid)(i);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=(0,u.getForProjection)(i)),this.tileGridForProjection[o]}return this.tileGrid},p.prototype.getTileCacheForProjection=function(i){if(!e.ENABLE_RASTER_REPROJECTION)return a.prototype.getTileCacheForProjection.call(this,i);var o=this.getProjection();if(!o||(0,s.equivalent)(o,i))return this.tileCache;var n=(0,t.getUid)(i);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new r.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},p.prototype.createTile_=function(e,t,i,r,s,c){var a=[e,t,i],h=this.getTileCoordForTileUrlFunction(a,s),u=h?this.tileUrlFunction(h,r,s):void 0,p=new this.tileClass(a,void 0!==u?o.default.IDLE:o.default.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=c,(0,n.listen)(p,l.default.CHANGE,this.handleTileChange,this),p},p.prototype.getTile=function(t,i,r,o,n){var l=this.getProjection();if(e.ENABLE_RASTER_REPROJECTION&&l&&n&&!(0,s.equivalent)(l,n)){var a,u=this.getTileCacheForProjection(n),p=[t,i,r],d=(0,h.getKey)(p);u.containsKey(d)&&(a=u.get(d));var E=this.getKey();if(a&&a.key==E)return a;var j=this.getTileGridForProjection(l),g=this.getTileGridForProjection(n),T=this.getTileCoordForTileUrlFunction(p,n),C=new c.default(l,j,n,g,p,T,this.getTilePixelRatio(o),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return C.key=E,a?(C.interimTile=a,C.refreshInterimChain(),u.replace(d,C)):u.set(d,C),C}return this.getTileInternal(t,i,r,o,l||n)},p.prototype.getTileInternal=function(e,t,i,r,n){var l=null,s=(0,h.getKeyZXY)(e,t,i),c=this.getKey();if(this.tileCache.containsKey(s)){if((l=this.tileCache.get(s)).key!=c){var a=l;l=this.createTile_(e,t,i,r,n,c),a.getState()==o.default.IDLE?l.interimTile=a.interimTile:l.interimTile=a,l.refreshInterimChain(),this.tileCache.replace(s,l)}}else l=this.createTile_(e,t,i,r,n,c),this.tileCache.set(s,l);return l},p.prototype.setRenderReprojectionEdges=function(t){if(e.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var i in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}},p.prototype.setTileGridForProjection=function(i,r){if(e.ENABLE_RASTER_REPROJECTION){var o=(0,s.get)(i);if(o){var n=(0,t.getUid)(o);n in this.tileGridForProjection||(this.tileGridForProjection[n]=r)}}},p}(a.default);function E(e,t){e.getImage().src=t}var j=d;exports.default=j;
},{"../reproj/common.js":"7f+F","../util.js":"KniQ","../ImageTile.js":"T/Os","../TileCache.js":"YFDe","../TileState.js":"Xz9x","../events.js":"55Uq","../events/EventType.js":"C8cu","../proj.js":"Diht","../reproj/Tile.js":"WlOd","./UrlTile.js":"uv+9","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"K+sj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../tileurlfunction.js"),t=require("../extent.js"),i=require("../net.js"),r=require("../proj.js"),o=u(require("./State.js")),a=u(require("./TileImage.js")),s=require("../tilecoord.js"),n=require("../tilegrid.js");function u(e){return e&&e.__esModule?e:{default:e}}var c='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>',d=function(a){function u(e){var t=void 0!==e.hidpi&&e.hidpi;a.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:(0,r.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:o.default.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=t,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet;var s="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;(0,i.jsonp)(s,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return a&&(u.__proto__=a),u.prototype=Object.create(a&&a.prototype),u.prototype.constructor=u,u.prototype.getApiKey=function(){return this.apiKey_},u.prototype.getImagerySet=function(){return this.imagerySet_},u.prototype.handleImageryMetadataResponse=function(i){if(200==i.statusCode&&"OK"==i.statusDescription&&"ValidCredentials"==i.authenticationResultCode&&1==i.resourceSets.length&&1==i.resourceSets[0].resources.length){var a=i.resourceSets[0].resources[0],u=-1==this.maxZoom_?a.zoomMax:this.maxZoom_,d=this.getProjection(),l=(0,n.extentFromProjection)(d),h=this.hidpi_?2:1,m=a.imageWidth==a.imageHeight?a.imageWidth/h:[a.imageWidth/h,a.imageHeight/h],p=(0,n.createXYZ)({extent:l,minZoom:a.zoomMin,maxZoom:u,tileSize:m});this.tileGrid=p;var g=this.culture_,f=this.hidpi_;if(this.tileUrlFunction=(0,e.createFromTileUrlFunctions)(a.imageUrlSubdomains.map(function(e){var t=[0,0,0],i=a.imageUrl.replace("{subdomain}",e).replace("{culture}",g);return function(e,r,o){if(e){(0,s.createOrUpdate)(e[0],e[1],-e[2]-1,t);var a=i;return f&&(a+="&dpi=d1&device=mobile"),a.replace("{quadkey}",(0,s.quadKey)(t))}}})),a.imageryProviders){var v=(0,r.getTransformFromProjections)((0,r.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(e){var i=[],r=e.viewState,o=this.getTileGrid().getTileCoordForCoordAndResolution(r.center,r.resolution)[0];return a.imageryProviders.map(function(r){for(var a=!1,s=r.coverageAreas,n=0,u=s.length;n<u;++n){var c=s[n];if(o>=c.zoomMin&&o<=c.zoomMax){var d=c.bbox,l=[d[1],d[0],d[3],d[2]],h=(0,t.applyTransform)(l,v);if((0,t.intersects)(h,e.extent)){a=!0;break}}}a&&i.push(r.attribution)}),i.push(c),i}.bind(this))}this.setState(o.default.READY)}else this.setState(o.default.ERROR)},u}(a.default),l=d;exports.default=l;
},{"../tileurlfunction.js":"p1v/","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","./State.js":"iC8j","./TileImage.js":"6udA","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"knlU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./TileImage.js")),e=require("../tilegrid.js");function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t){function o(o){var i=o||{},r=void 0!==i.projection?i.projection:"EPSG:3857",l=void 0!==i.tileGrid?i.tileGrid:(0,e.createXYZ)({extent:(0,e.extentFromProjection)(r),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:l,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o}(t.default),r=i;exports.default=r;
},{"./TileImage.js":"6udA","../tilegrid.js":"ExRx"}],"WJrq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../obj.js"),e=o(require("./State.js")),i=o(require("./XYZ.js"));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(i){function o(t){i.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,wrapX:t.wrapX}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}return i&&(o.__proto__=i),o.prototype=Object.create(i&&i.prototype),o.prototype.constructor=o,o.prototype.getConfig=function(){return this.config_},o.prototype.updateConfig=function(e){(0,t.assign)(this.config_,e),this.initializeMap_()},o.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},o.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},o.prototype.handleInitResponse_=function(t,i){var o=i.target;if(!o.status||o.status>=200&&o.status<300){var a;try{a=JSON.parse(o.responseText)}catch(s){return void this.setState(e.default.ERROR)}this.applyTemplate_(a),this.templateCache_[t]=a,this.setState(e.default.READY)}else this.setState(e.default.ERROR)},o.prototype.handleInitError_=function(t){this.setState(e.default.ERROR)},o.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},o}(i.default),s=a;exports.default=s;
},{"../obj.js":"mH6q","./State.js":"iC8j","./XYZ.js":"knlU"}],"sV2m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=require("../asserts.js"),r=h(require("../Feature.js")),s=h(require("../geom/GeometryType.js")),i=require("../coordinate.js"),o=require("../events.js"),u=h(require("../events/EventType.js")),n=require("../extent.js"),a=h(require("../geom/Point.js")),c=h(require("./Vector.js"));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(c){function h(e){c.call(this,{attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(e){var r=e.getGeometry();return(0,t.assert)(r.getType()==s.default.POINT,10),r},this.source=e.source,(0,o.listen)(this.source,u.default.CHANGE,this.refresh,this)}return c&&(h.__proto__=c),h.prototype=Object.create(c&&c.prototype),h.prototype.constructor=h,h.prototype.getDistance=function(){return this.distance},h.prototype.getSource=function(){return this.source},h.prototype.loadFeatures=function(e,t,r){this.source.loadFeatures(e,t,r),t!==this.resolution&&(this.clear(),this.resolution=t,this.cluster(),this.addFeatures(this.features))},h.prototype.setDistance=function(e){this.distance=e,this.refresh()},h.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),c.prototype.refresh.call(this)},h.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=(0,n.createEmpty)(),r=this.distance*this.resolution,s=this.source.getFeatures(),i={},o=0,u=s.length;o<u;o++){var a=s[o];if(!((0,e.getUid)(a)in i)){var c=this.geometryFunction(a);if(c){var h=c.getCoordinates();(0,n.createOrUpdateFromCoordinate)(h,t),(0,n.buffer)(t,r,t);var f=this.source.getFeaturesInExtent(t);f=f.filter(function(t){var r=(0,e.getUid)(t);return!(r in i)&&(i[r]=!0,!0)}),this.features.push(this.createCluster(f))}}}}},h.prototype.createCluster=function(e){for(var t=[0,0],s=e.length-1;s>=0;--s){var o=this.geometryFunction(e[s]);o?(0,i.add)(t,o.getCoordinates()):e.splice(s,1)}(0,i.scale)(t,1/e.length);var u=new r.default(new a.default(t));return u.set("features",e),u},h}(c.default),l=f;exports.default=l;
},{"../util.js":"KniQ","../asserts.js":"fLG6","../Feature.js":"mYW9","../geom/GeometryType.js":"lmV0","../coordinate.js":"nGsj","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../geom/Point.js":"gLcY","./Vector.js":"ZS12"}],"rc7/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=u(require("../ImageBase.js")),r=u(require("../ImageState.js")),s=require("../events.js"),i=u(require("../events/EventType.js")),o=require("../extent.js"),a=require("../reproj.js"),n=u(require("./Triangulation.js"));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(e){function u(s,i,u,c,l,h){var _=s.getExtent(),g=i.getExtent(),p=g?(0,o.getIntersection)(u,g):u,f=(0,o.getCenter)(p),d=(0,a.calculateSourceResolution)(s,i,f,c),E=t.ERROR_THRESHOLD,x=new n.default(s,i,p,_,d*E),I=h(x.calculateSourceExtent(),d,l),R=r.default.LOADED;I&&(R=r.default.IDLE);var m=I?I.getPixelRatio():1;e.call(this,u,c,m,R),this.targetProj_=i,this.maxSourceExtent_=_,this.triangulation_=x,this.targetResolution_=c,this.targetExtent_=u,this.sourceImage_=I,this.sourcePixelRatio_=m,this.canvas_=null,this.sourceListenerKey_=null}return e&&(u.__proto__=e),u.prototype=Object.create(e&&e.prototype),u.prototype.constructor=u,u.prototype.disposeInternal=function(){this.state==r.default.LOADING&&this.unlistenSource_(),e.prototype.disposeInternal.call(this)},u.prototype.getImage=function(){return this.canvas_},u.prototype.getProjection=function(){return this.targetProj_},u.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==r.default.LOADED){var e=(0,o.getWidth)(this.targetExtent_)/this.targetResolution_,s=(0,o.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,a.render)(e,s,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},u.prototype.load=function(){if(this.state==r.default.IDLE){this.state=r.default.LOADING,this.changed();var t=this.sourceImage_.getState();t==r.default.LOADED||t==r.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,s.listen)(this.sourceImage_,i.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=r.default.LOADED&&e!=r.default.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},u.prototype.unlistenSource_=function(){(0,s.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null},u}(e.default),l=c;exports.default=l;
},{"./common.js":"7f+F","../ImageBase.js":"Ojbp","../ImageState.js":"u3k+","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../reproj.js":"U255","./Triangulation.js":"BiRY"}],"XHvt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultImageLoadFunction=g,exports.default=void 0;var e=require("../util.js"),t=require("../reproj/common.js"),r=c(require("../ImageState.js")),o=require("../array.js"),i=c(require("../events/Event.js")),s=require("../extent.js"),n=require("../proj.js"),a=c(require("../reproj/Image.js")),u=c(require("./Source.js"));function c(e){return e&&e.__esModule?e:{default:e}}var p={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},l=function(e){function t(t,r){e.call(this,t),this.image=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(i.default),d=function(i){function u(e){i.call(this,{attributions:e.attributions,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return i&&(u.__proto__=i),u.prototype=Object.create(i&&i.prototype),u.prototype.constructor=u,u.prototype.getResolutions=function(){return this.resolutions_},u.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=(0,o.linearFindNearest)(this.resolutions_,e,0);e=this.resolutions_[t]}return e},u.prototype.getImage=function(e,r,o,i){var u=this.getProjection();if(t.ENABLE_RASTER_REPROJECTION&&u&&i&&!(0,n.equivalent)(u,i)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,n.equivalent)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==r&&(0,s.equals)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new a.default(u,i,e,r,o,function(e,t,r){return this.getImageInternal(e,t,r,u)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return u&&(i=u),this.getImageInternal(e,r,o,i)},u.prototype.getImageInternal=function(t,r,o,i){return(0,e.abstract)()},u.prototype.handleImageChange=function(e){var t=e.target;switch(t.getState()){case r.default.LOADING:this.loading=!0,this.dispatchEvent(new l(p.IMAGELOADSTART,t));break;case r.default.LOADED:this.loading=!1,this.dispatchEvent(new l(p.IMAGELOADEND,t));break;case r.default.ERROR:this.loading=!1,this.dispatchEvent(new l(p.IMAGELOADERROR,t))}},u}(u.default);function g(e,t){e.getImage().src=t}var h=d;exports.default=h;
},{"../util.js":"KniQ","../reproj/common.js":"7f+F","../ImageState.js":"u3k+","../array.js":"luEr","../events/Event.js":"fKNg","../extent.js":"QDir","../proj.js":"Diht","../reproj/Image.js":"rc7/","./Source.js":"H38a"}],"DHWK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./ImageBase.js")),t=n(require("./ImageState.js")),i=require("./events.js"),s=n(require("./events/EventType.js")),a=require("./extent.js");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function n(i,s,a,n,o,r){e.call(this,i,s,a,t.default.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=t.default.IDLE,this.imageLoadFunction_=r}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.getImage=function(){return this.image_},n.prototype.handleImageError_=function(){this.state=t.default.ERROR,this.unlistenImage_(),this.changed()},n.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=(0,a.getHeight)(this.extent)/this.image_.height),this.state=t.default.LOADED,this.unlistenImage_(),this.changed()},n.prototype.load=function(){this.state!=t.default.IDLE&&this.state!=t.default.ERROR||(this.state=t.default.LOADING,this.changed(),this.imageListenerKeys_=[(0,i.listenOnce)(this.image_,s.default.ERROR,this.handleImageError_,this),(0,i.listenOnce)(this.image_,s.default.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},n.prototype.setImage=function(e){this.image_=e},n.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(i.unlistenByKey),this.imageListenerKeys_=null},n}(e.default),r=o;exports.default=r;
},{"./ImageBase.js":"Ojbp","./ImageState.js":"u3k+","./events.js":"55Uq","./events/EventType.js":"C8cu","./extent.js":"QDir"}],"2n7G":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return(e=-1===(e=e.replace(/[?&]$/,"")).indexOf("?")?e+"?":e+"&")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"P20y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../Image.js")),t=require("../asserts.js"),i=require("../events.js"),r=p(require("../events/EventType.js")),n=require("../extent.js"),o=require("../obj.js"),a=h(require("./Image.js")),s=require("../uri.js");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function h(e){if(e&&e.__esModule)return e;var t=u();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=r?Object.getOwnPropertyDescriptor(e,n):null;o&&(o.get||o.set)?Object.defineProperty(i,n,o):i[n]=e[n]}}return i.default=e,t&&t.set(e,i),i}function p(e){return e&&e.__esModule?e:{default:e}}var g=function(u){function h(e){var t=e||{};u.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.hidpi_=void 0===t.hidpi||t.hidpi,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:a.defaultImageLoadFunction,this.params_=t.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}return u&&(h.__proto__=u),h.prototype=Object.create(u&&u.prototype),h.prototype.constructor=h,h.prototype.getParams=function(){return this.params_},h.prototype.getImageInternal=function(t,a,s,u){if(void 0===this.url_)return null;a=this.findNearestResolution(a),s=this.hidpi_?s:1;var h=this.image_;if(h&&this.renderedRevision_==this.getRevision()&&h.getResolution()==a&&h.getPixelRatio()==s&&(0,n.containsExtent)(h.getExtent(),t))return h;var p={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};(0,o.assign)(p,this.params_);var g=((t=t.slice())[0]+t[2])/2,l=(t[1]+t[3])/2;if(1!=this.ratio_){var c=this.ratio_*(0,n.getWidth)(t)/2,d=this.ratio_*(0,n.getHeight)(t)/2;t[0]=g-c,t[1]=l-d,t[2]=g+c,t[3]=l+d}var _=a/s,f=Math.ceil((0,n.getWidth)(t)/_),m=Math.ceil((0,n.getHeight)(t)/_);t[0]=g-_*f/2,t[2]=g+_*f/2,t[1]=l-_*m/2,t[3]=l+_*m/2,this.imageSize_[0]=f,this.imageSize_[1]=m;var v=this.getRequestUrl_(t,this.imageSize_,s,u,p);return this.image_=new e.default(t,a,s,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),(0,i.listen)(this.image_,r.default.CHANGE,this.handleImageChange,this),this.image_},h.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},h.prototype.getRequestUrl_=function(e,i,r,n,o){var a=n.getCode().split(":").pop();o.SIZE=i[0]+","+i[1],o.BBOX=e.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(90*r);var u=this.url_,h=u.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return h==u&&(0,t.assert)(!1,50),(0,s.appendParams)(h,o)},h.prototype.getUrl=function(){return this.url_},h.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},h.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},h.prototype.updateParams=function(e){(0,o.assign)(this.params_,e),this.image_=null,this.changed()},h}(a.default),l=g;exports.default=l;
},{"../Image.js":"DHWK","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../obj.js":"mH6q","./Image.js":"XHvt","../uri.js":"2n7G"}],"3Y2u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../ImageCanvas.js")),e=require("../extent.js"),i=n(require("./Image.js"));function n(t){return t&&t.__esModule?t:{default:t}}var o=function(i){function n(t){var e=t||{};i.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.getImageInternal=function(i,n,o,r){n=this.findNearestResolution(n);var s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==n&&s.getPixelRatio()==o&&(0,e.containsExtent)(s.getExtent(),i))return s;i=i.slice(),(0,e.scaleFromCenter)(i,this.ratio_);var a=[(0,e.getWidth)(i)/n*o,(0,e.getHeight)(i)/n*o],u=this.canvasFunction_.call(this,i,n,o,a,r);return u&&(s=new t.default(i,n,o,u)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s},n}(i.default),r=o;exports.default=r;
},{"../ImageCanvas.js":"K7j2","../extent.js":"QDir","./Image.js":"XHvt"}],"C9PY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../Image.js")),t=require("../events.js"),i=p(require("../events/EventType.js")),r=require("../extent.js"),n=require("../obj.js"),s=u(require("./Image.js")),o=require("../uri.js");function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function u(e){if(e&&e.__esModule)return e;var t=a();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var s=r?Object.getOwnPropertyDescriptor(e,n):null;s&&(s.get||s.set)?Object.defineProperty(i,n,s):i[n]=e[n]}}return i.default=e,t&&t.set(e,i),i}function p(e){return e&&e.__esModule?e:{default:e}}var d=function(a){function u(e){a.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:s.defaultImageLoadFunction,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0}return a&&(u.__proto__=a),u.prototype=Object.create(a&&a.prototype),u.prototype.constructor=u,u.prototype.getParams=function(){return this.params_},u.prototype.getImageInternal=function(n,s,o,a){s=this.findNearestResolution(s),o=this.hidpi_?o:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==s&&u.getPixelRatio()==o&&(0,r.containsExtent)(u.getExtent(),n))return u;1!=this.ratio_&&(n=n.slice(),(0,r.scaleFromCenter)(n,this.ratio_));var p=[(0,r.getWidth)(n)/s*o,(0,r.getHeight)(n)/s*o];if(void 0!==this.url_){var d=this.getUrl(this.url_,this.params_,n,p,a);u=new e.default(n,s,o,d,this.crossOrigin_,this.imageLoadFunction_),(0,t.listen)(u,i.default.CHANGE,this.handleImageChange,this)}else u=null;return this.image_=u,this.renderedRevision_=this.getRevision(),u},u.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},u.prototype.updateParams=function(e){(0,n.assign)(this.params_,e),this.changed()},u.prototype.getUrl=function(e,t,i,s,a){var u=h(i,s,this.metersPerUnit_,this.displayDpi_),p=(0,r.getCenter)(i),d={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(s[0]),SETDISPLAYHEIGHT:Math.round(s[1]),SETVIEWSCALE:u,SETVIEWCENTERX:p[0],SETVIEWCENTERY:p[1]};return(0,n.assign)(d,t),(0,o.appendParams)(e,d)},u.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},u}(s.default);function h(e,t,i,n){var s=(0,r.getWidth)(e),o=(0,r.getHeight)(e),a=t[0],u=t[1],p=.0254/n;return u*s>a*o?s*i/(a*p):o*i/(u*p)}var l=d;exports.default=l;
},{"../Image.js":"DHWK","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../obj.js":"mH6q","./Image.js":"XHvt","../uri.js":"2n7G"}],"zK6j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("../Image.js")),t=l(require("../ImageState.js")),i=require("../dom.js"),r=require("../events.js"),a=l(require("../events/EventType.js")),n=require("../extent.js"),o=require("../proj.js"),u=g(require("./Image.js"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function g(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var n=r?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(i,a,n):i[a]=e[a]}}return i.default=e,t&&t.set(e,i),i}function l(e){return e&&e.__esModule?e:{default:e}}var h=function(s){function g(t){var i=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:u.defaultImageLoadFunction;s.call(this,{attributions:t.attributions,projection:(0,o.get)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image_=new e.default(this.imageExtent_,void 0,1,this.url_,i,n),this.imageSize_=t.imageSize?t.imageSize:null,(0,r.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this)}return s&&(g.__proto__=s),g.prototype=Object.create(s&&s.prototype),g.prototype.constructor=g,g.prototype.getImageExtent=function(){return this.imageExtent_},g.prototype.getImageInternal=function(e,t,i,r){return(0,n.intersects)(e,this.image_.getExtent())?this.image_:null},g.prototype.getUrl=function(){return this.url_},g.prototype.handleImageChange=function(e){if(this.image_.getState()==t.default.LOADED){var r,a,o=this.image_.getExtent(),u=this.image_.getImage();this.imageSize_?(r=this.imageSize_[0],a=this.imageSize_[1]):(r=u.width,a=u.height);var g=(0,n.getHeight)(o)/a,l=Math.ceil((0,n.getWidth)(o)/g);if(l!=r){var h=(0,i.createCanvasContext2D)(l,a),c=h.canvas;h.drawImage(u,0,0,r,a,0,0,c.width,c.height),this.image_.setImage(c)}}s.prototype.handleImageChange.call(this,e)},g}(u.default),c=h;exports.default=c;
},{"../Image.js":"DHWK","../ImageState.js":"u3k+","../dom.js":"Xno5","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../proj.js":"Diht","./Image.js":"XHvt"}],"a8mu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_WMS_VERSION=void 0;var e="1.3.0";exports.DEFAULT_WMS_VERSION=e;
},{}],"mXwm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};exports.default=e;
},{}],"e4Kb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=c(require("../Image.js")),i=require("../asserts.js"),r=require("../events.js"),s=c(require("../events/EventType.js")),a=require("../extent.js"),n=require("../obj.js"),o=require("../proj.js"),u=require("../reproj.js"),h=d(require("./Image.js")),_=c(require("./WMSServerType.js")),p=require("../string.js"),g=require("../uri.js");function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){if(e&&e.__esModule)return e;var t=l();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var a=r?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}}return i.default=e,t&&t.set(e,i),i}function c(e){return e&&e.__esModule?e:{default:e}}var f=[101,101],v=function(l){function d(e){var t=e||{};l.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:h.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}return l&&(d.__proto__=l),d.prototype=Object.create(l&&l.prototype),d.prototype.constructor=d,d.prototype.getGetFeatureInfoUrl=function(t,i,r,s){if(void 0!==this.url_){var h=(0,o.get)(r),_=this.getProjection();_&&_!==h&&(i=(0,u.calculateSourceResolution)(_,h,t,i),t=(0,o.transform)(t,h,_));var p=(0,a.getForViewAndSize)(t,i,0,f),g={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,n.assign)(g,this.params_,s);var l=Math.floor((t[0]-p[0])/i),d=Math.floor((p[3]-t[1])/i);return g[this.v13_?"I":"X"]=l,g[this.v13_?"J":"Y"]=d,this.getRequestUrl_(p,f,1,_||h,g)}},d.prototype.getParams=function(){return this.params_},d.prototype.getImageInternal=function(i,o,u,h){if(void 0===this.url_)return null;o=this.findNearestResolution(o),1==u||this.hidpi_&&void 0!==this.serverType_||(u=1);var _=o/u,p=(0,a.getCenter)(i),g=Math.ceil((0,a.getWidth)(i)/_),l=Math.ceil((0,a.getHeight)(i)/_),d=(0,a.getForViewAndSize)(p,_,0,[g,l]),c=Math.ceil(this.ratio_*(0,a.getWidth)(i)/_),f=Math.ceil(this.ratio_*(0,a.getHeight)(i)/_),v=(0,a.getForViewAndSize)(p,_,0,[c,f]),R=this.image_;if(R&&this.renderedRevision_==this.getRevision()&&R.getResolution()==o&&R.getPixelRatio()==u&&(0,a.containsExtent)(R.getExtent(),d))return R;var S={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};(0,n.assign)(S,this.params_),this.imageSize_[0]=Math.round((0,a.getWidth)(v)/_),this.imageSize_[1]=Math.round((0,a.getHeight)(v)/_);var m=this.getRequestUrl_(v,this.imageSize_,u,h,S);return this.image_=new t.default(v,o,u,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),(0,r.listen)(this.image_,s.default.CHANGE,this.handleImageChange,this),this.image_},d.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},d.prototype.getRequestUrl_=function(e,t,r,s,a){if((0,i.assert)(void 0!==this.url_,9),a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case _.default.GEOSERVER:var n=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+n:a.FORMAT_OPTIONS="dpi:"+n;break;case _.default.MAPSERVER:a.MAP_RESOLUTION=90*r;break;case _.default.CARMENTA_SERVER:case _.default.QGIS:a.DPI=90*r;break;default:(0,i.assert)(!1,8)}a.WIDTH=t[0],a.HEIGHT=t[1];var o,u=s.getAxisOrientation();return o=this.v13_&&"ne"==u.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,a.BBOX=o.join(","),(0,g.appendParams)(this.url_,a)},d.prototype.getUrl=function(){return this.url_},d.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},d.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},d.prototype.updateParams=function(e){(0,n.assign)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},d.prototype.updateV13_=function(){var t=this.params_.VERSION||e.DEFAULT_WMS_VERSION;this.v13_=(0,p.compareVersions)(t,"1.3")>=0},d}(h.default),R=v;exports.default=R;
},{"./common.js":"a8mu","../Image.js":"DHWK","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../obj.js":"mH6q","../proj.js":"Diht","../reproj.js":"U255","./Image.js":"XHvt","./WMSServerType.js":"mXwm","../string.js":"AiCK","../uri.js":"2n7G"}],"Rmo4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ATTRIBUTION=void 0;var o=r(require("./XYZ.js"));function r(o){return o&&o.__esModule?o:{default:o}}var t='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';exports.ATTRIBUTION=t;var e=function(o){function r(r){var e,i=r||{};e=void 0!==i.attributions?i.attributions:[t];var a=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",p=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o.call(this,{attributions:e,cacheSize:i.cacheSize,crossOrigin:a,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:p,wrapX:i.wrapX,attributionsCollapsible:!1})}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r}(o.default),i=e;exports.default=i;
},{"./XYZ.js":"knlU"}],"dJUt":[function(require,module,exports) {
var a=!0;try{new ImageData(10,10)}catch(n){a=!1}var e=document.createElement("canvas").getContext("2d");function t(t,n,r){if(a)return new ImageData(t,n,r);var c=e.createImageData(n,r);return c.data.set(t),c}exports.newImageData=t;
},{}],"lnrF":[function(require,module,exports) {
var t=require("./util").newImageData;function e(t){var e=!0;try{new ImageData(10,10)}catch(i){e=!1}function a(t,a,i){return e?new ImageData(t,a,i):{data:t,width:a,height:i}}return function(e){var i,r,n=e.buffers,s=e.meta,o=e.imageOps,u=e.width,h=e.height,f=n.length,p=n[0].byteLength;if(o){var _=new Array(f);for(r=0;r<f;++r)_[r]=a(new Uint8ClampedArray(n[r]),u,h);i=t(_,s).data}else{i=new Uint8ClampedArray(p);var l=new Array(f),d=new Array(f);for(r=0;r<f;++r)l[r]=new Uint8ClampedArray(n[r]),d[r]=[0,0,0,0];for(var g=0;g<p;g+=4){for(var m=0;m<f;++m){var c=l[m];d[m][0]=c[g],d[m][1]=c[g+1],d[m][2]=c[g+2],d[m][3]=c[g+3]}var v=t(d,s);i[g]=v[0],i[g+1]=v[1],i[g+2]=v[2],i[g+3]=v[3]}}return i.buffer}}function a(t,a){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+e.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),n=URL.createObjectURL(r),s=new Worker(n);return s.addEventListener("message",a),s}function i(t,a){var i=e(t.operation);return{postMessage:function(t){setTimeout(function(){a({data:{buffer:i(t),meta:t.meta}})},0)}}}function r(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=a(t,this._onWorkerMessage.bind(this,n));else r[0]=i(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}r.prototype.process=function(t,e,a){this._enqueue({inputs:t,meta:e,callback:a}),this._dispatch()},r.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},r.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},r.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,a=t.inputs[0].height,i=t.inputs.map(function(t){return t.data.buffer}),r=this._workers.length;if(this._running=r,1===r)this._workers[0].postMessage({buffers:i,meta:t.meta,imageOps:this._imageOps,width:e,height:a},i);else for(var n=t.inputs[0].data.length,s=4*Math.ceil(n/4/r),o=0;o<r;++o){for(var u=o*s,h=[],f=0,p=i.length;f<p;++f)h.push(i[o].slice(u,u+s));this._workers[o].postMessage({buffers:h,meta:t.meta,imageOps:this._imageOps,width:e,height:a},h)}}},r.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},r.prototype._resolveJob=function(){var e,a,i=this._job,r=this._workers.length;if(1===r)e=new Uint8ClampedArray(this._dataLookup[0].buffer),a=this._dataLookup[0].meta;else{var n=i.inputs[0].data.length;e=new Uint8ClampedArray(n),a=new Array(n);for(var s=4*Math.ceil(n/4/r),o=0;o<r;++o){var u=this._dataLookup[o].buffer,h=o*s;e.set(new Uint8ClampedArray(u),h),a[o]=this._dataLookup[o].meta}}this._job=null,this._dataLookup={},i.callback(null,t(e,i.inputs[0].width,i.inputs[0].height),a),this._dispatch()},module.exports=r;
},{"./util":"dJUt"}],"8pn8":[function(require,module,exports) {
var r=require("./processor");exports.Processor=r;
},{"./processor":"lnrF"}],"2KHB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../LayerType.js")),t=r(require("./Layer.js"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(t){function r(r){var o=r||{};t.call(this,o),this.type=e.default.IMAGE}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(t.default);o.prototype.getSource;var u=o;exports.default=u;
},{"../LayerType.js":"8+bQ","./Layer.js":"GCgv"}],"M5pz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"BU+E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../LayerType.js")),t=s(require("./Layer.js")),r=s(require("./TileProperty.js")),o=require("../obj.js");function s(e){return e&&e.__esModule?e:{default:e}}var i=function(t){function s(r){var s=r||{},i=(0,o.assign)({},s);delete i.preload,delete i.useInterimTilesOnError,t.call(this,i),this.setPreload(void 0!==s.preload?s.preload:0),this.setUseInterimTilesOnError(void 0===s.useInterimTilesOnError||s.useInterimTilesOnError),this.type=e.default.TILE}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.getPreload=function(){return this.get(r.default.PRELOAD)},s.prototype.setPreload=function(e){this.set(r.default.PRELOAD,e)},s.prototype.getUseInterimTilesOnError=function(){return this.get(r.default.USE_INTERIM_TILES_ON_ERROR)},s.prototype.setUseInterimTilesOnError=function(e){this.set(r.default.USE_INTERIM_TILES_ON_ERROR,e)},s}(t.default);i.prototype.getSource;var n=i;exports.default=n;
},{"../LayerType.js":"8+bQ","./Layer.js":"GCgv","./TileProperty.js":"M5pz","../obj.js":"mH6q"}],"w95b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=m(require("../ImageCanvas.js")),r=m(require("../TileQueue.js")),a=require("../dom.js"),n=require("../events.js"),i=m(require("../events/Event.js")),s=m(require("../events/EventType.js")),o=require("pixelworks/lib/index"),u=require("../extent.js"),d=m(require("../LayerType.js")),l=m(require("../layer/Image.js")),h=m(require("../layer/Tile.js")),p=require("../obj.js"),c=m(require("../renderer/canvas/ImageLayer.js")),f=m(require("../renderer/canvas/TileLayer.js")),v=m(require("./Image.js")),g=m(require("./State.js")),_=require("../transform.js");function m(e){return e&&e.__esModule?e:{default:e}}var y={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},I={PIXEL:"pixel",IMAGE:"image"},S=function(e){function t(t,r,a){e.call(this,t),this.extent=r.extent,this.resolution=r.viewState.resolution/r.pixelRatio,this.data=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(i.default),w=function(i){function d(t){i.call(this,{projection:null}),this.worker_=null,this.operationType_=void 0!==t.operationType?t.operationType:I.PIXEL,this.threads_=void 0!==t.threads?t.threads:1,this.renderers_=E(t.sources);for(var a=0,o=this.renderers_.length;a<o;++a)(0,n.listen)(this.renderers_[a],s.default.CHANGE,this.changed,this);this.tileQueue_=new r.default(function(){return 1},this.changed.bind(this));for(var u=C(this.renderers_),d={},l=0,h=u.length;l<h;++l)d[(0,e.getUid)(u[l].layer)]=u[l];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,_.create)(),extent:null,focus:null,index:0,layerStates:d,layerStatesArray:u,pixelRatio:1,pixelToCoordinateTransform:(0,_.create)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==t.operation&&this.setOperation(t.operation,t.lib)}return i&&(d.__proto__=i),d.prototype=Object.create(i&&i.prototype),d.prototype.constructor=d,d.prototype.setOperation=function(e,t){this.worker_=new o.Processor({operation:e,imageOps:this.operationType_===I.IMAGE,queue:1,lib:t,threads:this.threads_}),this.changed()},d.prototype.updateFrameState_=function(e,t,r){var a=(0,p.assign)({},this.frameState_);a.viewState=(0,p.assign)({},a.viewState);var n=(0,u.getCenter)(e);a.extent=e.slice(),a.focus=n,a.size[0]=Math.round((0,u.getWidth)(e)/t),a.size[1]=Math.round((0,u.getHeight)(e)/t),a.time=Date.now(),a.animate=!1;var i=a.viewState;return i.center=n,i.projection=r,i.resolution=t,a},d.prototype.allSourcesReady_=function(){for(var e=!0,t=0,r=this.renderers_.length;t<r;++t)if(this.renderers_[t].getLayer().getSource().getState()!==g.default.READY){e=!1;break}return e},d.prototype.getImage=function(e,t,r,a){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(e,t,a);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var i=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();t===i&&(0,u.equals)(e,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},d.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.renderers_.length,r=new Array(t),a=0;a<t;++a){var n=q(this.renderers_[a],e,e.layerStatesArray[a]);if(!n)return;r[a]=n}var i={};this.dispatchEvent(new S(y.BEFOREOPERATIONS,e,i)),this.worker_.process(r,i,this.onWorkerComplete_.bind(this,e))},d.prototype.onWorkerComplete_=function(e,r,n,i){if(!r&&n){var s=e.extent,o=e.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&(0,u.equals)(s,this.requestedFrameState_.extent)){var d;if(this.renderedImageCanvas_)d=this.renderedImageCanvas_.getImage().getContext("2d");else{var l=Math.round((0,u.getWidth)(s)/o),h=Math.round((0,u.getHeight)(s)/o);d=(0,a.createCanvasContext2D)(l,h),this.renderedImageCanvas_=new t.default(s,o,1,d.canvas)}d.putImageData(n,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new S(y.AFTEROPERATIONS,e,i))}}},d.prototype.getImageInternal=function(){return null},d}(v.default),T=null;function q(e,t,r){if(!e.prepareFrame(t,r))return null;var n=t.size[0],i=t.size[1];if(T){var s=T.canvas;s.width!==n||s.height!==i?T=(0,a.createCanvasContext2D)(n,i):T.clearRect(0,0,n,i)}else T=(0,a.createCanvasContext2D)(n,i);return e.composeFrame(t,r,T),T.getImageData(0,0,n,i)}function C(e){return e.map(function(e){return e.getLayer().getLayerState()})}function E(e){for(var t=e.length,r=new Array(t),a=0;a<t;++a)r[a]=j(e[a]);return r}function j(e){var t=e,r=e,a=e,n=null;return"function"==typeof t.getTile?n=R(t):"function"==typeof r.getImage?n=x(r):a.getType()===d.default.TILE?n=new f.default(a):a.getType()!=d.default.IMAGE&&a.getType()!=d.default.VECTOR||(n=new c.default(a)),n}function x(e){var t=new l.default({source:e});return new c.default(t)}function R(e){var t=new h.default({source:e});return new f.default(t)}var O=w;exports.default=O;
},{"../util.js":"KniQ","../ImageCanvas.js":"K7j2","../TileQueue.js":"0tHO","../dom.js":"Xno5","../events.js":"55Uq","../events/Event.js":"fKNg","../events/EventType.js":"C8cu","pixelworks/lib/index":"8pn8","../extent.js":"QDir","../LayerType.js":"8+bQ","../layer/Image.js":"2KHB","../layer/Tile.js":"BU+E","../obj.js":"mH6q","../renderer/canvas/ImageLayer.js":"rz/N","../renderer/canvas/TileLayer.js":"hkM/","./Image.js":"XHvt","./State.js":"iC8j","../transform.js":"P4eA"}],"3ehV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./OSM.js"),o=n(require("./XYZ.js"));function n(e){return e&&e.__esModule?e:{default:e}}var r=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',e.ATTRIBUTION],t={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},a={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},i=function(e){function o(o){var n=o.layer.indexOf("-"),i=-1==n?o.layer:o.layer.slice(0,n),s=a[i],p=t[o.layer],u=void 0!==o.url?o.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+o.layer+"/{z}/{x}/{y}."+p.extension;e.call(this,{attributions:r,cacheSize:o.cacheSize,crossOrigin:"anonymous",maxZoom:null!=o.maxZoom?o.maxZoom:s.maxZoom,minZoom:null!=o.minZoom?o.minZoom:s.minZoom,opaque:p.opaque,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,url:u,wrapX:o.wrapX})}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o}(o.default),s=i;exports.default=s;
},{"./OSM.js":"Rmo4","./XYZ.js":"knlU"}],"XUos":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../extent.js"),t=require("../math.js"),r=require("../obj.js"),i=require("../size.js"),o=n(require("./TileImage.js")),a=require("../tilecoord.js"),s=require("../uri.js");function n(e){return e&&e.__esModule?e:{default:e}}var p=function(i){function o(t){var r=t||{};i.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,tileUrlFunction:u,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition}),this.params_=r.params||{},this.tmpExtent_=(0,e.createEmpty)(),this.setKey(this.getKeyForParams_())}return i&&(o.__proto__=i),o.prototype=Object.create(i&&i.prototype),o.prototype.constructor=o,o.prototype.getKeyForParams_=function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")},o.prototype.getParams=function(){return this.params_},o.prototype.getRequestUrl_=function(e,r,i,o,n,p){var u=this.urls;if(u){var l,c=n.getCode().split(":").pop();if(p.SIZE=r[0]+","+r[1],p.BBOX=i.join(","),p.BBOXSR=c,p.IMAGESR=c,p.DPI=Math.round(p.DPI?p.DPI*o:90*o),1==u.length)l=u[0];else l=u[(0,t.modulo)((0,a.hash)(e),u.length)];var h=l.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,s.appendParams)(h,p)}},o.prototype.getTilePixelRatio=function(e){return e},o.prototype.updateParams=function(e){(0,r.assign)(this.params_,e),this.setKey(this.getKeyForParams_())},o}(o.default);function u(e,t,o){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(o)),!(a.getResolutions().length<=e[0])){var s=a.getTileCoordExtent(e,this.tmpExtent_),n=(0,i.toSize)(a.getTileSize(e[0]),this.tmpSize);1!=t&&(n=(0,i.scale)(n,t,this.tmpSize));var p={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return(0,r.assign)(p,this.params_),this.getRequestUrl_(e,n,s,t,o,p)}}var l=p;exports.default=l;
},{"../extent.js":"QDir","../math.js":"B96G","../obj.js":"mH6q","../size.js":"TAHd","./TileImage.js":"6udA","../tilecoord.js":"2faT","../uri.js":"2n7G"}],"dQMP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=l(require("../Tile.js")),e=l(require("../TileState.js")),r=require("../dom.js"),i=require("../size.js"),o=l(require("./Tile.js")),n=require("../tilecoord.js");function l(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function i(r,i,o){t.call(this,r,e.default.LOADED),this.tileSize_=i,this.text_=o,this.canvas_=null}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=(0,r.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},i.prototype.load=function(){},i}(t.default),a=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTile=function(t,e,r){var o=(0,n.getKeyZXY)(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var l=(0,i.toSize)(this.tileGrid.getTileSize(t)),a=[t,e,r],c=this.getTileCoordForTileUrlFunction(a),u=c?this.getTileCoordForTileUrlFunction(c).toString():"",p=new s(a,l,u);return this.tileCache.set(o,p),p},e}(o.default),c=a;exports.default=c;
},{"../Tile.js":"IWZI","../TileState.js":"Xz9x","../dom.js":"Xno5","../size.js":"TAHd","./Tile.js":"JECm","../tilecoord.js":"2faT"}],"V9RY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../tileurlfunction.js"),e=require("../asserts.js"),r=require("../extent.js"),i=require("../net.js"),o=require("../proj.js"),n=l(require("./State.js")),s=l(require("./TileImage.js")),a=require("../tilegrid.js");function l(t){return t&&t.__esModule?t:{default:t}}var u=function(s){function l(t){if(s.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:(0,o.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:n.default.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.tileJSON_=null,t.url)if(t.jsonp)(0,i.jsonp)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var r=new XMLHttpRequest;r.addEventListener("load",this.onXHRLoad_.bind(this)),r.addEventListener("error",this.onXHRError_.bind(this)),r.open("GET",t.url),r.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):(0,e.assert)(!1,51)}return s&&(l.__proto__=s),l.prototype=Object.create(s&&s.prototype),l.prototype.constructor=l,l.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r;try{r=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},l.prototype.onXHRError_=function(t){this.handleTileJSONError()},l.prototype.getTileJSON=function(){return this.tileJSON_},l.prototype.handleTileJSONResponse=function(e){var i,s=(0,o.get)("EPSG:4326"),l=this.getProjection();if(void 0!==e.bounds){var u=(0,o.getTransformFromProjections)(s,l);i=(0,r.applyTransform)(e.bounds,u)}var d=e.minzoom||0,p=e.maxzoom||22,h=(0,a.createXYZ)({extent:(0,a.extentFromProjection)(l),maxZoom:p,minZoom:d});if(this.tileGrid=h,this.tileUrlFunction=(0,t.createFromTemplates)(e.tiles,h),void 0!==e.attribution&&!this.getAttributions()){var c=void 0!==i?i:s.getExtent();this.setAttributions(function(t){return(0,r.intersects)(c,t.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState(n.default.READY)},l.prototype.handleTileJSONError=function(){this.setState(n.default.ERROR)},l}(s.default),d=u;exports.default=d;
},{"../tileurlfunction.js":"p1v/","../asserts.js":"fLG6","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","./State.js":"iC8j","./TileImage.js":"6udA","../tilegrid.js":"ExRx"}],"IcO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./common.js"),e=require("../asserts.js"),r=require("../extent.js"),i=require("../obj.js"),s=require("../math.js"),o=require("../proj.js"),a=require("../reproj.js"),n=require("../size.js"),u=S(require("./TileImage.js")),p=S(require("./WMSServerType.js")),h=require("../tilecoord.js"),l=require("../string.js"),_=require("../uri.js");function S(t){return t&&t.__esModule?t:{default:t}}var c=function(u){function S(t){var e=t||{},i=e.params||{},s=!("TRANSPARENT"in i)||i.TRANSPARENT;u.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!s,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,tileUrlFunction:d,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=(0,r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}return u&&(S.__proto__=u),S.prototype=Object.create(u&&u.prototype),S.prototype.constructor=S,S.prototype.getGetFeatureInfoUrl=function(e,s,u,p){var h=(0,o.get)(u),l=this.getProjection(),_=this.getTileGrid();_||(_=this.getTileGridForProjection(h));var S=_.getTileCoordForCoordAndResolution(e,s);if(!(_.getResolutions().length<=S[0])){var c=_.getResolution(S[0]),d=_.getTileCoordExtent(S,this.tmpExtent_),g=(0,n.toSize)(_.getTileSize(S[0]),this.tmpSize),R=this.gutter_;0!==R&&(g=(0,n.buffer)(g,R,this.tmpSize),d=(0,r.buffer)(d,c*R,d)),l&&l!==h&&(c=(0,a.calculateSourceResolution)(l,h,e,c),d=(0,o.transformExtent)(d,h,l),e=(0,o.transform)(e,h,l));var T={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,i.assign)(T,this.params_,p);var E=Math.floor((e[0]-d[0])/c),f=Math.floor((d[3]-e[1])/c);return T[this.v13_?"I":"X"]=E,T[this.v13_?"J":"Y"]=f,this.getRequestUrl_(S,g,d,1,l||h,T)}},S.prototype.getGutter=function(){return this.gutter_},S.prototype.getParams=function(){return this.params_},S.prototype.getRequestUrl_=function(t,r,i,o,a,n){var u=this.urls;if(u){if(n.WIDTH=r[0],n.HEIGHT=r[1],n[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=o)switch(this.serverType_){case p.default.GEOSERVER:var l=90*o+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+l:n.FORMAT_OPTIONS="dpi:"+l;break;case p.default.MAPSERVER:n.MAP_RESOLUTION=90*o;break;case p.default.CARMENTA_SERVER:case p.default.QGIS:n.DPI=90*o;break;default:(0,e.assert)(!1,52)}var S,c,d=a.getAxisOrientation(),g=i;if(this.v13_&&"ne"==d.substr(0,2))S=i[0],g[0]=i[1],g[1]=S,S=i[2],g[2]=i[3],g[3]=S;if(n.BBOX=g.join(","),1==u.length)c=u[0];else c=u[(0,s.modulo)((0,h.hash)(t),u.length)];return(0,_.appendParams)(c,n)}},S.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},S.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},S.prototype.updateParams=function(t){(0,i.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},S.prototype.updateV13_=function(){var e=this.params_.VERSION||t.DEFAULT_WMS_VERSION;this.v13_=(0,l.compareVersions)(e,"1.3")>=0},S}(u.default);function d(e,s,o){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(o)),!(a.getResolutions().length<=e[0])){1==s||this.hidpi_&&void 0!==this.serverType_||(s=1);var u=a.getResolution(e[0]),p=a.getTileCoordExtent(e,this.tmpExtent_),h=(0,n.toSize)(a.getTileSize(e[0]),this.tmpSize),l=this.gutter_;0!==l&&(h=(0,n.buffer)(h,l,this.tmpSize),p=(0,r.buffer)(p,u*l,p)),1!=s&&(h=(0,n.scale)(h,s,this.tmpSize));var _={SERVICE:"WMS",VERSION:t.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return(0,i.assign)(_,this.params_),this.getRequestUrl_(e,h,p,s,o,_)}}var g=c;exports.default=g;
},{"./common.js":"a8mu","../asserts.js":"fLG6","../extent.js":"QDir","../obj.js":"mH6q","../math.js":"B96G","../proj.js":"Diht","../reproj.js":"U255","../size.js":"TAHd","./TileImage.js":"6udA","./WMSServerType.js":"mXwm","../tilecoord.js":"2faT","../string.js":"AiCK","../uri.js":"2n7G"}],"o/CP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CustomTile=void 0;var t=c(require("../Tile.js")),e=c(require("../TileState.js")),i=require("../tileurlfunction.js"),r=require("../asserts.js"),o=require("../events.js"),s=c(require("../events/EventType.js")),n=require("../extent.js"),a=require("../net.js"),l=require("../proj.js"),h=c(require("./State.js")),u=c(require("./Tile.js")),d=require("../tilecoord.js"),p=require("../tilegrid.js");function c(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function i(e,i,r,o,s,n){t.call(this,e,i),this.src_=r,this.extent_=o,this.preemptive_=s,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=n}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.getImage=function(){return null},i.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var o=r.charCodeAt(Math.floor(e*r.length));o>=93&&o--,o>=35&&o--;var s=null;if((o-=32)in this.keys_){var n=this.keys_[o];s=this.data_&&n in this.data_?this.data_[n]:n}return s},i.prototype.forDataAtCoordinate=function(t,i,r,n){this.state==e.default.IDLE&&!0===n?((0,o.listenOnce)(this,s.default.CHANGE,function(e){i.call(r,this.getData(t))},this),this.loadInternal_()):!0===n?setTimeout(function(){i.call(r,this.getData(t))}.bind(this),0):i.call(r,this.getData(t))},i.prototype.getKey=function(){return this.src_},i.prototype.handleError_=function(){this.state=e.default.ERROR,this.changed()},i.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=e.default.EMPTY,this.changed()},i.prototype.loadInternal_=function(){if(this.state==e.default.IDLE)if(this.state=e.default.LOADING,this.jsonp_)(0,a.jsonp)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},i.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(r){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},i.prototype.onXHRError_=function(t){this.handleError_()},i.prototype.load=function(){this.preemptive_&&this.loadInternal_()},i}(t.default);exports.CustomTile=_;var f=function(t){function o(e){if(t.call(this,{projection:(0,l.get)("EPSG:3857"),state:h.default.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=i.nullTileUrlFunction,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)(0,a.jsonp)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var o=new XMLHttpRequest;o.addEventListener("load",this.onXHRLoad_.bind(this)),o.addEventListener("error",this.onXHRError_.bind(this)),o.open("GET",e.url),o.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):(0,r.assert)(!1,51)}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(r){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},o.prototype.onXHRError_=function(t){this.handleTileJSONError()},o.prototype.getTemplate=function(){return this.template_},o.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var o=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},o.prototype.handleTileJSONError=function(){this.setState(h.default.ERROR)},o.prototype.handleTileJSONResponse=function(t){var e,r=(0,l.get)("EPSG:4326"),o=this.getProjection();if(void 0!==t.bounds){var s=(0,l.getTransformFromProjections)(r,o);e=(0,n.applyTransform)(t.bounds,s)}var a=t.minzoom||0,u=t.maxzoom||22,d=(0,p.createXYZ)({extent:(0,p.extentFromProjection)(o),maxZoom:u,minZoom:a});this.tileGrid=d,this.template_=t.template;var c=t.grids;if(c){if(this.tileUrlFunction_=(0,i.createFromTemplates)(c,d),void 0!==t.attribution){var _=void 0!==e?e:r.getExtent();this.setAttributions(function(e){return(0,n.intersects)(_,e.extent)?[t.attribution]:null})}this.setState(h.default.READY)}else this.setState(h.default.ERROR)},o.prototype.getTile=function(t,i,r,o,s){var n=(0,d.getKeyZXY)(t,i,r);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var a=[t,i,r],l=this.getTileCoordForTileUrlFunction(a,s),h=this.tileUrlFunction_(l,o,s),u=new _(a,void 0!==h?e.default.IDLE:e.default.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(n,u),u},o.prototype.useTile=function(t,e,i){var r=(0,d.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},o}(u.default),v=f;exports.default=v;
},{"../Tile.js":"IWZI","../TileState.js":"Xz9x","../tileurlfunction.js":"p1v/","../asserts.js":"fLG6","../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","../net.js":"SU9K","../proj.js":"Diht","./State.js":"iC8j","./Tile.js":"JECm","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"xDao":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultLoadFunction=f,exports.default=void 0;var e=require("./util.js"),t=u(require("./Tile.js")),i=u(require("./TileState.js")),s=require("./dom.js"),r=require("./events.js"),n=require("./extent.js"),o=u(require("./events/EventType.js")),l=require("./featureloader.js"),a=require("./functions.js");function u(e){return e&&e.__esModule?e:{default:e}}var h=function(t){function l(e,s,u,h,d,f,c,y,g,p,_,v,L,T,E){if(t.call(this,e,s,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=p,this.tileKeys=[],this.extent=null,this.sourceRevision_=u,this.wrappedTileCoord=f,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],f){var K=this.extent=g.getTileCoordExtent(f),D=g.getResolution(E),R=y.getZForResolution(D),O=E!=e[0],x=0;if(y.forEachTileCoord(K,R,function(e){var t=(0,n.getIntersection)(K,y.getTileCoordExtent(e)),s=y.getExtent();if(s&&(t=(0,n.getIntersection)(t,s,t)),(0,n.getWidth)(t)/D>=.5&&(0,n.getHeight)(t)/D>=.5){++x;var l=e.toString(),a=p[l];if(!a&&!O){var u=c(e,_,v);a=p[l]=new L(e,null==u?i.default.EMPTY:i.default.IDLE,null==u?"":u,h,d),this.sourceTileListenerKeys_.push((0,r.listen)(a,o.default.CHANGE,T))}!a||O&&a.getState()!=i.default.LOADED||(a.consumers++,this.tileKeys.push(l))}}.bind(this)),O&&x==this.tileKeys.length&&this.finishLoading_(),E<=e[0]&&this.state!=i.default.LOADED)for(;E>g.getMinZoom();){var j=new l(e,s,u,h,d,f,c,y,g,p,_,v,L,a.VOID,--E);if(j.state==i.default.LOADED){this.interimTile=j;break}}}}return t&&(l.__proto__=t),l.prototype=Object.create(t&&t.prototype),l.prototype.constructor=l,l.prototype.disposeInternal=function(){this.state=i.default.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,s=this.tileKeys.length;e<s;++e){var n=this.tileKeys[e],o=this.getTile(n);o.consumers--,0==o.consumers&&(delete this.sourceTiles_[n],o.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(r.unlistenByKey),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(r.unlistenByKey),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},l.prototype.getContext=function(t){var i=(0,e.getUid)(t);return i in this.context_||(this.context_[i]=(0,s.createCanvasContext2D)()),this.context_[i]},l.prototype.getImage=function(e){return-1==this.getReplayState(e).renderedTileRevision?null:this.getContext(e).canvas},l.prototype.getReplayState=function(t){var i=(0,e.getUid)(t);return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[i]},l.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},l.prototype.getTile=function(e){return this.sourceTiles_[e]},l.prototype.load=function(){var t=0,s={};this.state==i.default.IDLE&&this.setState(i.default.LOADING),this.state==i.default.LOADING&&this.tileKeys.forEach(function(n){var l=this.getTile(n);if(l.state==i.default.IDLE&&(l.setLoader(this.loader_),l.load()),l.state==i.default.LOADING){var a=(0,r.listen)(l,o.default.CHANGE,function(r){var n=l.getState();if(n==i.default.LOADED||n==i.default.ERROR){var o=(0,e.getUid)(l);n==i.default.ERROR?s[o]=!0:(--t,delete s[o]),t-Object.keys(s).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(a),++t}}.bind(this)),t-Object.keys(s).length==0&&setTimeout(this.finishLoading_.bind(this),0)},l.prototype.finishLoading_=function(){for(var e=this.tileKeys.length,t=0,s=e-1;s>=0;--s){var n=this.getTile(this.tileKeys[s]).getState();n!=i.default.LOADED&&--e,n==i.default.EMPTY&&++t}e==this.tileKeys.length?(this.loadListenerKeys_.forEach(r.unlistenByKey),this.loadListenerKeys_.length=0,this.setState(i.default.LOADED)):this.setState(t==this.tileKeys.length?i.default.EMPTY:i.default.ERROR)},l}(t.default),d=h;function f(e,t){var i=(0,l.loadFeaturesXhr)(t,e.getFormat(),e.onLoad.bind(e),e.onError.bind(e));e.setLoader(i)}exports.default=d;
},{"./util.js":"KniQ","./Tile.js":"IWZI","./TileState.js":"Xz9x","./dom.js":"Xno5","./events.js":"55Uq","./extent.js":"QDir","./events/EventType.js":"C8cu","./featureloader.js":"U3JP","./functions.js":"RgA2"}],"yj80":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),e=r(require("./Tile.js")),o=r(require("./TileState.js"));function r(t){return t&&t.__esModule?t:{default:t}}var i=[0,0,4096,4096],s=function(e){function r(t,o,r,i,s,n){e.call(this,t,o,n),this.consumers=0,this.extent_=null,this.format_=i,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=s,this.url_=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=o.default.ABORT,this.changed(),e.prototype.disposeInternal.call(this)},r.prototype.getExtent=function(){return this.extent_||i},r.prototype.getFormat=function(){return this.format_},r.prototype.getFeatures=function(){return this.features_},r.prototype.getKey=function(){return this.url_},r.prototype.getProjection=function(){return this.projection_},r.prototype.getReplayGroup=function(e,o){return this.replayGroups_[(0,t.getUid)(e)+","+o]},r.prototype.load=function(){this.state==o.default.IDLE&&(this.setState(o.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},r.prototype.onLoad=function(t,e,o){this.setProjection(e),this.setFeatures(t),this.setExtent(o)},r.prototype.onError=function(){this.setState(o.default.ERROR)},r.prototype.setExtent=function(t){this.extent_=t},r.prototype.setFeatures=function(t){this.features_=t,this.setState(o.default.LOADED)},r.prototype.setProjection=function(t){this.projection_=t},r.prototype.setReplayGroup=function(e,o,r){this.replayGroups_[(0,t.getUid)(e)+","+o]=r},r.prototype.setLoader=function(t){this.loader_=t},r}(e.default),n=s;exports.default=n;
},{"./util.js":"KniQ","./Tile.js":"IWZI","./TileState.js":"Xz9x"}],"A6uo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("../TileState.js")),t=a(require("../VectorImageTile.js")),i=u(require("../VectorTile.js")),r=require("../size.js"),o=u(require("./UrlTile.js")),n=require("../tilecoord.js"),l=require("../tilegrid.js");function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){if(e&&e.__esModule)return e;var t=s();if(t&&t.has(e))return t.get(e);var i={};if(null!=e){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=r?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=e[o]}}return i.default=e,t&&t.set(e,i),i}function u(e){return e&&e.__esModule?e:{default:e}}var c=function(o){function s(e){var r=e.projection||"EPSG:3857",n=e.extent||(0,l.extentFromProjection)(r),s=e.tileGrid||(0,l.createXYZ)({extent:n,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});o.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,opaque:!1,projection:r,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:t.defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:i.default,this.tileGrids_={}}return o&&(s.__proto__=o),s.prototype=Object.create(o&&o.prototype),s.prototype.constructor=s,s.prototype.getOverlaps=function(){return this.overlaps_},s.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},s.prototype.getTile=function(i,r,o,l,s){var a=(0,n.getKeyZXY)(i,r,o);if(this.tileCache.containsKey(a))return this.tileCache.get(a);var u=[i,r,o],c=this.getTileCoordForTileUrlFunction(u,s),p=new t.default(u,null!==c?e.default.IDLE:e.default.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,c,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(s),this.sourceTiles_,l,s,this.tileClass,this.handleTileChange.bind(this),u[0]);return this.tileCache.set(a,p),p},s.prototype.getTileGridForProjection=function(e){var t=e.getCode(),i=this.tileGrids_[t];if(!i){var r=this.tileGrid;i=this.tileGrids_[t]=(0,l.createForProjection)(e,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return i},s.prototype.getTilePixelRatio=function(e){return e},s.prototype.getTilePixelSize=function(e,t,i){var o=this.getTileGridForProjection(i),n=(0,r.toSize)(o.getTileSize(e),this.tmpSize);return[Math.round(n[0]*t),Math.round(n[1]*t)]},s}(o.default),p=c;exports.default=p;
},{"../TileState.js":"Xz9x","../VectorImageTile.js":"xDao","../VectorTile.js":"yj80","../size.js":"TAHd","./UrlTile.js":"uv+9","../tilecoord.js":"2faT","../tilegrid.js":"ExRx"}],"21gB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={KVP:"KVP",REST:"REST"};exports.default=e;
},{}],"5omF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromCapabilitiesMatrixSet=s,exports.default=void 0;var e=require("../array.js"),t=require("../proj.js"),i=r(require("./TileGrid.js"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(t){e.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getMatrixId=function(e){return this.matrixIds_[e]},t.prototype.getMatrixIds=function(){return this.matrixIds_},t}(i.default),n=o;function s(i,r,n){var s=[],u=[],a=[],l=[],p=[],d=void 0!==n?n:[],f=i.SupportedCRS,c=(0,t.get)(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,t.get)(f),x=c.getMetersPerUnit(),h="ne"==c.getAxisOrientation().substr(0,2);return i.TileMatrix.sort(function(e,t){return t.ScaleDenominator-e.ScaleDenominator}),i.TileMatrix.forEach(function(t){if(!(d.length>0)||(0,e.find)(d,function(e){return t.Identifier==e.TileMatrix||-1===t.Identifier.indexOf(":")&&i.Identifier+":"+t.Identifier===e.TileMatrix})){u.push(t.Identifier);var r=28e-5*t.ScaleDenominator/x,o=t.TileWidth,n=t.TileHeight;h?a.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):a.push(t.TopLeftCorner),s.push(r),l.push(o==n?o:[o,n]),p.push([t.MatrixWidth,-t.MatrixHeight])}}),new o({extent:r,origins:a,resolutions:s,matrixIds:u,tileSizes:l,sizes:p})}exports.default=n;
},{"../array.js":"luEr","../proj.js":"Diht","./TileGrid.js":"5dp/"}],"LIR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.optionsFromCapabilities=f,exports.default=void 0;var e=require("../tileurlfunction.js"),t=require("../array.js"),i=require("../extent.js"),r=require("../obj.js"),n=require("../proj.js"),o=l(require("./TileImage.js")),s=l(require("./WMTSRequestEncoding.js")),a=require("../tilegrid/WMTS.js"),u=require("../uri.js");function l(e){return e&&e.__esModule?e:{default:e}}var c=function(t){function i(i){var r=void 0!==i.requestEncoding?i.requestEncoding:s.default.KVP,n=i.tileGrid,o=i.urls;void 0===o&&void 0!==i.url&&(o=(0,e.expandUrl)(i.url)),t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:e.nullTileUrlFunction,urls:o,wrapX:void 0!==i.wrapX&&i.wrapX,transition:i.transition}),this.version_=void 0!==i.version?i.version:"1.0.0",this.format_=void 0!==i.format?i.format:"image/jpeg",this.dimensions_=void 0!==i.dimensions?i.dimensions:{},this.layer_=i.layer,this.matrixSet_=i.matrixSet,this.style_=i.style,this.requestEncoding_=r,this.setKey(this.getKeyForDimensions_()),o&&o.length>0&&(this.tileUrlFunction=(0,e.createFromTileUrlFunctions)(o.map(p.bind(this))))}return t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i,i.prototype.setUrls=function(t){this.urls=t;var i=t.join("\n");this.setTileUrlFunction((0,e.createFromTileUrlFunctions)(t.map(p.bind(this))),i)},i.prototype.getDimensions=function(){return this.dimensions_},i.prototype.getFormat=function(){return this.format_},i.prototype.getLayer=function(){return this.layer_},i.prototype.getMatrixSet=function(){return this.matrixSet_},i.prototype.getRequestEncoding=function(){return this.requestEncoding_},i.prototype.getStyle=function(){return this.style_},i.prototype.getVersion=function(){return this.version_},i.prototype.getKeyForDimensions_=function(){var e=0,t=[];for(var i in this.dimensions_)t[e++]=i+"-"+this.dimensions_[i];return t.join("/")},i.prototype.updateDimensions=function(e){(0,r.assign)(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},i}(o.default),d=c;function f(e,r){var o=e.Contents.Layer,u=(0,t.find)(o,function(e,t,i){return e.Identifier==r.layer});if(null===u)return null;var l,c=e.Contents.TileMatrixSet;(l=u.TileMatrixSetLink.length>1?"projection"in r?(0,t.findIndex)(u.TileMatrixSetLink,function(e,i,o){var s=(0,t.find)(c,function(t){return t.Identifier==e.TileMatrixSet}).SupportedCRS,a=(0,n.get)(s.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,n.get)(s),u=(0,n.get)(r.projection);return a&&u?(0,n.equivalent)(a,u):s==r.projection}):(0,t.findIndex)(u.TileMatrixSetLink,function(e,t,i){return e.TileMatrixSet==r.matrixSet}):0)<0&&(l=0);var d=u.TileMatrixSetLink[l].TileMatrixSet,f=u.TileMatrixSetLink[l].TileMatrixSetLimits,p=u.Format[0];"format"in r&&(p=r.format),(l=(0,t.findIndex)(u.Style,function(e,t,i){return"style"in r?e.Title==r.style:e.isDefault}))<0&&(l=0);var h=u.Style[l].Identifier,g={};"Dimension"in u&&u.Dimension.forEach(function(e,t,i){var r=e.Identifier,n=e.Default;void 0===n&&(n=e.Value[0]),g[r]=n});var m,v=e.Contents.TileMatrixSet,y=(0,t.find)(v,function(e,t,i){return e.Identifier==d}),x=y.SupportedCRS;if(x&&(m=(0,n.get)(x.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,n.get)(x)),"projection"in r){var S=(0,n.get)(r.projection);S&&(m&&!(0,n.equivalent)(S,m)||(m=S))}var _,T,j=u.WGS84BoundingBox;if(void 0!==j){var M=(0,n.get)("EPSG:4326").getExtent();T=j[0]==M[0]&&j[2]==M[2],_=(0,n.transformExtent)(j,"EPSG:4326",m);var q=m.getExtent();q&&((0,i.containsExtent)(q,_)||(_=void 0))}var E=(0,a.createFromCapabilitiesMatrixSet)(y,_,f),F=[],P=r.requestEncoding;if(P=void 0!==P?P:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var C=e.OperationsMetadata.GetTile.DCP.HTTP.Get,w=0,L=C.length;w<L;++w)if(C[w].Constraint){var G=(0,t.find)(C[w].Constraint,function(e){return"GetEncoding"==e.name}).AllowedValues.Value;if(""===P&&(P=G[0]),P!==s.default.KVP)break;(0,t.includes)(G,s.default.KVP)&&F.push(C[w].href)}else C[w].href&&(P=s.default.KVP,F.push(C[w].href));return 0===F.length&&(P=s.default.REST,u.ResourceURL.forEach(function(e){"tile"===e.resourceType&&(p=e.format,F.push(e.template))})),{urls:F,layer:r.layer,matrixSet:d,format:p,projection:m,requestEncoding:P,tileGrid:E,style:h,dimensions:g,wrapX:T,crossOrigin:r.crossOrigin}}function p(e){var t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t==s.default.KVP&&(0,r.assign)(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t==s.default.KVP?(0,u.appendParams)(e,i):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in i?i[t.toLowerCase()]:e});var n=this.tileGrid,o=this.dimensions_;return function(i,a,l){if(i){var c={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:-i[2]-1};(0,r.assign)(c,o);var d=e;return d=t==s.default.KVP?(0,u.appendParams)(d,c):d.replace(/\{(\w+?)\}/g,function(e,t){return c[t]})}}}exports.default=d;
},{"../tileurlfunction.js":"p1v/","../array.js":"luEr","../extent.js":"QDir","../obj.js":"mH6q","../proj.js":"Diht","./TileImage.js":"6udA","./WMTSRequestEncoding.js":"21gB","../tilegrid/WMTS.js":"5omF","../uri.js":"2n7G"}],"aDh3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CustomTile=void 0;var e=require("../tilegrid/common.js"),t=c(require("../ImageTile.js")),r=c(require("../TileState.js")),i=require("../tileurlfunction.js"),o=require("../asserts.js"),a=require("../dom.js"),n=require("../extent.js"),s=require("../size.js"),u=c(require("./TileImage.js")),l=c(require("../tilegrid/TileGrid.js"));function c(e){return e&&e.__esModule?e:{default:e}}var p={DEFAULT:"default",TRUNCATED:"truncated"},f=function(e){function t(t,r,i,o,a,n,u){e.call(this,r,i,o,a,n,u),this.zoomifyImage_=null,this.tileSize_=(0,s.toSize)(t.getTileSize(r[0]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var t=e.prototype.getImage.call(this);if(this.state==r.default.LOADED){var i=this.tileSize_;if(t.width==i[0]&&t.height==i[1])return this.zoomifyImage_=t,t;var o=(0,a.createCanvasContext2D)(i[0],i[1]);return o.drawImage(t,0,0),this.zoomifyImage_=o.canvas,o.canvas}return t},t}(t.default);exports.CustomTile=f;var h=function(t){function r(r){var a=r||{},s=a.size,u=void 0!==a.tierSizeCalculation?a.tierSizeCalculation:p.DEFAULT,c=s[0],h=s[1],d=a.extent||[0,-s[1],s[0],0],T=[],g=a.tileSize||e.DEFAULT_TILE_SIZE,m=g;switch(u){case p.DEFAULT:for(;c>m||h>m;)T.push([Math.ceil(c/m),Math.ceil(h/m)]),m+=m;break;case p.TRUNCATED:for(var v=c,_=h;v>m||_>m;)T.push([Math.ceil(v/m),Math.ceil(_/m)]),v>>=1,_>>=1;break;default:(0,o.assert)(!1,53)}T.push([1,1]),T.reverse();for(var z=[1],j=[0],y=1,x=T.length;y<x;y++)z.push(1<<y),j.push(T[y-1][0]*T[y-1][1]+j[y-1]);z.reverse();var I=new l.default({tileSize:g,extent:d,origin:(0,n.getTopLeft)(d),resolutions:z}),S=a.url;S&&-1==S.indexOf("{TileGroup}")&&-1==S.indexOf("{tileIndex}")&&(S+="{TileGroup}/{z}-{x}-{y}.jpg");var E=(0,i.expandUrl)(S);var q=(0,i.createFromTileUrlFunctions)(E.map(function(e){return function(t,r,i){if(t){var o=t[0],a=t[1],n=-t[2]-1,s=a+n*T[o][0],u=I.getTileSize(o),l=Array.isArray(u)?u[0]:u,c={z:o,x:a,y:n,tileIndex:s,TileGroup:"TileGroup"+((s+j[o])/l|0)};return e.replace(/\{(\w+?)\}/g,function(e,t){return c[t]})}}})),A=f.bind(null,I);t.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:A,tileGrid:I,tileUrlFunction:q,transition:a.transition})}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r}(u.default),d=h;exports.default=d;
},{"../tilegrid/common.js":"mOEX","../ImageTile.js":"T/Os","../TileState.js":"Xz9x","../tileurlfunction.js":"p1v/","../asserts.js":"fLG6","../dom.js":"Xno5","../extent.js":"QDir","../size.js":"TAHd","./TileImage.js":"6udA","../tilegrid/TileGrid.js":"5dp/"}],"kDr9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BingMaps",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"CartoDB",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Cluster",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"ImageArcGISRest",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"ImageCanvas",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"ImageMapGuide",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"ImageStatic",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"ImageWMS",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"OSM",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Raster",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Source",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Stamen",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"TileArcGISRest",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"TileDebug",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"TileImage",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"TileJSON",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"TileWMS",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(exports,"UrlTile",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"UTFGrid",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(exports,"WMTS",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(exports,"XYZ",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(exports,"Zoomify",{enumerable:!0,get:function(){return I.default}});var e=M(require("./source/BingMaps.js")),r=M(require("./source/CartoDB.js")),t=M(require("./source/Cluster.js")),u=M(require("./source/Image.js")),n=M(require("./source/ImageArcGISRest.js")),o=M(require("./source/ImageCanvas.js")),i=M(require("./source/ImageMapGuide.js")),s=M(require("./source/ImageStatic.js")),c=M(require("./source/ImageWMS.js")),a=M(require("./source/OSM.js")),f=M(require("./source/Raster.js")),l=M(require("./source/Source.js")),d=M(require("./source/Stamen.js")),p=M(require("./source/Tile.js")),b=M(require("./source/TileArcGISRest.js")),j=M(require("./source/TileDebug.js")),g=M(require("./source/TileImage.js")),m=M(require("./source/TileJSON.js")),O=M(require("./source/TileWMS.js")),y=M(require("./source/UrlTile.js")),x=M(require("./source/UTFGrid.js")),P=M(require("./source/Vector.js")),q=M(require("./source/VectorTile.js")),S=M(require("./source/WMTS.js")),T=M(require("./source/XYZ.js")),I=M(require("./source/Zoomify.js"));function M(e){return e&&e.__esModule?e:{default:e}}
},{"./source/BingMaps.js":"K+sj","./source/CartoDB.js":"WJrq","./source/Cluster.js":"sV2m","./source/Image.js":"XHvt","./source/ImageArcGISRest.js":"P20y","./source/ImageCanvas.js":"3Y2u","./source/ImageMapGuide.js":"C9PY","./source/ImageStatic.js":"zK6j","./source/ImageWMS.js":"e4Kb","./source/OSM.js":"Rmo4","./source/Raster.js":"w95b","./source/Source.js":"H38a","./source/Stamen.js":"3ehV","./source/Tile.js":"JECm","./source/TileArcGISRest.js":"XUos","./source/TileDebug.js":"dQMP","./source/TileImage.js":"6udA","./source/TileJSON.js":"V9RY","./source/TileWMS.js":"IcO7","./source/UrlTile.js":"uv+9","./source/UTFGrid.js":"o/CP","./source/Vector.js":"ZS12","./source/VectorTile.js":"A6uo","./source/WMTS.js":"LIR5","./source/XYZ.js":"knlU","./source/Zoomify.js":"aDh3"}],"0Kyl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformWithOptions=a,exports.default=void 0;var t=require("../obj.js"),r=require("../util.js"),e=require("../proj.js"),o=function(){this.dataProjection=null,this.defaultFeatureProjection=null};o.prototype.getReadOptions=function(t,r){var e;return r&&(e={dataProjection:r.dataProjection?r.dataProjection:this.readProjection(t),featureProjection:r.featureProjection}),this.adaptOptions(e)},o.prototype.adaptOptions=function(r){return(0,t.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},r)},o.prototype.getLastExtent=function(){return null},o.prototype.getType=function(){return(0,r.abstract)()},o.prototype.readFeature=function(t,e){return(0,r.abstract)()},o.prototype.readFeatures=function(t,e){return(0,r.abstract)()},o.prototype.readGeometry=function(t,e){return(0,r.abstract)()},o.prototype.readProjection=function(t){return(0,r.abstract)()},o.prototype.writeFeature=function(t,e){return(0,r.abstract)()},o.prototype.writeFeatures=function(t,e){return(0,r.abstract)()},o.prototype.writeGeometry=function(t,e){return(0,r.abstract)()};var n=o;function a(t,r,o){var n,a=o?(0,e.get)(o.featureProjection):null,i=o?(0,e.get)(o.dataProjection):null;if(n=a&&i&&!(0,e.equivalent)(a,i)?Array.isArray(t)?(0,e.transformExtent)(t,i,a):(r?t.clone():t).transform(r?a:i,r?i:a):t,r&&o&&void 0!==o.decimals&&!Array.isArray(n)){var u=Math.pow(10,o.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(var r=0,e=t.length;r<e;++r)t[r]=Math.round(t[r]*u)/u;return t})}return n}exports.default=n;
},{"../obj.js":"mH6q","../util.js":"KniQ","../proj.js":"Diht"}],"RA7M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=o(require("./Feature.js")),r=o(require("./FormatType.js"));function o(t){return t&&t.__esModule?t:{default:t}}var n=function(e){function o(){e.call(this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getType=function(){return r.default.JSON},o.prototype.readFeature=function(t,e){return this.readFeatureFromObject(u(t),this.getReadOptions(t,e))},o.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(u(t),this.getReadOptions(t,e))},o.prototype.readFeatureFromObject=function(e,r){return(0,t.abstract)()},o.prototype.readFeaturesFromObject=function(e,r){return(0,t.abstract)()},o.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(u(t),this.getReadOptions(t,e))},o.prototype.readGeometryFromObject=function(e,r){return(0,t.abstract)()},o.prototype.readProjection=function(t){return this.readProjectionFromObject(u(t))},o.prototype.readProjectionFromObject=function(e){return(0,t.abstract)()},o.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},o.prototype.writeFeatureObject=function(e,r){return(0,t.abstract)()},o.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},o.prototype.writeFeaturesObject=function(e,r){return(0,t.abstract)()},o.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},o.prototype.writeGeometryObject=function(e,r){return(0,t.abstract)()},o}(e.default);function u(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null}var i=n;exports.default=i;
},{"../util.js":"KniQ","./Feature.js":"0Kyl","./FormatType.js":"AbO3"}],"HvLT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=n(require("../events/EventType.js")),r=require("../extent.js"),i=n(require("./Geometry.js")),o=n(require("./GeometryType.js")),s=require("../obj.js");function n(e){return e&&e.__esModule?e:{default:e}}var a=function(i){function n(e){i.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var r=0,i=this.geometries_.length;r<i;++r)(0,e.unlisten)(this.geometries_[r],t.default.CHANGE,this.changed,this)},n.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var r=0,i=this.geometries_.length;r<i;++r)(0,e.listen)(this.geometries_[r],t.default.CHANGE,this.changed,this)},n.prototype.clone=function(){var e=new n(null);return e.setGeometries(this.geometries_),e},n.prototype.closestPointXY=function(e,t,i,o){if(o<(0,r.closestSquaredDistanceXY)(this.getExtent(),e,t))return o;for(var s=this.geometries_,n=0,a=s.length;n<a;++n)o=s[n].closestPointXY(e,t,i,o);return o},n.prototype.containsXY=function(e,t){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)if(r[i].containsXY(e,t))return!0;return!1},n.prototype.computeExtent=function(e){(0,r.createOrUpdateEmpty)(e);for(var t=this.geometries_,i=0,o=t.length;i<o;++i)(0,r.extend)(e,t[i].getExtent());return e},n.prototype.getGeometries=function(){return h(this.geometries_)},n.prototype.getGeometriesArray=function(){return this.geometries_},n.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,s.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];for(var r=[],i=this.geometries_,o=!1,a=0,h=i.length;a<h;++a){var p=i[a],u=p.getSimplifiedGeometry(e);r.push(u),u!==p&&(o=!0)}if(o){var l=new n(null);return l.setGeometriesArray(r),this.simplifiedGeometryCache[t]=l,l}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},n.prototype.getType=function(){return o.default.GEOMETRY_COLLECTION},n.prototype.intersectsExtent=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1},n.prototype.isEmpty=function(){return 0===this.geometries_.length},n.prototype.rotate=function(e,t){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].rotate(e,t);this.changed()},n.prototype.scale=function(e,t,i){var o=i;o||(o=(0,r.getCenter)(this.getExtent()));for(var s=this.geometries_,n=0,a=s.length;n<a;++n)s[n].scale(e,t,o);this.changed()},n.prototype.setGeometries=function(e){this.setGeometriesArray(h(e))},n.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},n.prototype.applyTransform=function(e){for(var t=this.geometries_,r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()},n.prototype.translate=function(e,t){for(var r=this.geometries_,i=0,o=r.length;i<o;++i)r[i].translate(e,t);this.changed()},n.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),i.prototype.disposeInternal.call(this)},n}(i.default);function h(e){for(var t=[],r=0,i=e.length;r<i;++r)t.push(e[r].clone());return t}var p=a;exports.default=p;
},{"../events.js":"55Uq","../events/EventType.js":"C8cu","../extent.js":"QDir","./Geometry.js":"F8sI","./GeometryType.js":"lmV0","../obj.js":"mH6q"}],"qBlb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=m(require("../Feature.js")),r=require("./Feature.js"),o=m(require("./JSONFeature.js")),n=m(require("../geom/GeometryCollection.js")),a=m(require("../geom/LineString.js")),i=m(require("../geom/MultiLineString.js")),u=m(require("../geom/MultiPoint.js")),s=m(require("../geom/MultiPolygon.js")),c=m(require("../geom/Point.js")),d=m(require("../geom/Polygon.js")),p=require("../obj.js"),l=require("../proj.js"),f=m(require("../geom/GeometryType.js"));function m(e){return e&&e.__esModule?e:{default:e}}var y=function(r){function o(e){var t=e||{};r.call(this),this.dataProjection=(0,l.get)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,l.get)(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName}return r&&(o.__proto__=r),o.prototype=Object.create(r&&r.prototype),o.prototype.constructor=o,o.prototype.readFeatureFromObject=function(e,r){var o=null,n=g((o="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),a=new t.default;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(n),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties),a},o.prototype.readFeaturesFromObject=function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,a=o.length;n<a;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r},o.prototype.readGeometryFromObject=function(e,t){return g(e,t)},o.prototype.readProjectionFromObject=function(t){var r,o=t.crs;return o?"name"==o.type?r=(0,l.get)(o.properties.name):(0,e.assert)(!1,36):r=this.dataProjection,r},o.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();void 0!==o&&(r.id=o);var n=e.getGeometry();n&&(r.geometry=_(n,t));var a=e.getProperties();return delete a[e.getGeometryName()],(0,p.isEmpty)(a)||(r.properties=a),r},o.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}},o.prototype.writeGeometryObject=function(e,t){return _(e,this.adaptOptions(t))},o}(o.default);function g(e,t){if(!e)return null;var o;switch(e.type){case f.default.POINT:o=O(e);break;case f.default.LINE_STRING:o=N(e);break;case f.default.POLYGON:o=G(e);break;case f.default.MULTI_POINT:o=b(e);break;case f.default.MULTI_LINE_STRING:o=P(e);break;case f.default.MULTI_POLYGON:o=h(e);break;case f.default.GEOMETRY_COLLECTION:o=j(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,r.transformWithOptions)(o,!1,t)}function j(e,t){var r=e.geometries.map(function(e){return g(e,t)});return new n.default(r)}function O(e){return new c.default(e.coordinates)}function N(e){return new a.default(e.coordinates)}function P(e){return new i.default(e.coordinates)}function b(e){return new u.default(e.coordinates)}function h(e){return new s.default(e.coordinates)}function G(e){return new d.default(e.coordinates)}function _(e,t){var o,n=(e=(0,r.transformWithOptions)(e,!0,t)).getType();switch(n){case f.default.POINT:o=w(e,t);break;case f.default.LINE_STRING:o=L(e,t);break;case f.default.POLYGON:o=C(e,t);break;case f.default.MULTI_POINT:o=F(e,t);break;case f.default.MULTI_LINE_STRING:o=v(e,t);break;case f.default.MULTI_POLYGON:o=T(e,t);break;case f.default.GEOMETRY_COLLECTION:o=I(e,t);break;case f.default.CIRCLE:o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return o}function I(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var r=(0,p.assign)({},t);return delete r.featureProjection,_(e,r)})}}function L(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function v(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function F(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function T(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function w(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function C(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var M=y;exports.default=M;
},{"../asserts.js":"fLG6","../Feature.js":"mYW9","./Feature.js":"0Kyl","./JSONFeature.js":"RA7M","../geom/GeometryCollection.js":"HvLT","../geom/LineString.js":"DfxW","../geom/MultiLineString.js":"4fbC","../geom/MultiPoint.js":"dNu5","../geom/MultiPolygon.js":"6ouh","../geom/Point.js":"gLcY","../geom/Polygon.js":"6Nww","../obj.js":"mH6q","../proj.js":"Diht","../geom/GeometryType.js":"lmV0"}],"N0HK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../dom.js"),e=function(e,i){this.space_=i,this.emptyBlocks_=[{x:0,y:0,width:e,height:e}],this.entries_={},this.context_=(0,t.createCanvasContext2D)(e,e),this.canvas_=this.context_.canvas};e.prototype.get=function(t){return this.entries_[t]||null},e.prototype.add=function(t,e,i,h,s){for(var p=0,a=this.emptyBlocks_.length;p<a;++p){var o=this.emptyBlocks_[p];if(o.width>=e+this.space_&&o.height>=i+this.space_){var c={offsetX:o.x+this.space_,offsetY:o.y+this.space_,image:this.canvas_};return this.entries_[t]=c,h.call(s,this.context_,o.x+this.space_,o.y+this.space_),this.split_(p,o,e+this.space_,i+this.space_),c}}return null},e.prototype.split_=function(t,e,i,h){var s,p;e.width-i>e.height-h?(s={x:e.x+i,y:e.y,width:e.width-i,height:e.height},p={x:e.x,y:e.y+h,width:i,height:e.height-h},this.updateBlocks_(t,s,p)):(s={x:e.x+i,y:e.y,width:e.width-i,height:h},p={x:e.x,y:e.y+h,width:e.width,height:e.height-h},this.updateBlocks_(t,s,p))},e.prototype.updateBlocks_=function(t,e,i){var h=[t,1];e.width>0&&e.height>0&&h.push(e),i.width>0&&i.height>0&&h.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,h)};var i=e;exports.default=i;
},{"../dom.js":"Xno5"}],"SyS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../webgl.js"),e=require("../functions.js"),i=r(require("./Atlas.js"));function r(t){return t&&t.__esModule?t:{default:t}}var s=256,n=-1,a=function(e){var r=e||{};this.currentSize_=void 0!==r.initialSize?r.initialSize:s,this.maxSize_=void 0!==r.maxSize?r.maxSize:-1!=n?n:void 0!==t.MAX_TEXTURE_SIZE?t.MAX_TEXTURE_SIZE:2048,this.space_=void 0!==r.space?r.space:1,this.atlases_=[new i.default(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new i.default(this.currentHitSize_,this.space_)]};a.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},a.prototype.getInfo_=function(t,e){for(var i=0,r=t.length;i<r;++i){var s=t[i].get(e);if(s)return s}return null},a.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},a.prototype.add=function(t,i,r,s,n,a){if(i+this.space_>this.maxSize_||r+this.space_>this.maxSize_)return null;var u=this.add_(!1,t,i,r,s,a);if(!u)return null;var o=void 0!==n?n:e.VOID,_=this.add_(!0,t,i,r,o,a);return this.mergeInfos_(u,_)},a.prototype.add_=function(t,e,r,s,n,a){var u,o,_,h,f=t?this.hitAtlases_:this.atlases_;for(_=0,h=f.length;_<h;++_){if(o=(u=f[_]).add(e,r,s,n,a))return o;if(!o&&_===h-1){var l=void 0;t?(l=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=l):(l=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=l),u=new i.default(l,this.space_),f.push(u),++h}}return null};var u=a;exports.default=u;
},{"../webgl.js":"SCyv","../functions.js":"RgA2","./Atlas.js":"N0HK"}],"Rlas":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={FRACTION:"fraction",PIXELS:"pixels"};exports.default=e;
},{}],"XCOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=o,exports.default=void 0;var t=require("../dom.js"),e=require("../events.js"),i=h(require("../events/Target.js")),a=h(require("../events/EventType.js")),s=h(require("../ImageState.js")),n=require("./IconImageCache.js");function h(t){return t&&t.__esModule?t:{default:t}}var r=function(i){function n(t,e,a,s,n,h){i.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==s&&(this.image_.crossOrigin=s),this.canvas_=h?document.createElement("canvas"):null,this.color_=h,this.imageListenerKeys_=null,this.imageState_=n,this.size_=a,this.src_=e,this.tainted_}return i&&(n.__proto__=i),n.prototype=Object.create(i&&i.prototype),n.prototype.constructor=n,n.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===s.default.LOADED){this.tainted_=!1;var e=(0,t.createCanvasContext2D)(1,1);try{e.drawImage(this.image_,0,0),e.getImageData(0,0,1,1)}catch(i){this.tainted_=!0}}return!0===this.tainted_},n.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(a.default.CHANGE)},n.prototype.handleImageError_=function(){this.imageState_=s.default.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},n.prototype.handleImageLoad_=function(){this.imageState_=s.default.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},n.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},n.prototype.getImageState=function(){return this.imageState_},n.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_)if(this.isTainted_()){var i=this.size_[0],a=this.size_[1],s=(0,t.createCanvasContext2D)(i,a);s.fillRect(0,0,i,a),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},n.prototype.getSize=function(){return this.size_},n.prototype.getSrc=function(){return this.src_},n.prototype.load=function(){if(this.imageState_==s.default.IDLE){this.imageState_=s.default.LOADING,this.imageListenerKeys_=[(0,e.listenOnce)(this.image_,a.default.ERROR,this.handleImageError_,this),(0,e.listenOnce)(this.image_,a.default.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},n.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,a=this.color_[0]/255,s=this.color_[1]/255,n=this.color_[2]/255,h=0,r=i.length;h<r;h+=4)i[h]*=a,i[h+1]*=s,i[h+2]*=n;t.putImageData(e,0,0)}},n.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(e.unlistenByKey),this.imageListenerKeys_=null},n}(i.default);function o(t,e,i,a,s,h){var o=n.shared.get(e,a,h);return o||(o=new r(t,e,i,a,s,h),n.shared.set(e,a,h,o)),o}var _=r;exports.default=_;
},{"../dom.js":"Xno5","../events.js":"55Uq","../events/Target.js":"8CR4","../events/EventType.js":"C8cu","../ImageState.js":"u3k+","./IconImageCache.js":"6V0o"}],"z2xv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),i=l(require("../ImageState.js")),e=require("../asserts.js"),o=require("../color.js"),r=require("../events.js"),n=l(require("../events/EventType.js")),s=l(require("./IconAnchorUnits.js")),a=require("./IconImage.js"),h=l(require("./IconOrigin.js")),c=l(require("./Image.js"));function l(t){return t&&t.__esModule?t:{default:t}}var g=function(c){function l(r){var n=r||{},l=void 0!==n.opacity?n.opacity:1,g=void 0!==n.rotation?n.rotation:0,u=void 0!==n.scale?n.scale:1,_=void 0!==n.rotateWithView&&n.rotateWithView;c.call(this,{opacity:l,rotation:g,scale:u,rotateWithView:_}),this.anchor_=void 0!==n.anchor?n.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:h.default.TOP_LEFT,this.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:s.default.FRACTION,this.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:s.default.FRACTION,this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var f=void 0!==n.img?n.img:null,d=void 0!==n.imgSize?n.imgSize:null,O=n.src;(0,e.assert)(!(void 0!==O&&f),4),(0,e.assert)(!f||f&&d,5),void 0!==O&&0!==O.length||!f||(O=f.src||(0,t.getUid)(f)),(0,e.assert)(void 0!==O&&O.length>0,6);var p=void 0!==n.src?i.default.IDLE:i.default.LOADED;this.color_=void 0!==n.color?(0,o.asArray)(n.color):null,this.iconImage_=(0,a.get)(f,O,d,this.crossOrigin_,p,this.color_),this.offset_=void 0!==n.offset?n.offset:[0,0],this.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:h.default.TOP_LEFT,this.origin_=null,this.size_=void 0!==n.size?n.size:null}return c&&(l.__proto__=c),l.prototype=Object.create(c&&c.prototype),l.prototype.constructor=l,l.prototype.clone=function(){return new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},l.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,i=this.getSize();if(this.anchorXUnits_==s.default.FRACTION||this.anchorYUnits_==s.default.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==s.default.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==s.default.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=h.default.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=h.default.TOP_RIGHT&&this.anchorOrigin_!=h.default.BOTTOM_RIGHT||(t[0]=-t[0]+i[0]),this.anchorOrigin_!=h.default.BOTTOM_LEFT&&this.anchorOrigin_!=h.default.BOTTOM_RIGHT||(t[1]=-t[1]+i[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},l.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},l.prototype.getColor=function(){return this.color_},l.prototype.getImage=function(t){return this.iconImage_.getImage(t)},l.prototype.getImageSize=function(){return this.iconImage_.getSize()},l.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},l.prototype.getImageState=function(){return this.iconImage_.getImageState()},l.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},l.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=h.default.TOP_LEFT){var i=this.getSize(),e=this.iconImage_.getSize();if(!i||!e)return null;t=t.slice(),this.offsetOrigin_!=h.default.TOP_RIGHT&&this.offsetOrigin_!=h.default.BOTTOM_RIGHT||(t[0]=e[0]-i[0]-t[0]),this.offsetOrigin_!=h.default.BOTTOM_LEFT&&this.offsetOrigin_!=h.default.BOTTOM_RIGHT||(t[1]=e[1]-i[1]-t[1])}return this.origin_=t,this.origin_},l.prototype.getSrc=function(){return this.iconImage_.getSrc()},l.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},l.prototype.listenImageChange=function(t,i){return(0,r.listen)(this.iconImage_,n.default.CHANGE,t,i)},l.prototype.load=function(){this.iconImage_.load()},l.prototype.unlistenImageChange=function(t,i){(0,r.unlisten)(this.iconImage_,n.default.CHANGE,t,i)},l}(c.default),u=g;exports.default=u;
},{"../util.js":"KniQ","../ImageState.js":"u3k+","../asserts.js":"fLG6","../color.js":"eucy","../events.js":"55Uq","../events/EventType.js":"C8cu","./IconAnchorUnits.js":"Rlas","./IconImage.js":"XCOy","./IconOrigin.js":"urGY","./Image.js":"S8ow"}],"RPsG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./Fill.js")),e=o(require("./TextPlacement.js"));function o(t){return t&&t.__esModule?t:{default:t}}var i="#333",n=function(o){var n=o||{};this.font_=n.font,this.rotation_=n.rotation,this.rotateWithView_=n.rotateWithView,this.scale_=n.scale,this.text_=n.text,this.textAlign_=n.textAlign,this.textBaseline_=n.textBaseline,this.fill_=void 0!==n.fill?n.fill:new t.default({color:i}),this.maxAngle_=void 0!==n.maxAngle?n.maxAngle:Math.PI/4,this.placement_=void 0!==n.placement?n.placement:e.default.POINT,this.overflow_=!!n.overflow,this.stroke_=void 0!==n.stroke?n.stroke:null,this.offsetX_=void 0!==n.offsetX?n.offsetX:0,this.offsetY_=void 0!==n.offsetY?n.offsetY:0,this.backgroundFill_=n.backgroundFill?n.backgroundFill:null,this.backgroundStroke_=n.backgroundStroke?n.backgroundStroke:null,this.padding_=void 0===n.padding?null:n.padding};n.prototype.clone=function(){return new n({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},n.prototype.getOverflow=function(){return this.overflow_},n.prototype.getFont=function(){return this.font_},n.prototype.getMaxAngle=function(){return this.maxAngle_},n.prototype.getPlacement=function(){return this.placement_},n.prototype.getOffsetX=function(){return this.offsetX_},n.prototype.getOffsetY=function(){return this.offsetY_},n.prototype.getFill=function(){return this.fill_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.getText=function(){return this.text_},n.prototype.getTextAlign=function(){return this.textAlign_},n.prototype.getTextBaseline=function(){return this.textBaseline_},n.prototype.getBackgroundFill=function(){return this.backgroundFill_},n.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},n.prototype.getPadding=function(){return this.padding_},n.prototype.setOverflow=function(t){this.overflow_=t},n.prototype.setFont=function(t){this.font_=t},n.prototype.setMaxAngle=function(t){this.maxAngle_=t},n.prototype.setOffsetX=function(t){this.offsetX_=t},n.prototype.setOffsetY=function(t){this.offsetY_=t},n.prototype.setPlacement=function(t){this.placement_=t},n.prototype.setFill=function(t){this.fill_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setStroke=function(t){this.stroke_=t},n.prototype.setText=function(t){this.text_=t},n.prototype.setTextAlign=function(t){this.textAlign_=t},n.prototype.setTextBaseline=function(t){this.textBaseline_=t},n.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},n.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},n.prototype.setPadding=function(t){this.padding_=t};var r=n;exports.default=r;
},{"./Fill.js":"AFcg","./TextPlacement.js":"AXKs"}],"3qe/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Atlas",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"AtlasManager",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Fill",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"IconImage",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"RegularShape",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"Stroke",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"Style",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return f.default}});var e=c(require("./style/Atlas.js")),t=c(require("./style/AtlasManager.js")),r=c(require("./style/Circle.js")),n=c(require("./style/Fill.js")),u=c(require("./style/Icon.js")),l=c(require("./style/IconImage.js")),o=c(require("./style/Image.js")),s=c(require("./style/RegularShape.js")),a=c(require("./style/Stroke.js")),i=c(require("./style/Style.js")),f=c(require("./style/Text.js"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./style/Atlas.js":"N0HK","./style/AtlasManager.js":"SyS8","./style/Circle.js":"cdf1","./style/Fill.js":"AFcg","./style/Icon.js":"z2xv","./style/IconImage.js":"XCOy","./style/Image.js":"S8ow","./style/RegularShape.js":"il3X","./style/Stroke.js":"TXDt","./style/Style.js":"1he4","./style/Text.js":"RPsG"}],"Focm":[function(require,module,exports) {
"use strict";var e=i(require("ol/Map.js")),r=i(require("ol/View.js")),t=require("ol/source.js"),o=i(require("ol/layer/Tile.js")),l=i(require("ol/source/Vector.js")),a=i(require("ol/layer/Vector.js")),n=i(require("ol/geom/Point")),u=i(require("ol/format/GeoJSON.js")),s=require("ol/style.js");function i(e){return e&&e.__esModule?e:{default:e}}var c=new n.default([126,37]).transform("EPSG:4326","EPSG:3857"),f=c.getCoordinates(),w=new o.default({source:new t.OSM}),d=new r.default({center:f,zoom:8});$.ajax({url:"data/ALL_SIGUNGU.json",type:"get",contentType:"application/x-www-form-urlencoded;charset=utf8",success:function(r){console.log(r);var t=new u.default({featureProjection:"EPSG:3857"}).readFeatures(r),o=new l.default({features:t}),n=new a.default({source:o,style:function(e,r){var t=e.values_.adm_nm;return new s.Style({stroke:new s.Stroke({color:"#5c68ff",width:1}),fill:new s.Fill({color:"rgba( 255, 133, 133 ,0.15)"}),text:new s.Text({text:t,textAlign:"center",font:"15px roboto,sans-serif"})})}});new e.default({layers:[w,n],target:"map",view:d})}});
},{"ol/Map.js":"8kYy","ol/View.js":"hNqE","ol/source.js":"kDr9","ol/layer/Tile.js":"BU+E","ol/source/Vector.js":"ZS12","ol/layer/Vector.js":"dflx","ol/geom/Point":"gLcY","ol/format/GeoJSON.js":"qBlb","ol/style.js":"3qe/"}]},{},["Focm"], null)
//# sourceMappingURL=Open_test.59acc307.js.map